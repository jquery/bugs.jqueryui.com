<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">TracWorkflow</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/yIpytWuWSz.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="wiki flex-column">
  <div class="breadcrumbs-nav flex-row">
    <a href="/" class="breadcrumbs-nav-first">wiki:</a>
    
      <a href="/wiki/TracWorkflow/">TracWorkflow</a>
    
  </div>
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/">Start Page</a>
      </li>
      <li>
        <a href="/wiki/TitleIndex">Index</a>
      </li>
    </ul>
  </nav>
  <div class="wiki-content">
    
<h1>The Trac Ticket Workflow System</h1><p>The Trac ticket system provides a configurable workflow.</p><h2>The Default Ticket Workflow</h2><p>When a new environment is created, a default workflow is configured in your trac.ini. This workflow is the basic workflow, as specified in <a href="https://trac.edgewall.org/intertrac/source:branches/1.2-stable/trac/ticket/workflows/basic-workflow.ini" class="ext-link"><span class="icon"></span>basic-workflow.ini</a>:</p><pre class="wiki">#!Workflow width=700 height=300
leave = * -&gt; *
leave.operations = leave_status
leave.default = 1

create = &lt;none&gt; -&gt; new
create.default = 1

create_and_assign = &lt;none&gt; -&gt; assigned
create_and_assign.label = assign
create_and_assign.permissions = TICKET_MODIFY
create_and_assign.operations = may_set_owner

accept = new,assigned,accepted,reopened -&gt; accepted
accept.permissions = TICKET_MODIFY
accept.operations = set_owner_to_self

resolve = new,assigned,accepted,reopened -&gt; closed
resolve.permissions = TICKET_MODIFY
resolve.operations = set_resolution

reassign = new,assigned,accepted,reopened -&gt; assigned
reassign.permissions = TICKET_MODIFY
reassign.operations = set_owner

reopen = closed -&gt; reopened
reopen.permissions = TICKET_CREATE
reopen.operations = del_resolution
</pre><h2>Additional Ticket Workflows</h2><p>There are example workflows provided in the Trac source tree, see <a href="https://trac.edgewall.org/intertrac/source:branches/1.2-stable/contrib/workflow" class="ext-link"><span class="icon"></span>contrib/workflow</a> for <code>.ini</code> config sections. One of those may be a good match for what you want. They can be pasted into the <code>[ticket-workflow]</code> section of your <code>trac.ini</code> file. However, if you have existing tickets then there may be issues if those tickets have states that are not in the new workflow. </p><p>Here are some <a href="https://trac.edgewall.org/intertrac/WorkFlow/Examples" class="ext-link"><span class="icon"></span>diagrams</a> of the above examples.</p><h2>Basic Ticket Workflow Customization</h2><p><strong>Note</strong>: Ticket "statuses" or "states" are not separately defined. The states a ticket can be in are automatically generated by the transitions defined in a workflow. Therefore, creating a new ticket state simply requires defining a state transition in the workflow that starts or ends with that state.</p><p>In the <code>[ticket-workflow]</code> section of <code>trac.ini</code>, each entry is an action that may be taken on a ticket. </p><p>For example, consider the <code>accept</code> action from <code>simple-workflow.ini</code>:</p><pre class="wiki">accept = new,accepted -&gt; accepted
accept.permissions = TICKET_MODIFY
accept.operations = set_owner_to_self
</pre><p>The first line in this example defines the <code>accept</code> action, along with the states the action is valid in (<code>new</code> and <code>accepted</code>), and the new state of the ticket when the action is taken (<code>accepted</code>).</p><p>The <code>accept.permissions</code> line specifies the permissions the user must have to use this action. <a href="https://trac.edgewall.org/intertrac/ExtraPermissionsProvider" class="ext-link"><span class="icon"></span>ExtraPermissionsProvider</a> can define new permissions to be used here.</p><p>The <code>accept.operations</code> line specifies changes that will be made to the ticket in addition to the status change when the action is taken.  In this case, when a user clicks on <code>accept</code>, the ticket owner field is updated to the logged in user.  Multiple operations may be specified in a comma separated list.</p><p>The available operations are:</p><ul><li>**del_owner** -- Clears the owner field.</li><li>**set_owner** -- Sets the owner to the selected or entered owner. Defaults to the current user. When <code>[ticket] restrict_owner = true</code>, the select will be populated with users that have <code>TICKET_MODIFY</code> permission and an authenticated session.</li> <li>''actionname''<code>.set_owner</code> may optionally specify a comma delimited list of users that will be used to populate the select, or a single user. Groups and permissions may also be included in the list <em>(Since 1.1.3)</em>. When groups or permissions are specified the select is populated with all members of the group or all users that possess the permission.</li><li>**set_owner_to_self** -- Sets the owner to the logged in user.</li><li>**may_set_owner** -- Sets the owner to the selected or entered owner. Defaults to the existing owner. <em>(Since 1.1.2)</em>. </li><li>**del_resolution** -- Clears the resolution field.</li><li>**set_resolution** -- Sets the resolution to the selected value.</li> <li>''actionname''<code>.set_resolution</code> may optionally be set to a comma delimited list or a single value. The resolution(s) specified in this attribute must be defined in the database. Example:</li></ul><p> </p><pre class="wiki">resolve_new = new -&gt; closed
resolve_new.label = resolve
resolve_new.operations = set_resolution
resolve_new.permissions = TICKET_MODIFY
resolve_new.set_resolution = invalid,wontfix
</pre><p></p><ul><li>**leave_status** -- Displays "leave as &lt;current status&gt;" and makes no change to the ticket.</li><li>**reset_workflow** -- Resets the status of tickets that are in states no longer defined.</li></ul><p><strong>Note:</strong> Specifying conflicting operations, such as <code>set_owner</code> and <code>del_owner</code>, has unspecified results.</p><p>The example that follows demonstrates the <code>.label</code> attribute. The action here is <code>resolve_accepted</code>, but it will be presented to the user as <code>resolve</code>.</p><pre class="wiki">resolve_accepted = accepted -&gt; closed
resolve_accepted.label = resolve
resolve_accepted.permissions = TICKET_MODIFY
resolve_accepted.operations = set_resolution
</pre><p>The <code>.label</code> attribute is new in Trac 1.1.3 and is functionally the same as the <code>.name</code> attribute, which is now deprecated. If neither <code>.label</code> or <code>.name</code> is specified, the action will be presented to the user as <em>resolve accepted</em>, the underscores having been replaced by whitespace (<em>Since 1.1.3</em>).</p><p>For actions that should be available in all states, <code>*</code> may be used in place of the state. The obvious example is the <code>leave</code> action:</p><pre class="wiki">leave = * -&gt; *
leave.operations = leave_status
leave.default = 1
</pre><p>This also shows the use of the <code>.default</code> attribute. This value is expected to be an integer, and the order in which the actions are displayed is determined by this value. The action with the highest <code>.default</code> value is listed first, and is selected by default. The rest of the actions are listed in order of decreasing <code>.default</code> values.</p><p>If not specified for an action, <code>.default</code> is 0. The value may be negative.</p><p>There is one hard-coded constraint to the workflow: tickets are expected to have a <code>closed</code> state. The default reports/queries treat any state other than <code>closed</code> as an open state.</p><h3>Ticket Create Action</h3><p>The ticket create actions are specified by a transition from the special <code>&lt;none&gt;</code> state. At least one create action must be available to the user in order for tickets to be created. The create actions defined in the default workflow are:</p><pre class="wiki">create = &lt;none&gt; -&gt; new
create.default = 1

create_and_assign = &lt;none&gt; -&gt; assigned
create_and_assign.label = assign
create_and_assign.permissions = TICKET_MODIFY
create_and_assign.operations = may_set_owner
</pre><h3>Ticket Reset Action</h3><p>The special <code>_reset</code> action is added by default for tickets that are in states that are no longer defined. This allows tickets to be individually "repaired" after the workflow is changed, although it's recommended that the administrator perform the action by batch modifying the affected tickets. By default the <code>_reset</code> action is available to users with the <code>TICKET_ADMIN</code> permission and reset tickets are put in the <em>new</em> state. The default <code>_reset</code> action is equivalent to the following <code>[ticket-workflow]</code> action definition:</p><pre class="wiki">_reset = -&gt; new
_reset.label = reset
_reset.operations = reset_workflow
_reset.permissions = TICKET_ADMIN
_reset.default = 0
</pre><p>Since <a href="https://trac.edgewall.org/intertrac/milestone:1.0.3" class="ext-link"><span class="icon"></span>milestone:1.0.3</a> the <code>_reset</code> action can be customized by redefining the implicit action. For example, to allow anyone with <code>TICKET_MODIFY</code> to perform the <code>_reset</code> action, the workflow action would need to be defined:</p><pre class="wiki">_reset = -&gt; new
_reset.label = reset
_reset.operations = reset_workflow
_reset.permissions = TICKET_MODIFY
_reset.default = 0
</pre><h2>Workflow Visualization</h2><p>Workflows can be visualized by rendering them on the wiki using the [WikiMacros#Workflow-macro Workflow macro].</p><p>Workflows can also be visualized using the <code>contrib/workflow/workflow_parser.py</code> script. The script outputs <code>.dot</code> files that <a href="https://www.graphviz.org" class="ext-link"><span class="icon"></span>GraphViz</a> understands. The script can be used as follows (your install path may be different):</p><pre class="wiki">$ cd /var/local/trac_devel/contrib/workflow/
$ ./showworkflow /srv/trac/PlannerSuite/conf/trac.ini
</pre><p>The script outputs <code>trac.pdf</code> in the same directory as the <code>trac.ini</code> file.</p><h2>Example: Adding optional Testing with Workflow</h2><p>The following adds a <code>testing</code> action. When the ticket has status <code>new</code>, <code>accepted</code> or <code>needs_work</code>, you can choose to submit it for testing.  When it's in the testing status the user gets the option to reject it and send it back to <code>needs_work</code>, or pass the testing and send it along to <code>closed</code>. If they accept it, then it is automatically marked as <code>closed</code> and the resolution is set to <code>fixed</code>. Since all the old work flow remains, a ticket can skip this entire section.</p><pre class="wiki">testing = new,accepted,needs_work,assigned,reopened -&gt; testing
testing.label = Submit to reporter for testing
testing.permissions = TICKET_MODIFY

reject = testing -&gt; needs_work
reject.label = Failed testing, return to developer

pass = testing -&gt; closed
pass.label = Passes Testing
pass.operations = set_resolution
pass.set_resolution = fixed
</pre><h2>Example: Add simple optional generic review state</h2><p>Sometimes Trac is used in situations where "testing" can mean different things to different people so you may want to create an optional workflow state that is between the default workflow's <code>assigned</code> and <code>closed</code> states, but does not impose implementation-specific details. The only new state you need to add for this is a <code>reviewing</code> state. A ticket may then be "submitted for review" from any state that it can be reassigned. If a review passes, you can re-use the <code>resolve</code> action to close the ticket, and if it fails you can re-use the <code>reassign</code> action to push it back into the normal workflow.</p><p>The new <code>reviewing</code> state along with its associated <code>review</code> action looks like this:</p><pre class="wiki">review = new,assigned,reopened -&gt; reviewing
review.operations = set_owner
review.permissions = TICKET_MODIFY
</pre><p>To integrate this with the default workflow, you also need to add the <code>reviewing</code> state to the <code>accept</code> and <code>resolve</code> actions:</p><pre class="wiki">accept = new,reviewing -&gt; assigned
[…]
resolve = new,assigned,reopened,reviewing -&gt; closed
</pre><p>Optionally, you can also add a new action that allows you to change the ticket's owner without moving the ticket out of the <code>reviewing</code> state. This enables you to reassign review work without pushing the ticket back to the <code>new</code> status:</p><pre class="wiki">reassign_reviewing = reviewing -&gt; *
reassign_reviewing.label = reassign review
reassign_reviewing.operations = set_owner, leave_status
reassign_reviewing.permissions = TICKET_MODIFY
</pre><p>The full <code>[ticket-workflow]</code> configuration will be:</p><pre class="wiki">[ticket-workflow]
create = &lt;none&gt; -&gt; new
create.default = 1
create_and_assign = &lt;none&gt; -&gt; assigned
create_and_assign.label = assign
create_and_assign.permissions = TICKET_MODIFY
create_and_assign.operations = may_set_owner
accept = new,reviewing -&gt; assigned
accept.operations = set_owner_to_self
accept.permissions = TICKET_MODIFY
leave = * -&gt; *
leave.default = 1
leave.operations = leave_status
reassign = new,assigned,accepted,reopened -&gt; assigned
reassign.operations = set_owner
reassign.permissions = TICKET_MODIFY
reopen = closed -&gt; reopened
reopen.operations = del_resolution
reopen.permissions = TICKET_CREATE
resolve = new,assigned,reopened,reviewing -&gt; closed
resolve.operations = set_resolution
resolve.permissions = TICKET_MODIFY
review = new,assigned,reopened -&gt; reviewing
review.operations = set_owner
review.permissions = TICKET_MODIFY
reassign_reviewing = reviewing -&gt; *
reassign_reviewing.operations = set_owner, leave_status
reassign_reviewing.label = reassign review
reassign_reviewing.permissions = TICKET_MODIFY
</pre><h2>Advanced Ticket Workflow Customization</h2><p>If the customizations above do not meet your needs, you can extend the workflow with plugins. Plugins can provide additional operations for the workflow, like code review, or implement side-effects for an action, such as triggering a build, that may not be merely simple state changes. Look at <a href="https://trac.edgewall.org/intertrac/source:branches/1.2-stable/sample-plugins/workflow" class="ext-link"><span class="icon"></span>sample-plugins/workflow</a> for a few examples to get started.</p><p>But if even that is not enough, you can disable the ConfigurableTicketWorkflow component and create a plugin that completely replaces it. See also the <a href="https://trac-hacks.org/wiki/AdvancedTicketWorkflowPlugin" class="ext-link"><span class="icon"></span>AdvancedTicketWorkflowPlugin</a>, which provides additional operations.</p><h2>Adding Workflow States to Milestone Progress Bars</h2><p>If you add additional states to your workflow, you may want to customize your milestone progress bars as well. See the [TracIni#milestone-groups-section "[milestone-groups]"] section.</p><h2>Ideas for next steps</h2><p>Enhancement ideas for the workflow system should be filed as enhancement tickets against the <a href="https://trac.edgewall.org/intertrac/query:?status=assigned&status=new&status=reopened&keywords=~workflow&component=ticket+system" class="ext-link"><span class="icon"></span>ticket system</a> component.  You can also document ideas on the <a href="https://trac.edgewall.org/intertrac/TracIdeas/TracWorkflow" class="ext-link"><span class="icon"></span>TracIdeas/TracWorkflow</a> page. </p>

  </div>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
