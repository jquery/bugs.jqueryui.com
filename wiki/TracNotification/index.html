<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">TracNotification</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/yIpytWuWSz.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="wiki flex-column">
  <div class="breadcrumbs-nav flex-row">
    <a href="/" class="breadcrumbs-nav-first">wiki:</a>
    
      <a href="/wiki/TracNotification/">TracNotification</a>
    
  </div>
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/">Start Page</a>
      </li>
      <li>
        <a href="/wiki/TitleIndex">Index</a>
      </li>
    </ul>
  </nav>
  <div class="wiki-content">
    
<h1>Email Notification of Ticket Changes</h1><p>Trac supports notification of ticket changes via email. </p><p>Email notification is useful to keep users up-to-date on tickets of interest, and also provides a convenient way to post all ticket changes to a dedicated mailing list.</p><p>Disabled by default, notification can be activated and configured in <a href="/wiki/TracIni">trac.ini</a>.</p><h2>Receiving Notification Mails</h2><p>When reporting a new ticket or adding a comment, enter a valid email address or your Trac username in the ''reporter'', ''assigned to/owner'' or ''cc'' field. Trac will automatically send you an email when changes are made to the ticket, depending on how notification is configured.</p><h3>How to use your username to receive notification mails</h3><p>To receive notification mails, you can either enter a full email address or your Trac username. To get notified with a simple username or login, you need to specify a valid email address in your <a href="/prefs" class="ext-link"><span class="icon"></span>preferences</a>. </p><p>Alternatively, a default domain name (<strong><code>smtp_default_domain</code></strong>) can be set in the <a href="/wiki/TracIni">TracIni</a> file, see <a href="#ConfigurationOptions" class="ext-link"><span class="icon"></span>Configuration Options</a> below. In this case, the default domain will be appended to the username, which can be useful for an "Intranet" kind of installation.</p><p>When using apache and mod_kerb for authentication against Kerberos / Active Directory, usernames take the form (<strong><code>username@EXAMPLE.LOCAL</code></strong>). To avoid this being interpreted as an email address, add the Kerberos domain to  (<strong><code>ignore_domains</code></strong>).</p><h3>Ticket attachment notifications</h3><p>Since 1.0.3 Trac will send notifications when a ticket attachment is added or deleted. Usually attachment notifications will be enabled in an environment by default. To disable the attachment notifications for an environment the <code>TicketAttachmentNotifier</code> component must be disabled:</p><pre class="wiki">[components]
trac.ticket.notification.TicketAttachmentNotifier = disabled
</pre><h2>Configuring SMTP Notification</h2><p><strong>Important:</strong> The [[TracIni#trac-base_url-option|[trac] base_url]] option must be configured for links in the notification message to be correctly generated. </p><h3>Configuration Options</h3><p>These are the available options for the <code>[notification]</code> section in trac.ini:</p><p>[[TracIni(section=notification)]]</p><h3>Example Configuration (SMTP)</h3><pre class="wiki">[notification]
smtp_enabled = true
smtp_server = mail.example.com
smtp_from = notifier@example.com
smtp_replyto = myproj@projects.example.com
smtp_always_cc = ticketmaster@example.com, theboss+myproj@example.com
</pre><h3>Example Configuration (<code>sendmail</code>)</h3><pre class="wiki">[notification]
smtp_enabled = true
email_sender = SendmailEmailSender
sendmail_path = /usr/sbin/sendmail
smtp_from = notifier@example.com
smtp_replyto = myproj@projects.example.com
smtp_always_cc = ticketmaster@example.com, theboss+myproj@example.com
</pre><h3>Subscriber Configuration</h3><p>The default subscriptions are configured in the [TracIni#notification-subscriber-section "[notification-subscriber]"] section.</p><p>[[TracIni(section=notification-subscriber)]]</p><p>Each user can override these defaults in their ''Notifications'' preferences.</p><p>For example to unsubscribe from notifications for one's own changes and comments, the rule "Never notify: I update a ticket" should be added above other subscription rules.</p><p>The subscription rule name on the left side of the <code>=</code> can be anything, it has no meaning outside this configuration file. The subscriber name on the right side of the <code>=</code> must be one of the subscribers listed in the above table.</p><p>The following attributes of default subscriptions can be configured:</p><ul><li><code>.distributor</code> (Default: <code>email</code>)</li>  <li>Other values require plugins. For example <code>on-site</code> requires th:OnSiteNotificationsPlugin.</li><li><code>.priority</code> (Default: <code>100</code>)</li>  <li>Smaller values override larger values.</li>  <li>If you use <code>0</code>, then users will not be able to override this rule.</li><li><code>.adverb</code> (Default: <code>always</code>)</li>  <li><code>never</code> can be used to silence other subscription rules with higher values.</li><li><code>.format</code> (Default: <code>text/plain</code>)</li>  <li>Other values require plugins. For example <code>text/html</code> requires th:TracHtmlNotificationPlugin.</li></ul><h3>Example Configuration (default subscriptions)</h3><pre class="wiki">[notification-subscriber]
always_notify_owner = TicketOwnerSubscriber
always_notify_owner.distributor = email
always_notify_owner.priority = 100
always_notify_owner.adverb = always
always_notify_owner.format = text/plain

always_notify_previous_updater = TicketPreviousUpdatersSubscriber

never_notify_updater = TicketUpdaterSubscriber
never_notify_updater.adverb = never
never_notify_updater.priority = 0

notify_cc_html = CarbonCopySubscriber
notify_cc_html.format = text/html
</pre><h3>Customizing the email subject</h3><p>The email subject can be customized with the <code>ticket_subject_template</code> option, which contains a <a href="https://genshi.edgewall.org/wiki/Documentation/text-templates.html" class="ext-link"><span class="icon"></span>Genshi text template</a> snippet. The default value is:</p><pre class="wiki">${prefix} #${ticket.id}: ${summary}
</pre><p>The following variables are available in the template:</p> <ul><li><code>env</code>: The project environment object (see <a href="https://trac.edgewall.org/intertrac/source:branches/1.2-stable/trac/env.py" class="ext-link"><span class="icon"></span>env.py</a>).</li> <li><code>prefix</code>: The prefix defined in <code>smtp_subject_prefix</code>.</li> <li><code>summary</code>: The ticket summary, with the old value if the summary was edited.</li> <li><code>ticket</code>: The ticket model object (see <a href="https://trac.edgewall.org/intertrac/source:branches/1.2-stable/trac/ticket/model.py" class="ext-link"><span class="icon"></span>model.py</a>). Individual ticket fields can be accessed by appending the field name separated by a dot, eg <code>${ticket.milestone}</code>.</li></ul><h3>Customizing the email content</h3><p>The notification email content is generated based on <code>ticket_notify_email.txt</code> in <code>trac/ticket/templates</code>. You can add your own version of this template by adding a <code>ticket_notify_email.txt</code> to the templates directory of your environment. The default is:</p><pre class="wiki">$ticket_body_hdr
$ticket_props
{% choose ticket.new %}\\
{%   when True %}\\
$ticket.description
{%   end %}\\
{%   otherwise %}\\
{%     if changes_body %}\\
${_('Changes (by %(author)s):', author=change.author)}

$changes_body
{%     end %}\\
{%     if changes_descr %}\\
{%       if not changes_body and not change.comment and change.author %}\\
${_('Description changed by %(author)s:', author=change.author)}
{%       end %}\\
$changes_descr
--
{%     end %}\\
{%     if change.comment %}\\

${_('Comment:') if changes_body else _('Comment (by %(author)s):', author=change.author)}

$change.comment
{%     end %}\\
{%   end %}\\
{% end %}\\

${'-- '}
${_('Ticket URL: &lt;%(link)s&gt;', link=ticket.link)}
$project.name &lt;${project.url or abs_href()}&gt;
$project.descr
</pre><p>See the <a href="https://trac.edgewall.org/intertrac/CookBook/Notification/Templates" class="ext-link"><span class="icon"></span>cookbook</a> for additional template customization recipes.</p><h2>Sample Email</h2><pre class="wiki">
#42: testing
---------------------------+------------------------------------------------
       Id:  42             |      Status:  assigned                
Component:  report system  |    Modified:  Fri Apr  9 00:04:31 2004
 Severity:  major          |   Milestone:  0.9                     
 Priority:  lowest         |     Version:  0.6                     
    Owner:  anonymous      |    Reporter:  jonas@example.com               
---------------------------+------------------------------------------------
Changes:
  * component:  changeset view =&gt; search system
  * priority:  low =&gt; highest
  * owner:  jonas =&gt; anonymous
  * cc:  daniel@example.com =&gt;
         daniel@example.com, jonas@example.com
  * status:  new =&gt; assigned

Comment:
I'm interested too!

--
Ticket URL: &lt;http://example.com/trac/ticket/42&gt;
My Project &lt;http://myproj.example.com/&gt;
</pre><h2>Using GMail as the SMTP relay host</h2><p>Use the following configuration snippet:</p><pre class="wiki">[notification]
smtp_enabled = true
use_tls = true
mime_encoding = base64
smtp_server = smtp.gmail.com
smtp_port = 587
smtp_user = user
smtp_password = password
</pre><p>where ''user'' and ''password'' match an existing GMail account, ie the ones you use to log in on <a href="https://gmail.com" class="ext-link"><span class="icon"></span>https://gmail.com</a>.</p><p>Alternatively, you can use <code>smtp_port = 25</code>.</p><p>You should not use <code>smtp_port = 465</code>. Doing so may deadlock your ticket submission. Port 465 is reserved for the SMTPS protocol, which is not supported by Trac. See <a href="https://trac.edgewall.org/intertrac/comment:2:ticket:7107" class="ext-link"><span class="icon"></span>#7107</a> for details.</p><h2>Troubleshooting</h2><p>If notifications are not working, inspect the <a href="/wiki/TracLogging">log</a> for error messages.</p><p>Notification errors are not always reported through the web interface, so the user who submits a change or creates a ticket may not get notified about a notification failure. The Trac administrator needs to look at the log to find the error message and traceback.</p><h3>''Permission denied'' error</h3><p>Typical error message:</p><pre class="wiki">  ...
  File ".../smtplib.py", line 303, in connect
    raise socket.error, msg
  error: (13, 'Permission denied')
</pre><p>This error usually comes from a security settings on the server: many Linux distributions do not allow the web server (Apache, ...) to post email messages to the local SMTP server.</p><p>Many users get confused when their manual attempts to contact the SMTP server succeed:</p><pre class="wiki">telnet localhost 25
</pre><p>This is because a regular user may connect to the SMTP server, but the web server cannot:</p><pre class="wiki">sudo -u www-data telnet localhost 25
</pre><p>In such a case, you need to configure your server so that the web server is authorized to post to the SMTP server. The actual settings depend on your Linux distribution and current security policy. You may find help in the Trac <a href="https://trac.edgewall.org/intertrac/MailingList" class="ext-link"><span class="icon"></span>MailingList</a> archive.</p><p>Relevant ML threads:</p> <ul><li>SELinux: <a href="http://article.gmane.org/gmane.comp.version-control.subversion.trac.general/7518" class="ext-link"><span class="icon"></span>http://article.gmane.org/gmane.comp.version-control.subversion.trac.general/7518</a></li></ul><p>For SELinux in Fedora 10:</p><pre class="wiki">$ setsebool -P httpd_can_sendmail 1
</pre><h3>''Suspected spam'' error</h3><p>Some SMTP servers may reject the notification email sent by Trac.</p><p>The default Trac configuration uses Base64 encoding to send emails to the recipients. The whole body of the email is encoded, which sometimes trigger ''false positive'' spam detection on sensitive email servers. In such an event, change the default encoding to "quoted-printable" using the <code>mime_encoding</code> option.</p><p>Quoted printable encoding works better with languages that use one of the Latin charsets. For Asian charsets, stick with the Base64 encoding.</p><p></p><hr><p></p><p>See also: <a href="/wiki/TracTickets">TracTickets</a>, <a href="/wiki/TracIni">TracIni</a>, <a href="/wiki/TracGuide">TracGuide</a>, <a href="https://trac.edgewall.org/intertrac/TracDev/NotificationApi" class="ext-link"><span class="icon"></span>TracDev/NotificationApi</a></p>

  </div>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
