<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">TracUpgrade</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg"></link>
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    <style>
      .wiki,.wiki a{font-size:.8125rem}.breadcrumbs-nav{position:absolute;top:.625em;left:1em;gap:.25em}.breadcrumbs-nav-first[href],.breadcrumbs-nav-first[href]:visited{color:#998}.breadcrumbs-nav a{font-size:.625rem}.wiki-content{padding:1em 1.5em;border-radius:var(--border-radius);border:1px solid var(--border-color)}.wiki-content h2,.wiki-content h3,.wiki-content h4,.wiki-content h5,.wiki-content h6{font-weight:700;margin:1em 0 .5em}.wiki-content h1,.wiki-content h1 a{font-size:1.1875rem}.wiki-content h2{font-size:1rem}.wiki-content h3{font-size:.9rem}.wiki-content h4{font-size:.8rem}.wiki-content h5{font-size:.75rem}.wiki-content h6{font-size:.7rem}.wiki-index-link{margin:0 0 .5em}:root{--font-family:'Arial','Helvetica','Verdana','sans-serif';--font-family-header:var(--font-family);--font-family-alternate:Verdana,Arial,'Bitstream Vera Sans',Helvetica,sans-serif;--font-family-monospace:Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace}:root{--primary-color:#000000;--secondary-color:#ff9c08;--text-color:#222;--text-color-dark-bg:#fff;--text-color-link:#bb0000;--text-color-link-hover:#f00000;--text-color-link-active:#ff2424;--text-color-link-visited:#cc0000;--text-color-link-disabled:#998;--main-link-hover-bg-color:#eee;--text-shadow-color:#fcfcfc;--button-color:var(--secondary-color);--button-hover-color:#a36200;--button-text-color:#fff;--background-color:#5f5f5f;--main-background-start-color:#1a1a1a;--main-background-end-color:var(--background-color);--top-nav-hover-start-color:#414240;--top-nav-hover-mid-color:#323530;--top-nav-hover-end-color:#292b28;--nav-background-color:var(--primary-color);--secondary-nav-start-color:#2d2d2d;--secondary-nav-end-color:#060606;--secondary-nav-box-shadow:#313131;--content-background-color:#fafafa;--banner-background-color:var(--primary-color);--footer-background-start-color:#000000;--footer-background-end-color:#141400;--footer-text-color-link:#bbb;--nav-text-link-color:white;--nav-hover-link-color:rgba(255, 255, 255, 0.2);--border-color:#e4e4e4;--border-radius:6px;--input-border-color:white;--blockquote-border-color:#b44;--pre-color:#333;--pre-background-color:#fff;--code-color:#600;--code-background-color:var(--content-background-color);--syntax-tab-size:2}*{box-sizing:border-box}body,html{padding:0;margin:0 auto;font-family:var(--font-family);font-size:100%;color:var(--text-color);line-height:1.4}html{overflow-y:auto;background-color:var(--background-color)}html:before{content:'';position:absolute;top:80px;left:0;right:0;height:900px;background:linear-gradient(to bottom,var(--main-background-start-color),var(--main-background-start-color) 25%,var(--main-background-end-color));z-index:-1}.banner{width:100%;height:80px;background-color:var(--banner-background-color);color:#fff;box-shadow:0 2px 5px rgba(0,0,0,.2);text-align:center;font-size:.875rem;padding:0 .25em}.banner a[href],.banner a[href]:visited{color:#5cb5f0}.banner a[href]:hover{color:var(--text-color-link-hover)}.banner a[href]:active{color:var(--text-color-link-active)}th,tr{font-family:var(--font-family-alternate)}.container{width:100%;max-width:956px;margin:0 auto;overflow:hidden}h1,h2,h3,h4,h5,h6{font-family:var(--font-family-header);font-weight:400;margin:0;padding:0;letter-spacing:0}h1,h2,h3,h4{letter-spacing:-.018em}h1{font-size:1.25rem;font-weight:700}h2{font-size:1rem;font-weight:700}.visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}p{line-height:1.5;margin:.5em 0 1em}p:last-child{margin-bottom:0}ul{margin:0}li{line-height:1.5}hr{width:100%}blockquote{margin:-.3em 0 0 0;border-style:solid;border-width:0 0 0 2px;padding-left:.4em;border-color:var(--blockquote-border-color)}a[href]{color:var(--text-color-link)}a[href]:visited{color:var(--text-color-link-visited)}a[href]:hover{color:var(--text-color-link-hover)}a[href]:active{color:var(--text-color-link-active)}a[aria-disabled=true]{color:var(--text-color-link-disabled)}main{padding:1rem}table{margin:1em 0}table td,table th{padding-right:1em}code,pre{font-family:var(--font-family-monospace)}pre:not([class*=language-]){margin:.5em 0;-moz-tab-size:var(--syntax-tab-size);-o-tab-size:var(--syntax-tab-size);tab-size:var(--syntax-tab-size);-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;width:100%;padding:.25em;font-size:.6875rem;border-radius:var(--border-radius);overflow-x:auto;background:var(--pre-background-color);color:var(--pre-color);border:1px solid #000;text-align:left}code{color:var(--code-color);border:1px solid var(--border-color);border-radius:.25em;padding:0 .3em;background:var(--code-background-color);word-break:break-all}pre[class*=language-] code{color:unset;border:none;border-radius:0;padding:0;background:0 0;word-break:normal}.strikethrough{text-decoration:line-through}header{position:relative;height:95px;display:flex;flex-wrap:wrap;padding:0 1em}.nav{display:flex;flex-direction:column;padding:0;list-style:none}.nav a{display:flex;align-items:center;height:35px;font-size:.75rem;padding:0 1em;text-decoration:none;border-bottom:2px solid transparent;white-space:nowrap;width:100%}.nav li:not(.active) a:active,.nav li:not(.active) a:hover{background-color:var(--nav-hover-link-color);border-bottom-color:var(--secondary-color)}.nav a,.nav a:active,.nav a:hover,.nav a:visited{color:var(--nav-text-link-color)}.nav a:active{background:linear-gradient(to bottom,var(--secondary-nav-end-color),var(--secondary-nav-start-color))}.nav .active a{border-bottom-color:var(--secondary-color)}#jq-siteLogo{margin-top:1em}#jq-primaryNavigation{padding:0 .5em;background-color:var(--nav-background-color)}#jq-secondaryNavigation{padding:0 .5em;background:linear-gradient(to bottom,var(--secondary-nav-start-color),var(--secondary-nav-end-color));box-shadow:0 -2px 1px var(--secondary-nav-box-shadow),0 2px 1px #000}#jq-secondaryNavigation a{font-size:.8125rem}#jq-content{position:relative;width:100%}.content-nav{font-size:.8125rem;margin:1.2em 0;align-self:flex-end}.content-nav ul{list-style:none}.content-nav li{padding:0 .75em}.content-nav li:not(:last-of-type){border-right:1px solid var(--border-color)}.hamburger-lines{position:relative;width:18px;height:14px;align-self:center}.hamburger-line{width:100%;height:2px;background-color:#fff;transition:opacity .2s ease-in-out,transform .2s ease-in-out}.hamburger-toggle:checked+.hamburger-lines span:first-of-type{transform:rotateZ(45deg) translate(4px,4.5px) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:nth-of-type(2){transform:rotateZ(135deg) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:last-of-type{transform:translateY(-8px) scale(0);opacity:0}.hamburger-toggle:checked~#jq-menus{transform:none;opacity:1}form{gap:.5em}label{font-style:italic;font-size:.8125rem;font-weight:700}input{border:1px solid var(--input-border-color);border-radius:var(--border-radius);height:25px;padding:0 .5em;color:var(--text-color)}button{display:block;border:0;padding:5px 10px;border-radius:var(--border-radius);background:var(--button-color);color:var(--button-text-color);font-size:.875rem;cursor:pointer}button:active,button:hover{background-color:var(--button-hover-color)}button:active{box-shadow:inset 0 0 5px #000}main{padding:1em;gap:1em}main a[href]:active,main a[href]:hover{background-color:var(--main-link-hover-bg-color)}#jq-topnav{gap:.25em}#jq-topnav a{width:100%;display:block;font-family:var(--font-family-alternate);font-size:.625rem;padding:.1em 1.5em;text-decoration:none;border:2px solid var(--border-color);color:#000;box-shadow:0 1px 2px rgba(0,0,0,.5);text-align:center;border-radius:var(--border-radius)}#jq-topnav a:active,#jq-topnav a:hover{color:#fff;border-color:var(--top-nav-hover-end-color)}#jq-topnav a:hover{background:linear-gradient(to bottom,var(--top-nav-hover-start-color),var(--top-nav-hover-mid-color) 50%,var(--top-nav-hover-end-color) 50%,var(--top-nav-hover-end-color))}#jq-topnav a:active{background:linear-gradient(to bottom,var(--top-nav-hover-end-color),var(--top-nav-hover-end-color) 50%,var(--top-nav-hover-mid-color) 50%,var(--top-nav-hover-start-color))}footer{background-color:var(--nav-background-color);background:var(--nav-background-color) linear-gradient(to bottom,var(--footer-background-start-color),var(--footer-background-end-color));padding:2em;margin-bottom:2em;color:var(--text-color-dark-bg);border:2px solid transparent;border-top:0;border-radius:0 0 var(--border-radius) var(--border-radius)}footer a[href],footer a[href]:visited{color:var(--footer-text-color-link)}footer a[href]:active,footer a[href]:hover{background-color:var(--main-link-hover-bg-color);color:#000}.flex-row{display:flex;flex-direction:row}.flex-column{display:flex;flex-direction:column}.flex-between-start{justify-content:space-between;align-items:flex-start}.flex-between-center{justify-content:space-between;align-items:center}.flex-start-center{justify-content:flex-start;align-items:center}.flex-end-center{justify-content:flex-end;align-items:center}.flex-center{display:flex;justify-content:center;align-items:center}.items-start{align-items:start}.white-box{background-color:var(--content-background-color);border:1px solid var(--border-color)}a.ext-link .icon{padding-left:15px}@media (max-width:919px){#jq-menus{position:absolute;top:95px;height:calc(100vh - 95px);left:0;right:0;background-color:var(--nav-background-color);z-index:1;transition:transform .2s ease-in-out,opacity .2s ease-in-out;transform:translateX(100%);opacity:0;display:flex;flex-direction:column-reverse;justify-content:flex-end}}@media (min-width:920px){html:before{top:60px}body{background-position-y:60px}.banner{height:60px;font-size:1rem}header{height:125px;padding:0 0 0 2em}#jq-topnav{flex-direction:row;align-self:flex-end;gap:0}#jq-topnav a{width:auto;border-radius:0}#jq-topnav a:first-of-type{border-radius:var(--border-radius) 0 0 var(--border-radius)}#jq-topnav a:last-of-type{border-radius:0 var(--border-radius) var(--border-radius) 0}.nav{flex-direction:row}.nav a{width:auto}#jq-primaryNavigation a{height:27px;align-self:flex-end}#jq-secondaryNavigation{border-radius:var(--border-radius);margin-top:2em}#jq-siteLogo{align-self:flex-end}main{flex-grow:1;min-height:520px;font-size:.75rem}.hamburger-lines{display:none}.content-nav{margin-top:.4em}}:root{--pagefind-ui-background-color:#fff}#search{width:100%;position:relative;min-height:25px}.pagefind-ui__search-input{width:100%;border:1px solid var(--border-color)}.pagefind-ui__search-clear{display:inline-block;position:absolute;width:25px;height:25px;right:15px;top:0;padding:0 0 0 25px;overflow:hidden;background-color:transparent;z-index:1}.pagefind-ui__search-clear:active,.pagefind-ui__search-clear:hover{background-color:rgba(0,0,0,.2)}.pagefind-ui__search-clear:after{content:'×';position:absolute;top:0;left:0;right:0;bottom:0;font-weight:700;font-size:1.5rem;line-height:26px;text-align:center;color:var(--text-color);opacity:1}.pagefind-ui__hidden{display:none}.pagefind-ui__suppressed{display:none}.pagefind-ui__drawer{position:absolute;top:100%;left:0;right:0;height:350px;background-color:var(--pagefind-ui-background-color);border:1px solid var(--border-color);border-top:0;border-radius:0 0 var(--border-radius) var(--border-radius);box-shadow:0 2px 4px rgba(0,0,0,.2);padding:10px;color:var(--text-color);font-size:.875rem;overflow-y:auto;word-break:break-word;z-index:1}.pagefind-ui__results-area{width:100%}.pagefind-ui__results{padding-left:20px}.pagefind-ui__result{margin-bottom:10px;vertical-align:top}.pagefind-ui__result-thumb{display:flex;flex-direction:column}.pagefind-ui__result-thumb .pagefind-ui__result-image{max-width:150px}.pagefind-ui__message{font-weight:700;text-transform:uppercase;font-size:1rem}.pagefind-ui__button{width:100%;padding:10px;margin-top:2em}@media(min-width:920px){#search{width:auto}.pagefind-ui__search-input{width:300px}.pagefind-ui__search-clear{right:auto;left:270px}.pagefind-ui__drawer{left:-200px;height:500px;padding:15px}}body{background:url(/img/body_bg.jpg) no-repeat center 80px}a.ext-link .icon{background:url(/img/extlink.png) 0 50% no-repeat}
    </style>
    
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br />Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI" />
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox" />
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="wiki flex-column">
  <div class="breadcrumbs-nav flex-row">
    <a href="/" class="breadcrumbs-nav-first">wiki:</a>
    
      <a href="/wiki/TracUpgrade/">TracUpgrade</a>
    
  </div>
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/">Start Page</a>
      </li>
      <li>
        <a href="/wiki/TitleIndex">Index</a>
      </li>
    </ul>
  </nav>
  <div class="wiki-content">
    
<h1>Upgrade Instructions</h1><h2>Instructions</h2><p>Typically, there are seven steps involved in upgrading to a newer version of Trac:</p><h3>1. Bring your server off-line</h3><p>It is not a good idea to update a running server: the server processes may have parts of the current packages cached in memory, and updating the code will likely trigger <a href="#ZipImportError" class="ext-link"><span class="icon"></span>internal errors</a>.</p><p>Although a database backup will be implicitly created by default when upgrading the environment, it is always a good idea to perform a full backup of the environment using the <a href="/wiki/TracBackup">hotcopy</a> command before beginning.</p><h3>2. Update the Trac Code #UpdatetheTracCode</h3><p>Get the new version as described in <a href="/wiki/TracInstall">TracInstall</a>, or through your operating system package manager.</p><p>If you already an earlier version of Trac installed via <code>easy_install</code>, it might be easiest to also use <code>easy_install</code> to upgrade your Trac installation:</p><pre class="wiki">easy_install --upgrade Trac
</pre><p>You may also want to remove the pre-existing Trac code by deleting the <code>trac</code> directory from the Python <code>lib/site-packages</code> directory, or remove Trac <code>.egg</code> files from former versions.</p><p>The location of the site-packages directory depends on the operating system and the location in which Python was installed. However, the following locations are typical:</p> <ul><li>on Linux: <code>/usr/lib/python2.X/site-packages</code></li> <li>on Windows: <code>C:\\Python2.X\\lib\\site-packages</code></li> <li>on <a href="/wiki/MacOSX">MacOSX</a>: <code>/Library/Python/2.X/site-packages</code></li></ul><p>You may also want to remove the directory in which your static resources are [TracInstall#cgi-bin deployed]. The exact location depends on your platform. This cleanup is not mandatory, but makes it easier to troubleshoot issues later on, as your installation is uncluttered by code or templates from a previous release that is not used anymore. As usual, make a backup before actually removing things.</p><h3>3. Upgrade the Trac Environment #UpgradetheTracEnvironment</h3><p>Environment upgrades are not necessary for minor version releases unless otherwise noted. </p><p>After restarting, Trac should show the instances which need a manual upgrade via the automated upgrade scripts to ease the pain. These scripts are run via <a href="/wiki/TracAdmin">trac-admin</a>:</p><pre class="wiki">trac-admin /path/to/projenv upgrade
</pre><p>This command will not have any effect if the environment is already up-to-date.</p><p>Note that a backup of your database will be performed automatically prior to the upgrade. The backup will be saved in the location specified by <code>[trac]</code> <code>backup_dir</code>.</p><h3>4. Update the Trac Documentation === #UpdatetheTracDocumentation</h3><p>By default, every <a href="/wiki/TracEnvironment">Trac environment</a> includes a copy of the Trac documentation for the installed version. However, to keep the included documentation in sync with the installed version of Trac, use the following <a href="/wiki/TracAdmin">trac-admin</a> command to upgrade the documentation:</p><pre class="wiki">trac-admin /path/to/projenv wiki upgrade
</pre><p>Note that this procedure will leave your <code>WikiStart</code> page intact.</p><h3>5. Refresh static resources</h3><p>If you have configured your web server to serve static resources directly (accessed using the <code>/chrome/</code> URL) then you will need to refresh them using the [TracInstall#MappingStaticResources same command]:</p><pre class="wiki">trac-admin /path/to/env deploy /deploy/path
</pre><p>This will extract static resources and CGI scripts (<code>trac.wsgi</code>, etc) from the new Trac version and plugins into <code>/deploy/path</code>.</p><pre class="wiki">#!div style="border: 1pt dotted; margin: 1em"
**Note:** Some web browsers (IE, Opera) cache CSS and Javascript files, so you should instruct your users to manually erase the contents of their browser's cache. A forced refreshed (SHIFT + &lt;F5&gt;) should be enough.
{{{#!comment
Remove above note once #9936 is fixed.
</pre><p>}}}</p><h3>6. Steps specific to a given Trac version</h3><h4>Upgrading from Trac 1.0 to 1.2 #to1.2</h4><h5>Python 2.5 no longer supported</h5><p>Upgrade Python to at least 2.6 or 2.7, but not 3.0 or greater.</p><h5>Obsolete Plugins</h5><p>Trac has added functionality equivalent to the following plugins:</p><ul><li><a href="https://trac-hacks.org/wiki/AdminEnumListPlugin" class="ext-link"><span class="icon"></span>AdminEnumListPlugin</a></li><li><a href="https://trac-hacks.org/wiki/DateFieldPlugin" class="ext-link"><span class="icon"></span>DateFieldPlugin</a>: see the **time** [TracTicketsCustomFields#AvailableFieldTypesandOptions custom field type]</li><li><a href="https://trac-hacks.org/wiki/GroupBasedRedirectionPlugin" class="ext-link"><span class="icon"></span>GroupBasedRedirectionPlugin</a>: the default handler can set as a user preference.</li><li><a href="https://trac-hacks.org/wiki/LinenoMacro" class="ext-link"><span class="icon"></span>LinenoMacro</a>: see <a href="/wiki/WikiProcessors">WikiProcessors</a>#AvailableProcessors</li><li><a href="https://trac-hacks.org/wiki/NeverNotifyUpdaterPlugin" class="ext-link"><span class="icon"></span>NeverNotifyUpdaterPlugin</a>: see [TracNotification#notification-subscriber-section notification subscribers]</li><li><a href="https://trac-hacks.org/wiki/QueryUiAssistPlugin" class="ext-link"><span class="icon"></span>QueryUiAssistPlugin</a>: see <a href="/wiki/TracQuery">TracQuery</a>#Filters.</li><li><a href="https://trac-hacks.org/wiki/TicketCreationStatusPlugin" class="ext-link"><span class="icon"></span>TicketCreationStatusPlugin</a>: see <a href="#NewWorkflowActions" class="ext-link"><span class="icon"></span>#NewWorkflowActions</a></li></ul><p>The plugins should be removed when upgrading Trac to 1.2.</p><h5>New workflow actions #NewWorkflowActions</h5><p>The ticket creation step is controlled with a [TracWorkflow#TicketCreateAction workflow action]. The default workflow has <code>create</code> and <code>create_and_assign</code> actions. The <code>create</code> action will always be added when upgrading the database. The <code>create_and_assign</code> action will be added if the workflow has an <em>assigned</em> state. You may want to edit your workflow after upgrading the database to customize the actions available on the <em>New Ticket</em> page.</p><h5>New permissions policy for read-only wiki pages</h5><p>Since 1.1.2 the read-only attribute of wiki pages is enabled and enforced only when <code>ReadonlyWikiPolicy</code> is in the list of active permission policies. If <code>[trac] permission_policy</code> has the default value <code>DefaultPermissionPolicy, LegacyAttachmentPolicy</code>, then <code>ReadonlyWikiPolicy</code> should be automatically appended to the list when upgrading the environment:</p><pre class="wiki">[trac]
permission_policies = ReadonlyWikiPolicy,
 DefaultPermissionPolicy,
 LegacyAttachmentPolicy
</pre><p>If other permission policies are enabled, <code>trac.ini</code> will need to have <code>ReadonlyWikiPolicy</code> appended to the list of active <code>permission_policies</code>. See <a href="/wiki/TracFineGrainedPermissions">TracFineGrainedPermissions</a>#ReadonlyWikiPolicy for additional details on the proper ordering.</p><h5>Navigation Ordering Moved</h5><p>The mainnav and metanav configuration ordering have</p><p>been moved from <code>[trac]</code> <code>mainnav</code> and <code>[trac]</code> <code>metanav</code> to the <code>[mainnav]</code> and <code>[metanav]</code> sections. The ordering is now specified using the <code>order</code> attribute as described in [TracNavigation#nav-order <a href="/wiki/TracNavigation">TracNavigation</a>].</p><p>The new configuration values will be written to trac.ini on upgrade, preserving the navigation order for the environment. You may need to edit trac.ini</p><p>if you use a shared [TracIni#GlobalConfiguration global configuration].</p><p>For example, if you wish to specify the navigation ordering for several environments in <code>global.ini</code>, you'll</p><p>need to add the <code>[mainnav]</code> and <code>[metanav]</code> sections</p><p>in that file and delete those sections from each</p><p>environment's trac.ini.</p><h4>Upgrading from Trac 0.12 to Trac 1.0 #to1.0</h4><h5>Python 2.4 no longer supported</h5><p>Upgrade Python to at least 2.5, but not 3.0.</p><h5>Obsolete Plugins</h5><p>Trac has added functionality equivalent to the following plugins:</p><ul><li><a href="https://trac-hacks.org/wiki/BatchModifyPlugin" class="ext-link"><span class="icon"></span>BatchModifyPlugin</a></li><li><a href="https://trac-hacks.org/wiki/GitPlugin" class="ext-link"><span class="icon"></span>GitPlugin</a></li><li><a href="https://trac-hacks.org/wiki/OverrideEditPlugin" class="ext-link"><span class="icon"></span>OverrideEditPlugin</a></li></ul><p>The plugins should be removed when upgrading Trac to 1.0.</p><h5>Subversion components not enabled by default for new installations</h5><p>The Trac components for Subversion support are no longer enabled by default. To enable the svn support, you need to make sure the <code>tracopt.versioncontrol.svn</code> components are enabled, for example by setting the following in the <a href="/wiki/TracIni">TracIni</a>:</p><pre class="wiki">[components]
tracopt.versioncontrol.svn.* = enabled
</pre><p>The upgrade procedure should take care of this and change the <a href="/wiki/TracIni">TracIni</a> appropriately, unless you already had the svn components explicitly disabled.</p><h5>Attachments migrated to new location</h5><p>Another step in the automatic upgrade will change the way the attachments are stored. Create a backup of the <code>attachments</code> directory before upgrading. In case the <code>attachments</code> directory contains some files which are <em>not</em> attachments, the last step of the migration to the new layout will fail: the deletion of the now unused <code>attachments</code> directory can't be done if there are still files and folders in it. You may ignore this error, but better to move them elsewhere and remove the <code>attachments</code> directory manually. The attachments themselves are now all located in your environment below the <code>files/attachments</code> directory.</p><h5>Behavior of <code>[ticket] default_owner</code> changed</h5><p>Prior to 1.0, the owner field of new tickets always defaulted to <code>[ticket] default_owner</code> when the value was not empty. If the value was empty, the owner field defaulted to to the Component's owner. In 1.0 and later, the <code>default_owner</code> must be set to <code>&lt; default &gt;</code> to make new tickets default to the Component's owner. This change allows the <code>default_owner</code> to be set to an empty value if no default owner is desired.</p><h4>Upgrading from Trac 0.11 to Trac 0.12</h4><h5>Python 2.3 no longer supported</h5><p>The minimum supported version of Python is now 2.4.</p><h5>SQLite v3.x required</h5><p>SQLite v2.x is no longer supported. If you still use a Trac database of this format, you'll need to convert it to SQLite v3.x first. See <a href="https://trac.edgewall.org/intertrac/PySqlite#UpgradingSQLitefrom2.xto3.x" class="ext-link"><span class="icon"></span>PySqlite#UpgradingSQLitefrom2.xto3.x</a> for details.</p><h5><a href="https://trac.edgewall.org/intertrac/PySqlite" class="ext-link"><span class="icon"></span>PySqlite</a> 2 required</h5><p><a href="https://trac.edgewall.org/intertrac/PySqlite" class="ext-link"><span class="icon"></span>PySqlite</a> 1.1.x is no longer supported. Please install 2.5.5 or later if possible, see <a href="#Tracdatabaseupgrade" class="ext-link"><span class="icon"></span>Trac database upgrade</a> below.</p><h5>Obsolete Plugins</h5><p>Trac has added functionality equivalent to the following plugins:</p><ul><li><a href="https://trac-hacks.org/wiki/AutoQueryPlugin" class="ext-link"><span class="icon"></span>AutoQueryPlugin</a></li><li><a href="https://trac-hacks.org/wiki/AdminConsoleProviderPatch" class="ext-link"><span class="icon"></span>AdminConsoleProviderPatch</a></li><li><a href="https://trac-hacks.org/wiki/AnchorMacro" class="ext-link"><span class="icon"></span>AnchorMacro</a>: see <a href="/wiki/WikiFormatting">WikiFormatting</a>#SettingAnchors</li><li><a href="https://trac-hacks.org/wiki/TicketChangePlugin" class="ext-link"><span class="icon"></span>TicketChangePlugin</a>: see [TracPermissions#TicketSystem TICKET_EDIT_COMMENT permission]</li><li><a href="https://trac-hacks.org/wiki/TicketDeletePlugin" class="ext-link"><span class="icon"></span>TicketDeletePlugin</a>: see <code>tracopt.ticket.deleter</code></li><li><a href="https://trac-hacks.org/wiki/SubversionLocationPlugin" class="ext-link"><span class="icon"></span>SubversionLocationPlugin</a>: see <a href="/wiki/TracRepositoryAdmin">TracRepositoryAdmin</a>#Repositories</li><li><a href="https://trac-hacks.org/wiki/WikiCreoleRendererPlugin" class="ext-link"><span class="icon"></span>WikiCreoleRendererPlugin</a>: see <a href="https://trac.edgewall.org/intertrac/WikiCreole" class="ext-link"><span class="icon"></span>WikiCreole</a></li><li><a href="https://trac-hacks.org/wiki/RepoRevisionSyntaxPlugin" class="ext-link"><span class="icon"></span>RepoRevisionSyntaxPlugin</a> (added in 0.12.1)</li></ul><p>The plugins should be removed when upgrading Trac to 0.12.</p><h5>Multiple Repository Support</h5><p>The latest version includes support for multiple repositories. If you plan to add more repositories to your Trac instance, please refer to <a href="/wiki/TracRepositoryAdmin">TracRepositoryAdmin</a>#Migration.</p><p>This may be of interest to users with only one repository, since there is now a way to avoid the potentially costly resync check at every request.</p><h5>Resynchronize the Trac Environment Against the Source Code Repository</h5><p>Each <a href="/wiki/TracEnvironment">Trac environment</a> must be resynchronized against the source code repository in order to avoid errors such as "[trac:#6120 No changeset ??? in the repository]" while browsing the source through the Trac interface:</p><pre class="wiki">trac-admin /path/to/projenv repository resync '*'
</pre><h5>Improved repository synchronization</h5><p>In addition to supporting multiple repositories, there is now a more efficient method for synchronizing Trac and your repositories.</p><p>While you can keep the same synchronization as in 0.11 adding the post-commit hook as outlined in <a href="/wiki/TracRepositoryAdmin">TracRepositoryAdmin</a>#Synchronization and <a href="/wiki/TracRepositoryAdmin">TracRepositoryAdmin</a>#ExplicitSync will allow more efficient synchronization and is more or less required for multiple repositories.</p><p>Note that if you were using the <code>trac-post-commit-hook</code>, ''you're strongly advised to upgrade it'' to the new hook documented in the above references and [TracWorkflow#Howtocombinethetracopt.ticket.commit_updaterwiththetestingworkflow here], as the old hook will not work with anything else than the default repository and even for this case, it won't trigger the appropriate notifications.</p><h5>Authz permission checking</h5><p>The authz permission checking has been migrated to a fine-grained permission policy. If you use authz permissions (aka <code>[trac] authz_file</code> and <code>authz_module_name</code>), you must add <code>AuthzSourcePolicy</code> in front of your permission policies in <code>[trac] permission_policies</code>. You must also remove <code>BROWSER_VIEW</code>, <code>CHANGESET_VIEW</code>, <code>FILE_VIEW</code> and <code>LOG_VIEW</code> from your global permissions with <code>trac-admin $ENV permission remove</code> or the "Permissions" admin panel.</p><h5>Microsecond timestamps</h5><p>All timestamps in database tables, except the <code>session</code> table, have been changed from "seconds since epoch" to "microseconds since epoch" values. This change should be transparent to most users, except for custom reports. If any of your reports use date/time columns in calculations (e.g. to pass them to <code>datetime()</code>), you must divide the values retrieved from the database by 1'000'000. Similarly, if a report provides a calculated value to be displayed as a date/time (i.e. with a column named "time", "datetime", "changetime", "date", "created" or "modified"), you must provide a microsecond timestamp, that is, multiply your previous calculation with 1'000'000.</p><h4>Upgrading from Trac 0.10 to Trac 0.11</h4><h5>Site Templates and Styles</h5><p>The templating engine has changed in 0.11 to Genshi, please look at <a href="/wiki/TracInterfaceCustomization">TracInterfaceCustomization</a> for more information.</p><p>If you are using custom CSS or modified templates in the <code>templates</code> directory of the <a href="/wiki/TracEnvironment">TracEnvironment</a>, you will need to convert them to the Genshi way of doing things. To continue to use your style sheet, follow the instructions at <a href="/wiki/TracInterfaceCustomization">TracInterfaceCustomization</a>#SiteAppearance.</p><h5>Trac Macros, Plugins</h5><p>The Trac macros will need to be adapted, as the old-style wiki-macros are not supported anymore due to the drop of <a href="https://trac.edgewall.org/intertrac/ClearSilver" class="ext-link"><span class="icon"></span>ClearSilver</a> and the HDF. They need to be converted to the new-style macros, see <a href="/wiki/WikiMacros">WikiMacros</a>. When they are converted to the new style, they need to be placed into the plugins directory instead and not wiki-macros, which is no longer scanned for macros or plugins.</p><h5>For FCGI/WSGI/CGI users</h5><p>For those who run Trac under the CGI environment, run this command in order to obtain the trac.*gi file:</p><pre class="wiki">trac-admin /path/to/env deploy /deploy/directory/path
</pre><p>This will create a deploy directory with the following two subdirectories: <code>cgi-bin</code> and <code>htdocs</code>. Then update your Apache configuration file <code>httpd.conf</code> with this new <code>trac.cgi</code> location and <code>htdocs</code> location.</p><h5>Web Admin plugin integrated</h5><p>If you had the <a href="https://trac.edgewall.org/intertrac/WebAdmin" class="ext-link"><span class="icon"></span>WebAdmin</a> plugin installed, you can uninstall it as it is part of the Trac code base since 0.11.</p><h5>New Default Configurable Workflow</h5><p>When you run <code>trac-admin &lt;env&gt; upgrade</code>, your <code>trac.ini</code> will be modified to include a <code>[ticket-workflow]</code> section. The workflow configured in this case is the original workflow, so that ticket actions will behave like they did in 0.10:</p><pre class="wiki">#!Workflow width=500 height=240
leave = * -&gt; *
leave.operations = leave_status
leave.default = 1
accept = new -&gt; assigned
accept.permissions = TICKET_MODIFY
accept.operations = set_owner_to_self
resolve = new,assigned,reopened -&gt; closed
resolve.permissions = TICKET_MODIFY
resolve.operations = set_resolution
reassign = new,assigned,reopened -&gt; new
reassign.permissions = TICKET_MODIFY
reassign.operations = set_owner
reopen = closed -&gt; reopened
reopen.permissions = TICKET_CREATE
reopen.operations = del_resolution
</pre><p>There are some significant caveats in this, such as accepting a ticket sets it to 'assigned' state, and assigning a ticket sets it to 'new' state. So you will probably want to migrate to "basic" workflow; <a href="https://trac.edgewall.org/intertrac/source:branches/1.2-stable/contrib/workflow/migrate_original_to_basic.py" class="ext-link"><span class="icon"></span>contrib/workflow/migrate_original_to_basic.py</a> may be helpful. See <a href="/wiki/TracWorkflow">TracWorkflow</a> for a detailed description of the new basic workflow.</p><h3>7. Restart the Web Server #RestarttheWebServer</h3><p>If you are not running <a href="/wiki/TracCgi" class="ext-link"><span class="icon"></span>CGI</a>, reload the new Trac code by restarting your web server.</p><h2>Known Issues</h2><h3>Customized Templates</h3><p>Trac supports customization of its Genshi templates by placing copies of the templates in the <code>&lt;env&gt;/templates</code> folder of your <a href="/wiki/TracEnvironment">environment</a> or in a common location specified in the [[TracIni#GlobalConfiguration| [inherit] templates_dir]] configuration setting. If you choose to do so, be aware that you will need to repeat your changes manually on a copy of the new templates when you upgrade to a new release of Trac (even a minor one), as the templates will likely evolve. So keep a diff around.</p><p>The preferred way to perform <a href="/wiki/TracInterfaceCustomization">TracInterfaceCustomization</a> is to write a custom plugin doing an appropriate <code>ITemplateStreamFilter</code> transformation, as this is more robust in case of changes: we usually won't modify an element <code>id</code> or change its CSS <code>class</code>, and if we have to do so, this will be documented in the <a href="https://trac.edgewall.org/intertrac/TracDev/ApiChanges" class="ext-link"><span class="icon"></span>TracDev/ApiChanges</a> pages.</p><h3>ZipImportError</h3><p>Due to internal caching of zipped packages, whenever the content of the packages change on disk, the in-memory zip index will no longer match and you'll get irrecoverable ZipImportError errors. Better anticipate and bring your server down for maintenance before upgrading.</p><p>See <a href="https://trac.edgewall.org/ticket/7014" class="ext-link"><span class="icon"></span>7014</a> for details.</p><h3>Wiki Upgrade</h3><p><code>trac-admin</code> will not delete or remove default wiki pages that were present in a previous version but are no longer in the new version.</p><h3>Trac database upgrade</h3><p>A known issue in some versions of <a href="https://trac.edgewall.org/intertrac/PySqlite" class="ext-link"><span class="icon"></span>PySqlite</a> (2.5.2-2.5.4) prevents the trac-admin upgrade script from successfully upgrading the database format. It is advised to use either a newer or older version of the sqlite python bindings to avoid this error. For more details see ticket <a href="https://trac.edgewall.org/ticket/9434" class="ext-link"><span class="icon"></span>9434</a>.</p><h3>Parent dir</h3><p>If you use a Trac parent env configuration and one of the plugins in one child does not work, none of the children will work.</p><h2>Related topics</h2><h3>Upgrading Python</h3><p>Upgrading Python to a newer version will require reinstallation of Python packages: Trac itself of course, but also <a href="https://pypi.org/project/setuptools" class="ext-link"><span class="icon"></span>easy_install</a>, if you've been using that. If you are using Subversion, you'll also need to upgrade the Python bindings for svn.</p><h4>Windows and Python 2.6</h4><p>If you've been using CollabNet's Subversion package, you may need to uninstall that in favor of <a href="https://alagazam.net/" class="ext-link"><span class="icon"></span>Alagazam</a>, which has the Python bindings readily available, see <a href="https://trac.edgewall.org/intertrac/TracSubversion" class="ext-link"><span class="icon"></span>TracSubversion</a>. That package works without tweaking.</p><h3>Changing Database Backend</h3><p>The <a href="https://trac-hacks.org/wiki/TracMigratePlugin" class="ext-link"><span class="icon"></span>TracMigratePlugin</a> on <a href="https://trac-hacks.org" class="ext-link"><span class="icon"></span>trac-hacks.org</a> has been written to assist in migrating between SQLite, <a href="/wiki/MySQL">MySQL</a> and <a href="/wiki/PostgreSQL">PostgreSQL</a> databases.</p><h3>Upgrading from older versions of Trac #OlderVersions</h3><p>For upgrades from versions older than Trac 0.10, refer first to <a href="https://trac.edgewall.org/intertrac/wiki:0.10/TracUpgrade#SpecificVersions" class="ext-link"><span class="icon"></span>wiki:0.10/TracUpgrade#SpecificVersions</a>.</p><p><hr /></p><p>See also: <a href="/wiki/TracGuide">TracGuide</a>, <a href="/wiki/TracInstall">TracInstall</a></p>

  </div>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2023
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
    <script>
      window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({
          element: "#search",
          showImages: false,
          translations: {
            placeholder: 'Search tickets',
            zero_results: 'No matches found.'
          }
        })
      })
    </script>
  </body>
</html>
