<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">TracEnvironment</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/yIpytWuWSz.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="wiki flex-column">
  <div class="breadcrumbs-nav flex-row">
    <a href="/" class="breadcrumbs-nav-first">wiki:</a>
    
      <a href="/wiki/TracEnvironment/">TracEnvironment</a>
    
  </div>
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/">Start Page</a>
      </li>
      <li>
        <a href="/wiki/TitleIndex">Index</a>
      </li>
    </ul>
  </nav>
  <div class="wiki-content">
    
<h1>The Trac Environment</h1><p>Trac uses a directory structure and a database for storing project data. The directory is referred to as the <strong>environment</strong>.</p><p>Trac supports <a href="https://www.sqlite.org/" class="ext-link"><span class="icon"></span>SQLite</a>, <a href="https://www.postgresql.org/" class="ext-link"><span class="icon"></span>PostgreSQL</a> and <a href="https://www.mysql.com/" class="ext-link"><span class="icon"></span>MySQL</a> databases. With <a href="/wiki/PostgreSQL">PostgreSQL</a> and <a href="/wiki/MySQL">MySQL</a> you have to create the database before running <code>trac-admin initenv</code>.</p><h2>Creating an Environment</h2><p>A new Trac environment is created using the [TracAdmin#initenv initenv] command:</p><pre class="wiki">$ trac-admin /path/to/myproject initenv
</pre><p><code>trac-admin</code> will ask you for the name of the project and the <a href="#DatabaseConnectionStrings" class="ext-link"><span class="icon"></span>database connection string</a>.</p><h3>Useful Tips</h3> <ul><li>Place your environment's directory on a filesystem which supports sub-second timestamps, as Trac monitors the timestamp of its configuration files and changes happening on a filesystem with too coarse-grained timestamp resolution may go undetected in Trac &lt; 1.0.2. This is also true for the location of authentication files when using <a href="/wiki/TracStandalone">TracStandalone</a>.</li></ul> <ul><li>The user under which the web server runs will require file system write permission to the environment directory and all the files inside. Please remember to set the appropriate permissions. The same applies to the source code repository, although the user under which Trac runs will only require write access to a Subversion repository created with the BDB file system; for other repository types, check the corresponding plugin's documentation. </li></ul> <ul><li><code>initenv</code> does not create a version control repository for the specified path. If you wish to specify a default repository using the optional arguments to <code>initenv</code> you must create the repository first, otherwise you will see a message when initializing the environment: <em>Warning: couldn't index the default repository</em>.</li></ul> <ul><li>Non-ascii environment paths are not supported.</li></ul> <ul><li><a href="/wiki/TracPlugins">TracPlugins</a> located in a [TracIni#inherit-plugins_dir-option shared plugins directory] that is defined in an [TracIni#GlobalConfiguration inherited configuration] are not enabled by default, in contrast to plugins in the environment <code>plugins</code> directory. Hence, if they need to create extra tables, for example, the tables will not be created during environment creation and you'll need to [TracUpgrade#UpgradetheTracEnvironment upgrade the environment]. Alternatively you can avoid the need to upgrade the environment by explicitly enabling the plugin in the inherited configuration, or in a configuration file using the <code>--config</code> option. See <a href="/wiki/TracAdmin">TracAdmin</a>#FullCommandReference for more information.</li></ul><pre class="wiki">#!div style="border: 1pt dotted; margin: 1em;"
**Caveat:** don't confuse the //Trac environment directory// with the //source code repository directory//.

This is a common beginners' mistake.
It happens that the structure for a Trac environment is loosely modeled after the Subversion repository directory structure, but those are two disjoint entities and they are not and //must not// be located at the same place.
</pre><h2>Database Connection Strings</h2><p>You will need to specify a database connection string at the time the environment is created. The default is SQLite, which is sufficient for most projects. The SQLite database file is stored in the environment directory, and can easily be <a href="/wiki/TracBackup" class="ext-link"><span class="icon"></span>backed up</a> together with the rest of the environment.</p><p>Note that if the username or password of the connection string (if applicable) contains the <code>:</code>, <code>/</code> or <code>@</code> characters, they need to be <a href="https://meyerweb.com/eric/tools/dencoder/" class="ext-link"><span class="icon"></span>URL encoded</a>.</p><pre class="wiki">$ python -c "import urllib; print urllib.quote('password@:/123', '')"
password%40%3A%2F123
</pre><h3>SQLite Connection String</h3><p>The connection string for an SQLite database is:</p><pre class="wiki">
sqlite:db/trac.db
</pre><p>where <code>db/trac.db</code> is the path to the database file within the Trac environment.</p><p>See <a href="https://trac.edgewall.org/intertrac/DatabaseBackend#SQLite" class="ext-link"><span class="icon"></span>DatabaseBackend#SQLite</a> for more information.</p><h3><a href="/wiki/PostgreSQL">PostgreSQL</a> Connection String</h3><p>The connection string for <a href="/wiki/PostgreSQL">PostgreSQL</a> is a bit more complex. For example, to connect to a <a href="/wiki/PostgreSQL">PostgreSQL</a> database named <code>trac</code> on <code>localhost</code> for user <code>johndoe</code> and password <code>letmein</code>, use:</p><pre class="wiki">
postgres://johndoe:letmein@localhost/trac
</pre><p>If <a href="/wiki/PostgreSQL">PostgreSQL</a> is running on a non-standard port, for example 9342, use:</p><pre class="wiki">
postgres://johndoe:letmein@localhost:9342/trac
</pre><p>On UNIX, you might want to select a UNIX socket for the transport, either the default socket as defined by the PGHOST environment variable:</p><pre class="wiki">
postgres://user:password@/database
</pre><p>or a specific one:</p><pre class="wiki">
postgres://user:password@/database?host=/path/to/socket/dir
</pre><p>See the <a href="https://www.postgresql.org/docs/" class="ext-link"><span class="icon"></span>PostgreSQL documentation</a> for detailed instructions on how to administer <a href="https://www.postgresql.org/" class="ext-link"><span class="icon"></span>PostgreSQL</a>.</p><p>Generally, the following is sufficient to create a database user named <code>tracuser</code> and a database named <code>trac</code>:</p><pre class="wiki">$ createuser -U postgres -E -P tracuser
$ createdb -U postgres -O tracuser -E UTF8 trac
</pre><p>When running <code>createuser</code> you will be prompted for the password for the <code>tracuser</code>. This new user will not be a superuser, will not be allowed to create other databases and will not be allowed to create other roles. These privileges are not needed to run a Trac instance. If no password is desired for the user, simply remove the <code>-P</code> and <code>-E</code> options from the <code>createuser</code> command. Also note that the database should be created as UTF8. LATIN1 encoding causes errors, because of Trac's use of unicode.</p><p>Under some default configurations (Debian), run the <code>createuser</code> and <code>createdb</code> scripts as the <code>postgres</code> user:</p><pre class="wiki">$ sudo su - postgres -c 'createuser -U postgres -S -D -R -E -P tracuser'
$ sudo su - postgres -c 'createdb -U postgres -O tracuser -E UTF8 trac'
</pre><p>Trac uses the <code>public</code> schema by default, but you can specify a different schema in the connection string:</p><pre class="wiki">
postgres://user:pass@server/database?schema=yourschemaname
</pre><h3><a href="/wiki/MySQL">MySQL</a> Connection String</h3><p>The format of the <a href="/wiki/MySQL">MySQL</a> connection string is similar to <a href="/wiki/PostgreSQL">PostgreSQL</a>, with the <code>postgres</code> scheme being replaced by <code>mysql</code>. For example, to connect to a <a href="/wiki/MySQL">MySQL</a> database on <code>localhost</code> named <code>trac</code> for user <code>johndoe</code> with password <code>letmein</code>:</p><pre class="wiki">
mysql://johndoe:letmein@localhost:3306/trac
</pre><h2>Source Code Repository</h2><p>A single environment can be connected to more than one repository. However, by default Trac is not connected to any source code repository, and the ''Browse Source'' navigation item will not be displayed.</p><p>There are several ways to connect repositories to an environment, see <a href="/wiki/TracRepositoryAdmin">TracRepositoryAdmin</a>. A single repository can be specified when the environment is created by passing the optional arguments <code>repository_type</code> and <code>repository_dir</code> to the <code>initenv</code> command.</p><h2>Directory Structure</h2><p>An environment consists of the following files and directories:</p> <ul><li><code>README</code> - Brief description of the environment.</li> <li><code>VERSION</code> - Environment version identifier.</li> <li><code>files</code></li>  <li><code>attachments</code> - Attachments to wiki pages and tickets.</li> <li><code>conf</code></li>  <li><code>trac.ini</code> - Main <a href="/wiki/TracIni">configuration file</a>.</li> <li><code>db</code></li>  <li><code>trac.db</code> - The SQLite database, if you are using SQLite.</li> <li><code>htdocs</code> - Directory containing web resources, which can be referenced in templates using the path <code>/chrome/site/...</code>.</li> <li><code>log</code> - Default directory for log files when <code>file</code> logging is enabled and a relative path is given.</li> <li><code>plugins</code> - Environment-specific <a href="/wiki/TracPlugins" class="ext-link"><span class="icon"></span>plugins</a>.</li> <li><code>templates</code> - Custom Genshi environment-specific templates.</li>  <li><code>site.html</code> - Method to [TracInterfaceCustomization#SiteAppearance customize] the site header, footer, and style.</li></ul><p></p><hr><p></p><p>See also: <a href="/wiki/TracAdmin">TracAdmin</a>, <a href="/wiki/TracBackup">TracBackup</a>, <a href="/wiki/TracIni">TracIni</a></p>

  </div>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
