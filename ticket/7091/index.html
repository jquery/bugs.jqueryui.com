<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7091 (Droppable: Allow droppables to become visible and active during drag start) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7090/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7092/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#7091</a>
      <span class="ticket-status">open</span>
      <span class="ticket-type">feature</span>
      <span class="ticket-resolution">()</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened March 09, 2011 03:37PM UTC</p>
      
      
        <p>Last modified November 04, 2012 07:39PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Droppable: Allow droppables to become visible and active during drag start</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        eleotlecram
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/2.0.0">2.0.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.droppable</td>
      
        <th>Version:</th>
      
      <td>1.8.10</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>The summary says it all.</p><p>Use Case:</p><p>Suppose you want droppables not to be displaying (display: none), until the right draggable (for which the droppable is accepting) is being dragged. The clean way to do this, is setting an activeClass on the droppables. In the CSS for this class you would set the display to 'block' (or something else than 'none'). This would then make the droppables appear. </p><p>Unfortunately, as it seems, jQuery UI Droppable won't set the activeClass to an element that is in fact in the DOM tree, except it is not displaying.</p><p>Live DEMO of the problem: <a href="http://jsbin.com/izeta3/4" class="ext-link"><span class="icon"></span>http://jsbin.com/izeta3/4</a></p><p>__</p><p>Marcel</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (9)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 10, 2011 01:47PM UTC by <span class="author">eleotlecram</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Some investigations are leading me to believe the fix is trivial, it's merely a code order issue:</p><p>Currently, the visibility and geometry of the droppables are being evaluated *before* the droppable is activated. Simply activating the droppable *before* evaluating the visibility and geometry of the droppable fixes this bug. As far as I can tell from inspecting the code (and trying it out), it yields no nasty side effects. </p><p>From a purist point of view I'm also eager to believe its more logical to have a droppable become active before evaluating visibility and or position, because these, as I've pointed out in the bug report, may change as a side effect of becoming active.</p><p>__</p><p>Marcel</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 10, 2011 03:52PM UTC by <span class="author">eleotlecram</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sent a pull request (<a href="https://github.com/jquery/jquery-ui/pull/148)" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/pull/148)</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 10, 2011 04:23PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-old">bug</span> → <span class="change-field-new">feature</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This is not a bug, it's as designed. What you want is a new hook prior to the checks.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 11, 2011 11:53AM UTC by <span class="author">eleotlecram</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>When I first looked at the current behavior (of ui.droppable) (that is, without looking at the code), I was reasoning from the way I wanted to use ui.droppable. The initial post for this ticket was made given this background. And judging from the initial post text, I'm inclined to agree with you that it's a feature, not a bug.</p><p>However, after inspection of the relevant portions of the code, I'm no longer entirely sure that the current behavior may be the right behavior. Even though this current behavior might be `by design' –I have no doubt, judging from the code (which is very readable), that every portion of the code is well thought-out–, it is very possible that this design needs slight updating.</p><p>Call it a bug or not, I feel that the current design caches the wrong state (be it visibility, or geometry).</p><p>Even though the ticket was started for the visibility aspect of the design, it may be more obvious to show that the design fails if we focus on the geometry aspect. To show this, let's give an example of perfectly legal use of jQuery and CSS for which the current design fails:</p><p>1. If we assume that one of the ways CSS can be used, is to change the size (i.e. width or height) of a DOM element.</p><p>2. If we assume that for a droppable one can specify the `activeClass', which, as documented, is added to the droppable's class attribute during drag 'n drop operations.</p><p>Then, combining propositions 1 and 2, it's possible to define an activeClass that changes the size of the droppables as soon as the droppable becomes active. (This size increase can be used to e.g. match the size of the droppable, or to have a better user experience, because it becomes easier to drop on a bigger droppable.)</p><p>Unfortunately, the current design only considers the size of the droppable that it had *prior* to receiving the activeClass. And thus it calculates all intersections, snapping etc. with the wrong geometry.</p><p>To show this in effect, see: <a href="http://jsbin.com/ahaze4" class="ext-link"><span class="icon"></span>http://jsbin.com/ahaze4</a></p><p>So, while we can call this a new feature, or a new hook. Adding something new will not fix this current behavior.</p><p>If we can agree that the current design needs some rethinking and/or tweaking here and there, then we can move on to finding a solution. I'm still investigating to find one, but it isn't so obvious as it seemed at first glance.</p><p>__</p><p>Marcel</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 11, 2011 01:18PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">UI Droppable won&#39;t set activeClass on elements in the DOM tree that are not displaying.</span> → <span class="change-field-new">Droppable: Allow droppables to become visible and active during drag start</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>What you just described is a bug, but it's quite different from what the ticket originally asked for. The bug can be fixed without changing the API and without breaking backward compatibility (and needs to be filed separately).</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 11, 2011 01:49PM UTC by <span class="author">eleotlecram</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Would you agree if I state that the actual bug is that users cannot use all css properties in an activeClass.&#92;
&#92;
Currently they are no allowed to use:&#92;
&#92;
display, width, height, top, left, bottom, right, margin, padding,...&#92;
&#92;
I don&#39;t feel like filing a bug that will allow activeClass to specify all, except for display.  I&#39;d rather file a bug for which the fix implies that there are no more (known) unallowed properties.&#92;
&#92;
__&#92;
Marcel&#92;
&#92;
PS  I just thought of more potential problems ahead: The CSS3 Transition module.</span> → <span class="change-field-new">1299851540564597</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Would you agree if I state that the actual bug is that users cannot use all css properties in an activeClass.</p><p>Currently they are not allowed to use:</p><p>display, width, height, top, left, bottom, right, margin, padding,...</p><p>I don't feel like filing a bug that will allow activeClass to specify all properties, except for 'display'.  I'd rather file a bug for which the fix implies that there are no more (known) unallowed properties.</p><p>__</p><p>Marcel</p><p>PS  I just thought of more potential problems ahead: The CSS3 Transition module.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 11, 2012 02:49PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.9.0</span> → <span class="change-field-new">2.0.0</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 04, 2012 07:08PM UTC by <span class="author">jzaefferer</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Mike et al, could you check out the jsbins here and make this a (new) bug (or not)?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 04, 2012 07:39PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There are two things at play here, from the description and the comments. The ticket summary/description is a feature request to be able to activate droppables that are hidden at the time of activation. The other is the ability to change the dimensions of a droppable via the activation. The latter should be handled by a refresh() method.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
