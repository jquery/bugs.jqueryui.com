<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7555 (autoFocus randomly deletes typed characters) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/bugs.jqueryui.com/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/bugs.jqueryui.com/favicon.svg">
<link rel="apple-touch-icon" href="/bugs.jqueryui.com/apple-touch-icon.png">
    
    
    
    
    
    
    
    <style>
      :root{--ticket-info-background-color:#ffd;--ticket-info-border-color:#dd9;--ticket-table-border-color:#eed;--ticket-date-text-color:#996;--ticket-description-title-color:#663;--ticket-changes-text-color:#663;--ticket-changes-box-shadow:#f2f2f2;--ticket-number-color:#844}.ticket-info{position:relative;background-color:var(--ticket-info-background-color);border:1px solid var(--ticket-info-border-color);border-radius:var(--border-radius);padding:.5em .75em;margin:0 auto .5em;width:100%;max-width:580px}.ticket-number{font-size:1.45rem;font-weight:700;margin-right:.5em;text-decoration:none}.ticket-number[href],.ticket-number[href]:visited{color:var(--ticket-number-color)}.ticket-info span{font-weight:700}.missing{color:var(--text-color-link-disabled)}.ticket-title{border-bottom:1px solid #bbb;margin-top:1em;padding-bottom:.25em;font-weight:700;font-size:1.1875rem}.ticket-dates{color:var(--ticket-date-text-color);font-size:.8125rem}.ticket-dates p{margin:0 0 .5em}.ticket-properties{width:100%;text-align:left;font-size:.65rem;border-top:1px solid var(--ticket-table-border-color);margin:0}.ticket-properties th{font-weight:400;width:20%}.ticket-properties td,.ticket-properties th{padding:.25em .5em;border-bottom:1px dashed var(--ticket-table-border-color)}.ticket-info-bottom{padding:.5em}.ticket-description{font-size:.8125rem;margin-top:.5em}.ticket-description h2,.ticket-description h3,.ticket-description h4,.ticket-description h5,.ticket-description h6{text-transform:uppercase;font-weight:400}.ticket-description h1{font-size:1.1rem}.ticket-description h2{font-size:1rem}.ticket-description h3{font-size:.9rem}.ticket-description h4{font-size:.8rem}.ticket-description h5{font-size:.75rem}.ticket-description h6{font-size:.7rem}.ticket-description-title{color:var(--ticket-description-title-color);font-size:.75rem}details{padding:.5em 0;font-size:.8125rem;width:100%;max-width:580px;margin:0 auto}summary{color:var(--text-color-link);font-weight:700;font-size:.875rem;text-decoration:underline;cursor:pointer;text-shadow:.04em .04em var(--text-shadow-color)}.ticket-attachments{font-size:.75em}.ticket-comment-body{width:100%;padding-top:.5em}.ticket-change{margin:1em 0;clear:both}.ticket-change-header{font-size:.875rem;font-weight:700;box-shadow:1.4px 2.8px 5.6px 0 var(--ticket-changes-box-shadow)}.ticket-change-link{font-size:.85em}.ticket-change-content{width:100%}.ticket-changes{background-color:var(--ticket-info-background-color);border:1px solid var(--ticket-info-border-color);border-radius:var(--border-radius);color:var(--ticket-changes-text-color);font-size:.7rem;float:right;clear:right;margin:2em 0 1em 1.5em}.ticket-changes th{text-align:right;font-weight:400;text-transform:capitalize}.ticket-changes td,.ticket-changes th{padding:.25em;vertical-align:baseline}.ticket-changes .change-field-new{font-weight:700}:root{--font-family:'Arial','Helvetica','Verdana','sans-serif';--font-family-header:var(--font-family);--font-family-alternate:Verdana,Arial,'Bitstream Vera Sans',Helvetica,sans-serif;--font-family-monospace:Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace}:root{--primary-color:#000000;--secondary-color:#ff9c08;--text-color:#222;--text-color-dark-bg:#fff;--text-color-link:#bb0000;--text-color-link-hover:#f00000;--text-color-link-active:#ff2424;--text-color-link-visited:#cc0000;--text-color-link-disabled:#998;--main-link-hover-bg-color:#eee;--text-shadow-color:#fcfcfc;--button-color:var(--secondary-color);--button-hover-color:#a36200;--button-text-color:#fff;--background-color:#5f5f5f;--main-background-start-color:#1a1a1a;--main-background-end-color:var(--background-color);--top-nav-hover-start-color:#414240;--top-nav-hover-mid-color:#323530;--top-nav-hover-end-color:#292b28;--nav-background-color:var(--primary-color);--secondary-nav-start-color:#2d2d2d;--secondary-nav-end-color:#060606;--secondary-nav-box-shadow:#313131;--content-background-color:#fafafa;--banner-background-color:var(--primary-color);--footer-background-start-color:#000000;--footer-background-end-color:#141400;--footer-text-color-link:#bbb;--nav-text-link-color:white;--nav-hover-link-color:rgba(255, 255, 255, 0.2);--border-color:#e4e4e4;--border-radius:6px;--input-border-color:white;--blockquote-border-color:#b44;--pre-color:#333;--pre-background-color:#fff;--code-color:#600;--code-background-color:var(--content-background-color);--syntax-tab-size:2}*{box-sizing:border-box}body,html{padding:0;margin:0 auto;font-family:var(--font-family);font-size:100%;color:var(--text-color);line-height:1.4}html{overflow-y:auto;background-color:var(--background-color)}html:before{content:'';position:absolute;top:80px;left:0;right:0;height:900px;background:linear-gradient(to bottom,var(--main-background-start-color),var(--main-background-start-color) 25%,var(--main-background-end-color));z-index:-1}.banner{width:100%;height:80px;background-color:var(--banner-background-color);color:#fff;box-shadow:0 2px 5px rgba(0,0,0,.2);text-align:center;font-size:.875rem;padding:0 .25em}.banner a[href],.banner a[href]:visited{color:#5cb5f0}.banner a[href]:hover{color:var(--text-color-link-hover)}.banner a[href]:active{color:var(--text-color-link-active)}th,tr{font-family:var(--font-family-alternate)}.container{width:100%;max-width:956px;margin:0 auto;overflow:hidden}h1,h2,h3,h4,h5,h6{font-family:var(--font-family-header);font-weight:400;margin:0;padding:0;letter-spacing:0}h1,h2,h3,h4{letter-spacing:-.018em}h1{font-size:1.25rem;font-weight:700}h2{font-size:1rem;font-weight:700}.visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}p{line-height:1.5;margin:.5em 0 1em}p:last-child{margin-bottom:0}ul{margin:0}li{line-height:1.5}hr{width:100%}blockquote{margin:-.3em 0 0 0;border-style:solid;border-width:0 0 0 2px;padding-left:.4em;border-color:var(--blockquote-border-color)}a[href]{color:var(--text-color-link)}a[href]:visited{color:var(--text-color-link-visited)}a[href]:hover{color:var(--text-color-link-hover)}a[href]:active{color:var(--text-color-link-active)}a[aria-disabled=true]{color:var(--text-color-link-disabled)}main{padding:1rem}table{margin:1em 0}table td,table th{padding-right:1em}code,pre{font-family:var(--font-family-monospace)}pre:not([class*=language-]){margin:.5em 0;-moz-tab-size:var(--syntax-tab-size);-o-tab-size:var(--syntax-tab-size);tab-size:var(--syntax-tab-size);-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;width:100%;padding:.25em;font-size:.6875rem;border-radius:var(--border-radius);overflow-x:auto;background:var(--pre-background-color);color:var(--pre-color);border:1px solid #000;text-align:left}code{color:var(--code-color);border:1px solid var(--border-color);border-radius:.25em;padding:0 .3em;background:var(--code-background-color);word-break:break-all}pre[class*=language-] code{color:unset;border:none;border-radius:0;padding:0;background:0 0;word-break:normal}.strikethrough{text-decoration:line-through}header{position:relative;height:95px;display:flex;flex-wrap:wrap;padding:0 1em}.nav{display:flex;flex-direction:column;padding:0;list-style:none}.nav a{display:flex;align-items:center;height:35px;font-size:.75rem;padding:0 1em;text-decoration:none;border-bottom:2px solid transparent;white-space:nowrap;width:100%}.nav li:not(.active) a:active,.nav li:not(.active) a:hover{background-color:var(--nav-hover-link-color);border-bottom-color:var(--secondary-color)}.nav a,.nav a:active,.nav a:hover,.nav a:visited{color:var(--nav-text-link-color)}.nav a:active{background:linear-gradient(to bottom,var(--secondary-nav-end-color),var(--secondary-nav-start-color))}.nav .active a{border-bottom-color:var(--secondary-color)}#jq-siteLogo{margin-top:1em}#jq-primaryNavigation{padding:0 .5em;background-color:var(--nav-background-color)}#jq-secondaryNavigation{padding:0 .5em;background:linear-gradient(to bottom,var(--secondary-nav-start-color),var(--secondary-nav-end-color));box-shadow:0 -2px 1px var(--secondary-nav-box-shadow),0 2px 1px #000}#jq-secondaryNavigation a{font-size:.8125rem}#jq-content{position:relative;width:100%}.content-nav{font-size:.8125rem;margin:1.2em 0;align-self:flex-end}.content-nav ul{list-style:none}.content-nav li{padding:0 .75em}.content-nav li:not(:last-of-type){border-right:1px solid var(--border-color)}.hamburger-lines{position:relative;width:18px;height:14px;align-self:center}.hamburger-line{width:100%;height:2px;background-color:#fff;transition:opacity .2s ease-in-out,transform .2s ease-in-out}.hamburger-toggle:checked+.hamburger-lines span:first-of-type{transform:rotateZ(45deg) translate(4px,4.5px) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:nth-of-type(2){transform:rotateZ(135deg) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:last-of-type{transform:translateY(-8px) scale(0);opacity:0}.hamburger-toggle:checked~#jq-menus{transform:none;opacity:1}form{gap:.5em}label{font-style:italic;font-size:.8125rem;font-weight:700}input{border:1px solid var(--input-border-color);border-radius:var(--border-radius);height:25px;padding:0 .5em;color:var(--text-color)}button{display:block;border:0;padding:5px 10px;border-radius:var(--border-radius);background:var(--button-color);color:var(--button-text-color);font-size:.875rem;cursor:pointer}button:active,button:hover{background-color:var(--button-hover-color)}button:active{box-shadow:inset 0 0 5px #000}main{padding:1em;gap:1em}main a[href]:active,main a[href]:hover{background-color:var(--main-link-hover-bg-color)}#jq-topnav{gap:.25em}#jq-topnav a{width:100%;display:block;font-family:var(--font-family-alternate);font-size:.625rem;padding:.1em 1.5em;text-decoration:none;border:2px solid var(--border-color);color:#000;box-shadow:0 1px 2px rgba(0,0,0,.5);text-align:center;border-radius:var(--border-radius)}#jq-topnav a:active,#jq-topnav a:hover{color:#fff;border-color:var(--top-nav-hover-end-color)}#jq-topnav a:hover{background:linear-gradient(to bottom,var(--top-nav-hover-start-color),var(--top-nav-hover-mid-color) 50%,var(--top-nav-hover-end-color) 50%,var(--top-nav-hover-end-color))}#jq-topnav a:active{background:linear-gradient(to bottom,var(--top-nav-hover-end-color),var(--top-nav-hover-end-color) 50%,var(--top-nav-hover-mid-color) 50%,var(--top-nav-hover-start-color))}footer{background-color:var(--nav-background-color);background:var(--nav-background-color) linear-gradient(to bottom,var(--footer-background-start-color),var(--footer-background-end-color));padding:2em;margin-bottom:2em;color:var(--text-color-dark-bg);border:2px solid transparent;border-top:0;border-radius:0 0 var(--border-radius) var(--border-radius)}footer a[href],footer a[href]:visited{color:var(--footer-text-color-link)}footer a[href]:active,footer a[href]:hover{background-color:var(--main-link-hover-bg-color);color:#000}.flex-row{display:flex;flex-direction:row}.flex-column{display:flex;flex-direction:column}.flex-between-start{justify-content:space-between;align-items:flex-start}.flex-between-center{justify-content:space-between;align-items:center}.flex-start-center{justify-content:flex-start;align-items:center}.flex-end-center{justify-content:flex-end;align-items:center}.flex-center{display:flex;justify-content:center;align-items:center}.items-start{align-items:start}.white-box{background-color:var(--content-background-color);border:1px solid var(--border-color)}a.ext-link .icon{padding-left:15px}@media (max-width:919px){#jq-menus{position:absolute;top:95px;height:calc(100vh - 95px);left:0;right:0;background-color:var(--nav-background-color);z-index:1;transition:transform .2s ease-in-out,opacity .2s ease-in-out;transform:translateX(100%);opacity:0;display:flex;flex-direction:column-reverse;justify-content:flex-end}}@media (min-width:920px){html:before{top:60px}body{background-position-y:60px}.banner{height:60px;font-size:1rem}header{height:125px;padding:0 0 0 2em}#jq-topnav{flex-direction:row;align-self:flex-end;gap:0}#jq-topnav a{width:auto;border-radius:0}#jq-topnav a:first-of-type{border-radius:var(--border-radius) 0 0 var(--border-radius)}#jq-topnav a:last-of-type{border-radius:0 var(--border-radius) var(--border-radius) 0}.nav{flex-direction:row}.nav a{width:auto}#jq-primaryNavigation a{height:27px;align-self:flex-end}#jq-secondaryNavigation{border-radius:var(--border-radius);margin-top:2em}#jq-siteLogo{align-self:flex-end}main{flex-grow:1;min-height:520px;font-size:.75rem}.hamburger-lines{display:none}.content-nav{margin-top:.4em}}:root{--pagefind-ui-background-color:#fff}#search{width:100%;position:relative;min-height:25px}.pagefind-ui__search-input{width:100%;border:1px solid var(--border-color)}.pagefind-ui__search-clear{display:inline-block;position:absolute;width:25px;height:25px;right:15px;top:0;padding:0 0 0 25px;overflow:hidden;background-color:transparent;z-index:1}.pagefind-ui__search-clear:active,.pagefind-ui__search-clear:hover{background-color:rgba(0,0,0,.2)}.pagefind-ui__search-clear:after{content:'×';position:absolute;top:0;left:0;right:0;bottom:0;font-weight:700;font-size:1.5rem;line-height:26px;text-align:center;color:var(--text-color);opacity:1}.pagefind-ui__hidden{display:none}.pagefind-ui__suppressed{display:none}.pagefind-ui__drawer{position:absolute;top:100%;left:0;right:0;height:350px;background-color:var(--pagefind-ui-background-color);border:1px solid var(--border-color);border-top:0;border-radius:0 0 var(--border-radius) var(--border-radius);box-shadow:0 2px 4px rgba(0,0,0,.2);padding:10px;color:var(--text-color);font-size:.875rem;overflow-y:auto;word-break:break-word;z-index:1}.pagefind-ui__results-area{width:100%}.pagefind-ui__results{padding-left:20px}.pagefind-ui__result{margin-bottom:10px;vertical-align:top}.pagefind-ui__result-thumb{display:flex;flex-direction:column}.pagefind-ui__result-thumb .pagefind-ui__result-image{max-width:150px}.pagefind-ui__message{font-weight:700;text-transform:uppercase;font-size:1rem}.pagefind-ui__button{width:100%;padding:10px;margin-top:2em}@media(min-width:920px){#search{width:auto}.pagefind-ui__search-input{width:300px}.pagefind-ui__search-clear{right:auto;left:270px}.pagefind-ui__drawer{left:-200px;height:500px;padding:15px}}body{background:url(/bugs.jqueryui.com/img/body_bg.jpg) no-repeat center 80px}a.ext-link .icon{background:url(/bugs.jqueryui.com/img/extlink.png) 0 50% no-repeat}
    </style>
    
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/bugs.jqueryui.com/" title="jQuery UI Bugs Home">
            <img src="/bugs.jqueryui.com/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/bugs.jqueryui.com/newticket">New Ticket</a>
          <a href="/bugs.jqueryui.com/report">View Tickets</a>
          <a href="/bugs.jqueryui.com/ticketgraph">Ticket Graph</a>
          <a href="/bugs.jqueryui.com/roadmap">Roadmap</a>
          <a href="/bugs.jqueryui.com/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/bugs.jqueryui.com/ticket/7554/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/bugs.jqueryui.com/ticket/7556/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="." class="ticket-number">#7555</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened July 17, 2011 08:00AM UTC</p>
      
        <p>Closed December 03, 2012 08:19PM UTC</p>
      
      
        <p>Last modified December 13, 2012 01:55PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">autoFocus randomly deletes typed characters</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        feklee
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/bugs.jqueryui.com/milestone/1.9.0">1.9.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.autocomplete</td>
      
        <th>Version:</th>
      
      <td>1.8.14</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>How I experienced the problem:</p><p>1. Opened one of: IE8, Chrome 13.0, Opera 11.50 on <a href="/bugs.jqueryui.com/wiki/WinXP">WinXP</a>/32</p><p>2. Went to: <a href="http://jsbin.com/imowet" class="ext-link"><span class="icon"></span>http://jsbin.com/imowet</a></p><p>3. Quickly typed into the input field: "java". In the input field, I saw: "j", "ja", "jav", "jaa". Notice that the "v" got deleted.</p><p>Notes:</p><ul><li>Disabling "autoFocus" makes the problem go away.</li></ul><ul><li>You may want to adjust the delay and timeout. However, I was able to reproduce the problem with pretty much any combination I tried.</li></ul><p>See also: <a href="http://forum.jquery.com/topic/autocomplete-ie7-backspace-issue#14737000002558270" class="ext-link"><span class="icon"></span>http://forum.jquery.com/topic/autocomplete-ie7-backspace-issue#14737000002558270</a></p><p>Affected jQuery UI version: 1.8.14 (with jQuery 1.6.2)</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (28)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 02, 2011 09:54PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/bugs.jqueryui.com/ticket/7597">#7597</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 02, 2011 10:01PM UTC by <span class="author">sexconker</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Was searching high and low for this problem last week, and decided to file a bug report today.</p><p>Somehow I didn't land upon this page, so I ended up making that dupe.</p><p>Good to see it's not just us.</p><p>We also noticed the effect happening less frequently with higher delays, but it would still happen.</p><p>The easiest way to reproduce it is to type a string in, then backspace through it (individual key presses, not holding backspace).</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 23, 2011 04:04PM UTC by <span class="author">carl@stonefintech.com</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Found this workaround that seems to be working for me - modify the "$( ".ui-autocomplete-input" ).live( "autocompleteopen", function()" function at the very end of jQuery-ui-1.8.11.js as found here:</p><p><a href="https://github.com/davemyers/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.selectFirst.js" class="ext-link"><span class="icon"></span>https://github.com/davemyers/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.selectFirst.js</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 18, 2011 07:07AM UTC by <span class="author">jbergenthal</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've found menu.blur is the problem. It is meant to put the old value when the user presses ESC.</p><p>However, menu.blur gets also called every time new data comes from the server.</p><p>So in the sequence: request-new-data, user-types-something, data-response</p><p>menu.blur sets the old value and what the user typed is lost.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 18, 2011 03:09PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks @jbergenthal. I actually removed this code the other day, so this should be fixed. We've had a lot of trouble reproducing this bug (though we've seen it so we know it's valid). If you've been able to reliably reproduce this, can you test against master and verify that it's fixed now?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 18, 2011 03:23PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I was able to confirm. Thanks again jbergenthal!</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 18, 2011 03:23PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fixed in ea19645c20b79aea8afbc95999a51b4923a0b14b.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 18, 2012 05:36PM UTC by <span class="author">huemorgan</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">&#39;&#39;&#39;The problem is not fixed.&#39;&#39;&#39; and I can reproduce it,&#92;
I changed the JSbin example above a bit and was able to reproduce it easily&#92;
http://jsbin.com/akalon/5/edit#preview - instructions inside&#92;
&#92;
&#92;
I&#39;m using jquery-ui 1..8.16, jquery 1.7.1&#92;
but it&#39;s not working in the example with 1.8.14 and jquery 1.6.2 as well&#92;
on chrome 17.0.963.79 - not that it matters ;)&#92;
&#92;
the problem exist when autoFocus=true delay&gt;=50 ms&#92;
if i set delay=0 there is no problem.&#92;
&#92;
the bug is the same - deleting characters randomly when a response comes back.</span> → <span class="change-field-new">1332092275970069</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p><strong>The problem is not fixed.</strong> and I can reproduce it,</p><p>I changed the JSbin example above a bit and was able to reproduce it easily</p><p><a href="http://jsbin.com/akalon/5/edit#preview" class="ext-link"><span class="icon"></span>http://jsbin.com/akalon/5/edit#preview</a> - instructions inside</p><p>I'm using jquery-ui 1..8.16, jquery 1.7.1</p><p>but it's not working in the example with 1.8.14 and jquery 1.6.2 as well</p><p>on chrome 17.0.963.79 - not that it matters ;)</p><p>the problem exist when autoFocus=true delay&gt;=50 ms</p><p>if i set delay=0 there is no problem.</p><p>the bug is the same - deleting characters randomly when a response comes back.</p><p>Please help - nothing would please me more then fixing this horrible bug</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 18, 2012 06:47PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@huemorgan. This *is* fixed.  Note the milestone of 1.9, the fix does not exist in 1.8.16, so it's obviously still broken there.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 19, 2012 09:17AM UTC by <span class="author">NielsJanssen</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm running into the same issue. Is it possible for this fix to be merged into 1.8.19? As it seems to be a relatively minor fix for a problem which is causing me quite a headache.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 19, 2012 11:58AM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Feel free to send a pull request.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 18, 2012 09:01AM UTC by <span class="author">ninjaxify</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hey Folks,</p><p>I am using the latest version of <a href="/bugs.jqueryui.com/wiki/JqueryUI">JqueryUI</a>(1.8.23) and this issue is still there.</p><p>This is driving me up the wall, given that the basic experience of typing text in my autocomplete active text box is not working! </p><p>If this bug is fixed, can I get a patch for this? This bugs is preventing me from using autocomplete on my production system, and a patch would be really helpful!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 20, 2012 04:34PM UTC by <span class="author">sexconker</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:12 ninjaxify]:</p><blockquote> Hey Folks,  I am using the latest version of <a href="/bugs.jqueryui.com/wiki/JqueryUI">JqueryUI</a>(1.8.23) and this issue is still there.  This is driving me up the wall, given that the basic experience of typing text in my autocomplete active text box is not working!   If this bug is fixed, can I get a patch for this? This bugs is preventing me from using autocomplete on my production system, and a patch would be really helpful! </blockquote><p>See <a href="http://bugs.jqueryui.com/ticket/8234" class="ext-link"><span class="icon"></span>http://bugs.jqueryui.com/ticket/8234</a> .</p><p>The race condition exists if you're using a custom source and jQueryUI 1.8.18 or earlier , though I haven't tested with 1.8.19 to verify that it's fixed.</p><p>We're still using 1.8.18 in some places and we just use the following:</p><pre class="wiki">
source: function( request, response ) {
	$("#autocompleteInput").data('rIndex', $("#autocompleteInput").data('rIndex') + 1);

	if ( this.xhr )
		this.xhr.abort();

	this.xhr = 								

	$.ajax({
		url: "your_ajax_url",
		data: {
			data1: 1,
			data2: 2
		},

		context: {
			autocompleteRequest: $("#autocompleteInput").data('rIndex')
		},											
		
		success: function( data ) {
			if ( this.autocompleteRequest === $("#autocompleteInput").data('rIndex') ) {
				response( jQuery.map(data.split("|"), function(n, i) {
					return {
						label: n,
						value: n
					};
				}));
			}
		}
	});
},
</pre><p>We just add a request counter (rIndex) whenever source fires, and abort any existing requests.  Then we do our new request as usual, and then on success we verify that our request index is equal to the expected value.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 17, 2012 11:16PM UTC by <span class="author">Syryos</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This is still an annoying bug and needs a fix.</p><p>Observed in jquery 1.8.2 and jquery-ui 1.9.1</p><p>Please reopen !</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 19, 2012 02:02AM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@Syryos I cannot create this using the example originally provided using 1.9.1 - <a href="http://jsbin.com/imowet/9/edit." class="ext-link"><span class="icon"></span>http://jsbin.com/imowet/9/edit.</a></p><p>If this is still a problem and you would like us to look into this we'll need a reduced test case showing the issue.  To get you started, use this boilerplate: <a href="http://jsfiddle.net/ZgAqH/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/ZgAqH/</a> Open the link and click to "Fork" (in the top menu) to get started.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 22, 2012 10:16AM UTC by <span class="author">Syryos</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">I made a further analysis, conclusion so far is:&#92;
&#92;
When the suggestions-callback is triggered, but a certain result is not available&#92;
&#92;
for example&#92;
&#92;
- when a single server JSON response(*) is incorrect JSON format, for example missing closing bracket&#92;
- when the server response is too slow (while the user still types in the #input field&#92;
&#92;
the Return key submits or tries to submit the broken or incorrect &quot;focus&quot; result.&#92;
&#92;
(*) with this is mean this reproducible test scenario when the server response ist correct for &quot;j&quot;, &quot;ja&quot;, &quot;java&quot;, &quot;javas&quot; but is broken for &quot;jav&quot; [sic]&#92;
&#92;
- j -&gt; ok&#92;
- ja -&gt; ok&#92;
- jav -&gt; broken (*)&#92;
- java -&gt; ok&#92;
- javas -&gt; ok&#92;
&#92;
user quickly clicks enter (user wants to submit &quot;java&quot; - but the response to (*) is coming later, overwrites the response to &quot;javas&quot; and in consequence, enter submits (*) instead of &quot;javas&quot;&#92;
&#92;
&#92;
As an ad-hoc fix I suggest - this must be done inside the autocomplete code - to always:&#92;
&#92;
submit ONLY if the current input matches the response (which of course must mirror the original request string)&#92;
&#92;
 $(&quot;#input&quot;).val() === item.requestValue &#92;
&#92;
_and_ to clear all pending ajax requests before submitting again.&#92;
(Perhaps, you do not understand what I mean, then I will reformulate.)&#92;
&#92;
When I have time, I will look into the code and propose a patch.&#92;
</span> → <span class="change-field-new">1353579468705356</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>I made a further analysis, conclusion so far is:</p><p>When the suggestions-callback is triggered, but a certain result is not available</p><p>for example</p><ul><li>when a single server JSON response(*) is incorrect JSON format, for example missing closing bracket</li><li>when the server response is too slow (while the user still types in the #input field</li></ul><p>the Return key submits or tries to submit the broken or incorrect "focus" result.</p><p>(*) for example, when the server response ist correct for "j", "ja", "java", "javas" but is broken for "jav" [sic]</p><ul><li>j -&gt; ok</li><li>ja -&gt; ok</li><li>jav -&gt; broken (*)</li><li>java -&gt; ok</li><li>javas -&gt; ok</li></ul><p>user quickly clicks enter (user wants to submit "java" - but the response to (*) is coming later, overwrites the response to "javas" and in consequence, enter submits (*) instead of "javas"</p><p>As an ad-hoc fix I suggest - this must be done inside the autocomplete code - to always:</p><p>submit ONLY if the current input matches the response (which of course must mirror the original request string)</p><p> $("#input").val() === item.requestValue </p><p>_and_ to clear all pending ajax requests before submitting again.</p><p>(Perhaps, you do not understand what I mean, then I will reformulate.)</p><p>When I have time, I will look into the code and propose a patch.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 22, 2012 11:54AM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">1.9.0</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Syryos, thanks for the persistence! I'll reopen this considering you're going to propose a patch. </p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 22, 2012 11:55AM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.10.0</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 29, 2012 06:05PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Syryos, What do you mean by "submit"? I thought you meant form submission, but then you say that autocomplete itself should "submit only if ...".</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 03, 2012 08:19PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.10.0</span> → <span class="change-field-new">1.9.0</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm reclosing this. Outstanding requests are aborted as soon as a new search is started and invalid responses are ignored, so I don't see how this could be happening. If you can provide a reduced test case showing the problem, feel free to let us know.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:21">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 04, 2012 10:27PM UTC by <span class="author">Syryos</span></span>
        <a class="ticket-change-link" href="#comment:21">comment:21</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>tl;dr:</p><p>reason found: you can call it bug by design, or unwanted side effect</p><p>reprodicible</p><p>proposed fix: available. described literally; no code published yet, sorry (but follows)</p><p>Pls. reopen issue</p><p>@scott.gonzales wrote</p><blockquote> I'm reclosing this. Outstanding requests are aborted as soon as a new search is started and invalid responses are ignored (*), so I don't see how this could be happening. If you can provide a reduced test case showing the problem, feel free to let us know. </blockquote><p>(*) my analyis based on example code like on the jqui API pages showed, that you are wrong. Each callback in its own context fires a new request, and an older request may overtake newer ones. This is the problem: a single older request which comes later overwrites in consequence the input. This happens for example while very quickly typing characters with autocomplete parameteres min=2 and delay=200.</p><p>Can I ask you to please can you leave this issue open ? Why...? Let me explain.</p><p>I know, you want to see a patch. I will deliver such a patch, and a working example but haven't the time at the moment. But the good news is, that I now could **finally** solve the issue by applying two fixes !</p><p>In my environment, I was able to fully reproduce the effect of "autoFocus randomly deletes typed characters". I found the reason and a solution in the client code.</p><p>Allow me first to explain the patch in words (bear with me; a description in words may be difficult to understand). Later (may be mid December 2012), I will publish the code, no cookie-licking, promised.</p><p>Analysis:</p><p>I found, that indeed my analysis was correct. that it is a race condition:</p><p>when the server's response for a previous partial search (example: "jav" &lt;-&gt; old response) is coming after the response of current input "java" - then the old response - the first ajax is not killed - overwrites the new one.</p><p>This ***looks*** like "autoFocus randomly deletes characters***, but it is not. Its only reason is that an older server response "overtakes" the current (last) query, and this older server response updated the input div. As you usually type an increasing number of characters, this means, that an "older" server response corresponds to **less** characters then you have typed --&gt; resulting in the effect and issue.</p><p>ad-hoc fix:</p><p>I could fix this behaviour by expressly deleting _any_ pending ajax request before submitting the new subquery.</p><p>A second fix was required for the autofocus=true case: I make now sure that the current $("#input").val() is now always immediately updated from the corresponding server response - when it returns, This overwrites not the elements in the ui-list but only as said the exact response to the user's input.</p><p>Proposed:</p><p>I will try to apply a correct fix in the autocomplete code itself, if this is possible.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:22">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 04, 2012 10:32PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:22">comment:22</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We definitely need proof of this, not just you saying that it's a bug. Here's the code that disproves what you're saying: <a href="https://github.com/jquery/jquery-ui/blob/3c2acc322782cc08e575405f8123029342e33542/ui/jquery.ui.autocomplete.js#L417" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/blob/3c2acc322782cc08e575405f8123029342e33542/ui/jquery.ui.autocomplete.js#L417</a> Old requests cannot overwrite new requests as there's a unique id attached to every request and only the most recent request is processed.</p><p>Please show code that proves what you're saying. If you can do that, we'll open this bug or file a new one. Until there's proof, this will stay closed.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:23">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 04, 2012 10:42PM UTC by <span class="author">Syryos</span></span>
        <a class="ticket-change-link" href="#comment:23">comment:23</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">The core is&#92;
&#92;
{{{&#92;
var ajax;&#92;
...&#92;
&#92;
//attach autocomplete&#92;
$(&quot;#input&quot;).autocomplete({&#92;
					&#92;
  //define callback to format results&#92;
  source: function(req, callback){&#92;
&#92;
    //pass request to server&#92;
    if (typeof ajax != &#39;undefined&#39;) ajax.abort(); // stop any previous i.e. may be pending ajax requests&#92;
    ajax = $.getJSON(&quot;http://server/api.php?callback=?&quot;, req, function( responseData ) {&#92;
&#92;
      ....&#92;
&#92;
    }),&#92;
&#92;
  ...&#92;
&#92;
  select: function( event, ui ) {&#92;
&#92;
    // query the server again for the current selection&#92;
&#92;
    // overwrite #input with the (echoed) response from the server&#92;
&#92;
    // the response comprises (echoes from the server) the input value on which the select event was fired&#92;
&#92;
    // in that way I can make 100% sure that the input string is now&#92;
    // exactly the same as it was when the user selected an item&#92;
&#92;
    // code follows&#92;
  });&#92;
&#92;
}}}&#92;
</span> → <span class="change-field-new">1354661008342718</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">The core of my reliable solution (ad-hoc fix) is&#92;
&#92;
{{{&#92;
var ajax;&#92;
...&#92;
&#92;
//attach autocomplete&#92;
$(&quot;#input&quot;).autocomplete({&#92;
					&#92;
  //define callback to format results&#92;
  source: function(req, callback){&#92;
&#92;
    //pass request to server&#92;
    if (typeof ajax != &#39;undefined&#39;) ajax.abort(); // stop any previous i.e. may be pending ajax requests&#92;
    ajax = $.getJSON(&quot;http://server/api.php?callback=?&quot;, req, function( responseData ) {&#92;
&#92;
      ....&#92;
&#92;
    }),&#92;
&#92;
  ...&#92;
&#92;
  select: function( event, ui ) {&#92;
&#92;
    // query the server again for the current selection&#92;
&#92;
    // overwrite #input with the (echoed) response from the server&#92;
&#92;
    // the response comprises (echoes from the server) the input value on which the select event was fired&#92;
&#92;
    // in that way I can make 100% sure that the input string is now&#92;
    // exactly the same as it was when the user selected an item&#92;
&#92;
    // code follows&#92;
  });&#92;
&#92;
}}}&#92;
</span> → <span class="change-field-new">1354661088764998</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment2:</th>
                  <td>
                    
                      <span class="change-field-old">The core of my reliable solution (ad-hoc fix) is&#92;
&#92;
{{{&#92;
var ajax;&#92;
...&#92;
&#92;
//attach autocomplete&#92;
$(&quot;#input&quot;).autocomplete({&#92;
					&#92;
  //define callback to format results&#92;
  source: function(req, callback){&#92;
&#92;
    //pass request to server&#92;
    if (typeof ajax != &#39;undefined&#39;) ajax.abort(); // stop any previous i.e. may be pending ajax requests&#92;
    ajax = $.getJSON(&quot;http://server/api.php?callback=?&quot;, req, function( responseData ) {&#92;
&#92;
      ....&#92;
&#92;
    }),&#92;
&#92;
  ...&#92;
&#92;
  select: function( event, ui ) {&#92;
&#92;
    // query the server again for the current selection&#92;
&#92;
    // overwrite #input with the (echoed as additional element of the) response from the server&#92;
&#92;
    // the response comprises (echoes from the server) the input value on which the select event was fired&#92;
&#92;
    // in that way I can make 100% sure that the input string is now&#92;
    // exactly the same as it was when the user selected an item&#92;
&#92;
    // code follows&#92;
  });&#92;
&#92;
}}}&#92;
</span> → <span class="change-field-new">1354661144520516</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment3:</th>
                  <td>
                    
                      <span class="change-field-old">The core of my reliable solution (ad-hoc fix) is&#92;
&#92;
{{{&#92;
var ajax;&#92;
...&#92;
&#92;
//attach autocomplete&#92;
$(&quot;#input&quot;).autocomplete({&#92;
					&#92;
  //define callback to format results&#92;
  source: function(req, callback){&#92;
&#92;
    //pass request to server&#92;
    if (typeof ajax != &#39;undefined&#39;) ajax.abort(); // stop any previous i.e. may be pending ajax requests&#92;
    ajax = $.getJSON(&quot;http://server/api.php?callback=?&quot;, req, function( responseData ) {&#92;
&#92;
      ....&#92;
&#92;
    }),&#92;
&#92;
  ...&#92;
&#92;
  select: function( event, ui ) {&#92;
&#92;
    // query the server again for the current selection&#92;
&#92;
    // overwrite #input with the (echoed) response from the server&#92;
&#92;
    // the response comprises (echoed as additional element in the server json respone) the input value on which the select event was fired&#92;
&#92;
    // in that way I can make 100% sure that the input string is now&#92;
    // exactly the same as it was when the user selected an item&#92;
&#92;
    // code follows&#92;
  });&#92;
&#92;
}}}&#92;
</span> → <span class="change-field-new">1354661159396697</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment4:</th>
                  <td>
                    
                      <span class="change-field-old">The core of my reliable solution (ad-hoc fix) is&#92;
&#92;
{{{&#92;
var ajax;&#92;
...&#92;
&#92;
//attach autocomplete&#92;
$(&quot;#input&quot;).autocomplete({&#92;
					&#92;
  //define callback to format results&#92;
  source: function(req, callback){&#92;
&#92;
    //pass request to server&#92;
    if (typeof ajax != &#39;undefined&#39;) ajax.abort(); // stop any previous i.e. may be pending ajax requests&#92;
    ajax = $.getJSON(&quot;http://server/api.php?callback=?&quot;, req, function( responseData ) {&#92;
&#92;
      ....&#92;
&#92;
    }),&#92;
&#92;
  ...&#92;
&#92;
  select: function( event, ui ) {&#92;
&#92;
    // query the server again for the current selection&#92;
&#92;
    // overwrite #input with the (echoed) response from the server&#92;
&#92;
    // the response comprises (echoed as additional element in the server json response) the input value on which the select event was fired&#92;
&#92;
    // in that way I can make 100% sure that the input string is now&#92;
    // exactly the same as it was when the user selected an item&#92;
&#92;
    // code follows&#92;
  });&#92;
&#92;
}}}&#92;
</span> → <span class="change-field-new">1354661306308365</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>The core of my reliable solution (ad-hoc fix) is</p><pre class="wiki">
var ajax;
...

//attach autocomplete
$("#input").autocomplete({
					
  //define callback to format results
  source: function(req, callback){

    //pass request to server
    if (typeof ajax != 'undefined') ajax.abort(); // stop any previous i.e. may be pending ajax requests
    ajax = $.getJSON("http://server/api.php?callback=?", req, function( responseData ) {

      ....

    }),

  ...

  select: function( event, ui ) {

    // query the server again for the current selection

    // overwrite #input with the (echoed) response from the server

    // the response comprises (echoed as additional element in the server json response) the input value
    // on which the select event was fired

    // in that way I can make 100% sure that the input string is now
    // exactly the same as it was when the user selected an item

    // code follows
  });

</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:24">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 04, 2012 10:47PM UTC by <span class="author">Syryos</span></span>
        <a class="ticket-change-link" href="#comment:24">comment:24</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">jquery team: you should perhaps try with lame server responses, let&#39;s say responses which need 1 second. This will make the effect apparent.</span> → <span class="change-field-new">1354661401758981</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">jquery team: you should perhaps try with lame and differently quick server responses, let&#39;s say responses which need 1 second and the next response takes 500ms, the next 1s. This will make the effect apparent.</span> → <span class="change-field-new">1354661428997558</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>jquery team: you should perhaps try with lame (or differently quick) server responses, let's say responses which need 1 second and the next response takes 500ms, the next 1s. This will make the effect apparent.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:25">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 05, 2012 09:03AM UTC by <span class="author">Syryos</span></span>
        <a class="ticket-change-link" href="#comment:25">comment:25</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It has also to do with the "select" callback and a wrong (i.e. presently not corresponding to #input) ui.item.value under the following conditions:</p><ul><li>fast typing of characters</li><li>autoFocus == true</li><li>slow server reponse</li></ul>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:26">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 05, 2012 01:27PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:26">comment:26</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@Syryos This appears to be specific to your use case, which is highly uncommon. Now that you've shows part of your code it's clear that: 1) You're not using the built-in ajax requests; 2) You're triggering a search in response to a search. Please stop posting on this ticket and file a new ticket. However, I urge you not to open the new ticket until you can provide a reduced test case that shows the problem exists.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:27">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 13, 2012 10:41AM UTC by <span class="author">philios33</span></span>
        <a class="ticket-change-link" href="#comment:27">comment:27</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>As jbergenthal says, the problem is caused by the autoFocus option.  It will call a hover event on the first menu item after rendering a new menu.  Unfortunately upon activating the item, the menu calls deactivate function (first line in activate function) which indeed resets the value in the input box since it triggers a blur.  </p><p>It only happens if a character is typed AFTER rendering of the data has started but BEFORE the blur function is called.  Since the logic in the blur functionality is triggered to be executed in another thread it is possible that by the time it runs, the user will have typed a key.  This means that ui.menu thinks the data has changed and will revert it back to what it thinks is the correct data.  </p><p>This hack will turn off the ui.menu reverting functionality but doesn't fix the underlying problem.  You almost need to tell the menu that although you want to highlight the first item, please dont blur the menu when you activate it.  I will leave it up to you guys to fix but I suggest removing the deactivate call from the activate function of ui.menu.</p><pre class="wiki">
//This is a fix for the autoFocus bug
$.widget("ui.menu", $.ui.menu, {
	deactivate: function() {
		if (!this.active) { return; }
		this.active.children("a")
		.removeClass("ui-state-hover")
		.removeAttr("id");
		//DONT DO A BLUR
		//this._trigger("blur");
		this.active = null;
	}
});
</pre><p>@scott.gonzalez The use case described by Syryos is actually quite common.  The autocomplete code allows you to override the source function anyway, so I dont see a problem of doing e.g. an async ajax call such as google geocode inside the source function.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:28">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 13, 2012 01:55PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:28">comment:28</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@philios33 What do you mean by "It will call a hover event on the first menu item" There's no such thing as a hover event, and while 1.8.x used to trigger a synthetic mouseover event, we stopped doing that in 1.9.0.</p><p>As for as how common Syryos use case is: I've never seen this behavior, can you point me to some examples? My comment about the custom source is that he wasn't providing any useful information. He has a very complex implementation and wasn't providing any details about what he was actually doing and he couldn't provide a reduced test case showing the problem.</p><p>Can you provide a reduced test case along with steps for reproducing this? If you need to go in and modify some code so that whatever delay exists is actually very large to make it easily reproducible that's fine. Or at least point us to a specific line of code if you've tracked this down. But from your description, I still don't know what is causing what you're seeing. Autocomplete doesn't even listen to menu blur events, so I don't see how that's relevant.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2023
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/bugs.jqueryui.com/pagefind/pagefind-ui.js" type="text/javascript"></script>
    <script>
      window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({
          element: "#search",
          showImages: false,
          translations: {
            placeholder: 'Search tickets',
            zero_results: 'No matches found.'
          }
        })
      })
    </script>
  </body>
</html>
