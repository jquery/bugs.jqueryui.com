<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#9966 (Autocomplete change  fails to pass selected Item if alert  is opened inside of the select callback) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/9965/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/9967/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#9966</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened April 03, 2014 05:22PM UTC</p>
      
        <p>Closed April 04, 2014 12:10AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Autocomplete change  fails to pass selected Item if alert  is opened inside of the select callback</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        Melvin.Ross
      </td>
      <th>Owned by:</th>
      <td>Melvin.Ross</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.autocomplete</td>
      
        <th>Version:</th>
      
      <td>1.10.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>This bug was actually previous reported here <a href="http://bugs.jqueryui.com/ticket/8847" class="ext-link"><span class="icon"></span>http://bugs.jqueryui.com/ticket/8847</a> , but was closed in part because the original reporter didn't fully identify what was causing the problem. After finding the report and reading the reporters last comment, I confirmed that his fiddle did in fact still not pass the selected item. </p><p>Here are two fiddles, based on the fiddle from the jquery.ui team member and the reporter. They're exactly the same except that in the faulty one the focus is taken away from the input field in the select callback.  It can be taken away various ways (hence the commented out lines) and they all result in null being passed to the change event. </p><p>If the input is blurred by the user instead of by JS, it works just fine. I've tested on Firefox 24.4 and Chromium 33.</p><p>Working fiddle:[http://jsfiddle.net/MelvinRoss/krc4f/1/]</p><p>Not-working fiddle: <a href="http://jsfiddle.net/MelvinRoss/ET4RJ/4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/MelvinRoss/ET4RJ/4/</a></p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (3)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2014 05:55PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ Melvin.Ross</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Do you have a realistic scenario where this would occur?</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2014 11:53PM UTC by <span class="author">Melvin.Ross</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Here is fiddle mockup that mirrors what I&#39;m doing using soda as an example [http://jsfiddle.net/MelvinRoss/kQ3jG/1/].&#92;
&#92;
Below is an outline of what my actual project is doing.&#92;
&#92;
View looks like: There is a table with information about the logged in user as the header, under this there are  two text inputs. The first is an address field, the second is a field is an ID field which designates the unique ID of that house.&#92;
&#92;
Source: A user types in his address into the address field, and it hits google&#39;s maps API to show possible matches with autocomplete (for normalizaton). &#92;
&#92;
Select: Once a user selects a normalized address, a dialog tells the user that this address is being looked up to find it&#39;s ID. This address is passed to a different API which returns IDs which are the source for the 2nd ID input box which also uses autocomplete. This dialog is dismissed when this data is returned and search is called on the 2nd input box.&#92;
&#92;
Change: If Ui.item is null the customer put in an address and didn&#39;t select an option from the autocomplete list. Put the value of the address box into the header. Else, they picked something from the autocomplete list, put this into the header.&#92;
&#92;
The dialog being created in the select callback takes the focus away from the address textfield, and thus the ui object passed into change is always null. Without the dialog, the user wouldn&#39;t know when the API call was finished.</span> → <span class="change-field-new">1396570045222417</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Here is fiddle mockup that mirrors what I'm doing using soda as an example <a href="http://jsfiddle.net/MelvinRoss/kQ3jG/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/MelvinRoss/kQ3jG/2/</a>.</p><p>Below is an outline of what my actual project is doing.</p><p>View looks like: There is a table with information about the logged in user as the header, under this there are  two text inputs. The first is an address field, the second is a field is an ID field which designates the unique ID of that house.</p><p>Source: A user types in his address into the address field, and it hits google's maps API to show possible matches with autocomplete (for normalizaton). </p><p>Select: Once a user selects a normalized address, a dialog tells the user that this address is being looked up to find it's ID. This address is passed to a different API which returns IDs which are the source for the 2nd ID input box which also uses autocomplete. This dialog is dismissed when this data is returned and search is called on the 2nd input box.</p><p>Change: If Ui.item is null the customer put in an address and didn't select an option from the autocomplete list. Put the value of the address box into the header. Else, they picked something from the autocomplete list, put this into the header.</p><p>The dialog being created in the select callback takes the focus away from the address textfield, and thus the ui object passed into change is always null. Without the dialog, the user wouldn't know when the API call was finished.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2014 12:10AM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>You shouldn't use a dialog for this. You should just display the message inline near the text field.</p><p>Anything that moves focus away from the text field during selection isn't going to be supported.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
