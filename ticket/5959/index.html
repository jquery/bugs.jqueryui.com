<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#5959 (&amp;quot;offsetParent[0] is undefined&amp;quot; error  in sortable) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/5958/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/5960/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#5959</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened August 16, 2010 07:01PM UTC</p>
      
        <p>Closed November 20, 2012 08:51AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">&quot;offsetParent[0] is undefined&quot; error  in sortable</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        kamity
      </td>
      <th>Owned by:</th>
      <td>kamity</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/2.0.0">2.0.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.sortable</td>
      
        <th>Version:</th>
      
      <td>1.8.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I have a draggable list on the page, whose items are connected to multiple sortable lists using 'connectToSortable'. When I drag the first element and drop in to one of the sortables, it works fine. But on subsequent operations, the drag/drop fails with the following errors in the FF (3.6.8) console.</p><pre class="wiki">
Error: this.offsetParent[0] is undefined
Source File: http://www.ship.989studios.com/js/jquery/ui/jquery-ui-1.8.4.custom.js
Line: 3871

Error: scroll[0] is undefined
Source File: http://www.ship.989studios.com/js/jquery/ui/jquery-ui-1.8.4.custom.js
Line: 3960
</pre><p>After changing the method _getParentOffset in jquery-ui-1.8.4.custom.js as follows, it works fine. Is this a valid fix?</p><pre class="wiki">
        _getParentOffset: function() {

                //Get the offsetParent and cache its position
                this.offsetParent = this.helper.offsetParent();
                var po = this.offsetParent.offset();

                // This is a special case where we need to modify a offset calculated on start, since the following happened:
                // 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
                // 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
                //    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
                if(this.cssPosition == 'absolute' && this.scrollParent[0] != document && $.ui.contains(this.scrollParent[0], this.offsetParent[0])) {
                        po.left += this.scrollParent.scrollLeft();
                        po.top += this.scrollParent.scrollTop();
                }
                var isOffsetParentFound = (this.offsetParent != null && this.offsetParent[0] != null);

                if((this.offsetParent[0] == document.body) //This needs to be actually done for all browsers, since pageX/pageY includes this information
                || (isOffsetParentFound && this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == 'html' && $.browser.msie)) //Ugly IE fix
                        po = { top: 0, left: 0 };
                if (po == null)
                {
                        po = { top: 0, left: 0 };
                }

                return {
                        top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
                        left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
                };

        }
</pre><p>Thanks</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (5)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 19, 2010 03:23PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">blocker</span> → <span class="change-field-new">major</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 11, 2012 09:07PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">TBD</span> → <span class="change-field-new">2.0.0</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 05, 2012 11:46PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">I have a draggable list on the page, whose items are connected to multiple sortable lists using &#39;connectToSortable&#39;. When I drag the first element and drop in to one of the sortables, it works fine. But on subsequent operations, the drag/drop fails with the following errors in the FF (3.6.8) console.&#92;
&#92;
Error: this.offsetParent[0] is undefined&#92;
Source File: http://www.ship.989studios.com/js/jquery/ui/jquery-ui-1.8.4.custom.js&#92;
Line: 3871&#92;
&#92;
Error: scroll[0] is undefined&#92;
Source File: http://www.ship.989studios.com/js/jquery/ui/jquery-ui-1.8.4.custom.js&#92;
Line: 3960&#92;
&#92;
After changing the method _getParentOffset in jquery-ui-1.8.4.custom.js as follows, it works fine. Is this a valid fix?&#92;
&#92;
        _getParentOffset: function() {&#92;
&#92;
                //Get the offsetParent and cache its position&#92;
                this.offsetParent = this.helper.offsetParent();&#92;
                var po = this.offsetParent.offset();&#92;
&#92;
                // This is a special case where we need to modify a offset calculated on start, since the following happened:&#92;
                // 1. The position of the helper is absolute, so it&#39;s position is calculated based on the next positioned parent&#92;
                // 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn&#39;t the document, which means that&#92;
                //    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag&#92;
                if(this.cssPosition == &#39;absolute&#39; &amp;&amp; this.scrollParent[0] != document &amp;&amp; $.ui.contains(this.scrollParent[0], this.offsetParent[0])) {&#92;
                        po.left += this.scrollParent.scrollLeft();&#92;
                        po.top += this.scrollParent.scrollTop();&#92;
                }&#92;
                var isOffsetParentFound = (this.offsetParent != null &amp;&amp; this.offsetParent[0] != null);&#92;
&#92;
                if((this.offsetParent[0] == document.body) //This needs to be actually done for all browsers, since pageX/pageY includes this information&#92;
                || (isOffsetParentFound &amp;&amp; this.offsetParent[0].tagName &amp;&amp; this.offsetParent[0].tagName.toLowerCase() == &#39;html&#39; &amp;&amp; $.browser.msie)) //Ugly IE fix&#92;
                        po = { top: 0, left: 0 };&#92;
                if (po == null)&#92;
                {&#92;
                        po = { top: 0, left: 0 };&#92;
                }&#92;
&#92;
                return {&#92;
                        top: po.top + (parseInt(this.offsetParent.css(&quot;borderTopWidth&quot;),10) || 0),&#92;
                        left: po.left + (parseInt(this.offsetParent.css(&quot;borderLeftWidth&quot;),10) || 0)&#92;
                };&#92;
&#92;
        }&#92;
&#92;
Thanks&#92;
</span> → <span class="change-field-new">I have a draggable list on the page, whose items are connected to multiple sortable lists using &#39;connectToSortable&#39;. When I drag the first element and drop in to one of the sortables, it works fine. But on subsequent operations, the drag/drop fails with the following errors in the FF (3.6.8) console.&#92;
&#92;
{{{&#92;
Error: this.offsetParent[0] is undefined&#92;
Source File: http://www.ship.989studios.com/js/jquery/ui/jquery-ui-1.8.4.custom.js&#92;
Line: 3871&#92;
&#92;
Error: scroll[0] is undefined&#92;
Source File: http://www.ship.989studios.com/js/jquery/ui/jquery-ui-1.8.4.custom.js&#92;
Line: 3960&#92;
}}}&#92;
&#92;
After changing the method _getParentOffset in jquery-ui-1.8.4.custom.js as follows, it works fine. Is this a valid fix?&#92;
{{{&#92;
        _getParentOffset: function() {&#92;
&#92;
                //Get the offsetParent and cache its position&#92;
                this.offsetParent = this.helper.offsetParent();&#92;
                var po = this.offsetParent.offset();&#92;
&#92;
                // This is a special case where we need to modify a offset calculated on start, since the following happened:&#92;
                // 1. The position of the helper is absolute, so it&#39;s position is calculated based on the next positioned parent&#92;
                // 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn&#39;t the document, which means that&#92;
                //    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag&#92;
                if(this.cssPosition == &#39;absolute&#39; &amp;&amp; this.scrollParent[0] != document &amp;&amp; $.ui.contains(this.scrollParent[0], this.offsetParent[0])) {&#92;
                        po.left += this.scrollParent.scrollLeft();&#92;
                        po.top += this.scrollParent.scrollTop();&#92;
                }&#92;
                var isOffsetParentFound = (this.offsetParent != null &amp;&amp; this.offsetParent[0] != null);&#92;
&#92;
                if((this.offsetParent[0] == document.body) //This needs to be actually done for all browsers, since pageX/pageY includes this information&#92;
                || (isOffsetParentFound &amp;&amp; this.offsetParent[0].tagName &amp;&amp; this.offsetParent[0].tagName.toLowerCase() == &#39;html&#39; &amp;&amp; $.browser.msie)) //Ugly IE fix&#92;
                        po = { top: 0, left: 0 };&#92;
                if (po == null)&#92;
                {&#92;
                        po = { top: 0, left: 0 };&#92;
                }&#92;
&#92;
                return {&#92;
                        top: po.top + (parseInt(this.offsetParent.css(&quot;borderTopWidth&quot;),10) || 0),&#92;
                        left: po.left + (parseInt(this.offsetParent.css(&quot;borderLeftWidth&quot;),10) || 0)&#92;
                };&#92;
&#92;
        }&#92;
}}}&#92;
Thanks&#92;
</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 05, 2012 11:54PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ kamity</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery UI project! Please provide a complete reduced test case on jsFiddle to help us assess your ticket.</p><p>Additionally, be sure to test against the git version of both jQuery UI and jQuery to ensure the issue still exists. To get you started, use this boilerplate:  <a href="http://jsfiddle.net/ZgAqH/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/ZgAqH/</a> Open the link and click to "Fork" (in the top menu) to get started.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 20, 2012 08:51AM UTC by <span class="author">trac-o-bot</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Because we get so many tickets, we often need to return them to the initial reporter for more information. If that person does not reply within 14 days, the ticket will automatically be closed, and that has happened in this case. If you still are interested in pursuing this issue, feel free to add a comment with the requested information and we will be happy to reopen the ticket if it is still valid. Thanks!</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
