<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#9271 (Dialog: modal prevents focusing on absolutely positioned elements) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/9270/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/9272/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#9271</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(notabug)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened May 03, 2013 03:57AM UTC</p>
      
        <p>Closed May 03, 2013 12:22PM UTC</p>
      
      
        <p>Last modified May 03, 2013 08:09PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Dialog: modal prevents focusing on absolutely positioned elements</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        Ult Combo
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.dialog</td>
      
        <th>Version:</th>
      
      <td>1.10.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Dialog with <code>modal:true</code> prevents focusing on absolutely positioned elements.</p><p><a href="http://jsbin.com/ipejup/8" class="ext-link"><span class="icon"></span>&gt;&gt;&gt; test case</a>. The bug is not present in the editor screen, so please use the full page view as linked.</p><p>This was working fine as of jQuery UI 1.9.2, but now broken in 1.10.x - tested in Chrome and Firefox in W7 x64 Ultimate.</p><p>The use case, as shown in the test case, is using the magnificent <a href="https://github.com/ivaynberg/select2" class="ext-link"><span class="icon"></span>Select2</a> plugin inside of my modal dialogs.</p><p>The issue seems to be related with <a href="https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js#L718-L724" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js#L718-L724</a></p><p>Some temporary workarounds I've found:</p><ul><li>Remove the <code>focusin.dialog</code> listener from document when dialog opens (not perfect); </li><li>Override <code>$.ui.dialog.prototype._focusTabbable</code> - <a href="http://jsbin.com/ipejup/10" class="ext-link"><span class="icon"></span>bin</a> (loses some functionality though).</li></ul><p>Of course, none of these are clean solutions. Is there any way to restore dialog &lt;= 1.9.2 behavior so that absolutely positioned elements can be focused while having a modal dialog open?</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (5)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 03, 2013 04:55AM UTC by <span class="author">Ult Combo</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Just to note, a more hackish but apparently better temporary workaround which avoids the whole <a href="https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js#L711-L727" class="ext-link"><span class="icon"></span>if ( !$.ui.dialog.overlayInstances )</a> block to don't have to remove handlers after they're attached (<a href="http://jsbin.com/ipejup/12" class="ext-link"><span class="icon"></span>bin</a>):</p><pre class="wiki">
(function() {
    var uiDialog = $.ui.dialog,
        dialogProto = uiDialog.prototype,
        createOverlaybk = dialogProto._createOverlay;
    dialogProto._createOverlay = function() {
        uiDialog.overlayInstances++;
        createOverlaybk.apply(this, arguments);
        uiDialog.overlayInstances--;
    };
}());
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 03, 2013 12:22PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ notabug</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This has nothing to do with absolute positioning. You can't focus it because that element is not inside the dialog, it's a direct child of the body.</p><p>Select2 should either provide a way to append to a different element (preferably adopting our <code>.ui-front</code> logic) or you'll need to register the Select2 element as described in <a href="/ticket/9087">#9087</a>.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 03, 2013 12:58PM UTC by <span class="author">Ult Combo</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the reply @scott.gonzalez.</p><p>Now that I get to think about it a bit more, I believe Select2 has such an option. Unfortunately is not ideal for my use case which has way too many Select2 instances which can also change context (position in the DOM tree) dynamically.</p><p>Though the <code>_allowInteraction()</code> seems to be the way to go, I'll override it adding the <code>.select2-drop</code> selector to it. Thanks.</p><p>(Also, I meant absolute position in the sense of if said element was in the page flow, the element wouldn't "appear to be inside" the modal. But I admit that I expressed it badly, the title should've been "Dialog: modal prevents focusing on elements outside of the dialog container")</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 03, 2013 01:05PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <blockquote> the title should've been "Dialog: modal prevents focusing on elements outside of the dialog container"</blockquote><p>And when worded like that, it's easy to see that's expected behavior :-)</p><p>I would suggest asking the Select2 developers to review the "z-index and stacking" section of <a href="http://wiki.jqueryui.com/w/page/12137737/Coding%20standards" class="ext-link"><span class="icon"></span>http://wiki.jqueryui.com/w/page/12137737/Coding%20standards</a> since there's a way for them to automatically have this work properly. It took us several years to figure this out, but so far it seems like a working solution for widgets.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 03, 2013 08:09PM UTC by <span class="author">Ult Combo</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the insight. As dialogs have the <code>ui-front</code> class added automatically, this will work out of the box without overriding <code>_allowInteraction()</code> as soon as this coding standard is adopted, I see. I'll open an issue and/or submit a PR to Select2 this weekend, thanks again for the heads up. <code>=]</code></p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
