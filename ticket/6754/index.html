<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#6754 (Autocomplete performs extremely slow on local arrays exceeding 200 items on IE Browser (6, 7)) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/6753/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/6755/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#6754</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(duplicate)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened December 16, 2010 10:43AM UTC</p>
      
        <p>Closed December 16, 2010 12:55PM UTC</p>
      
      
        <p>Last modified December 16, 2010 12:55PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Autocomplete performs extremely slow on local arrays exceeding 200 items on IE Browser (6, 7)</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        asutor
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.9.0">1.9.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.autocomplete</td>
      
        <th>Version:</th>
      
      <td>1.8.7</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><h2>Performance Analysis on Autocomplete</h2><p><strong>Current Situation</strong></p><p>Having a local array &gt; 200 items the performance of the display of the whole suggestion list is extremely slow under the IE.</p><pre class="wiki">
elem.autocomplete( "search", "" );
</pre><p>Please refer to the following table to see the performance results.</p><p>''Hints:''</p><ul><li>the performance measurement was only investigating the execution of the ''_suggest'' function.</li><li>IE 7.0.5730 and FF 3.6.10 were tested natively</li><li>for IE 6 and 7 the IE Tester was used (<a href="http://www.my-debugbar.com/wiki/IETester/HomePage" class="ext-link"><span class="icon"></span>| IETester Homepage</a>)</li><li>the duration is given in ms</li><li>the timeout on IE for JS execution is set to 10 seconds</li></ul><p>||=  =||= FF (3.6.10) =||==||= IE (7.0.5730) =||==||= IE 6 (IETester) =||==||= IE 7 (IETester) =||==||</p><p>||= No. of items =||= page reload =||= without reload =||= page reload =||= without reload =||= page reload =||= without reload =||= page reload =||= without reload =||</p><p>|| 10 || 19 || 25 || 31 || 47 || 31 || 47 || 47 || 62 ||</p><p>|| 50 || 71 || 110 || 187 || 313 || 187 || 297 || 204 || 313 ||</p><p>|| 100 || 139 || 210 || 484 || 735 || 469 || 703 || 484 || 718 ||</p><p>|| 200 || 279 || 404 || 1359 || 1859 || 1344 || 1891 || 1375 || 1922 ||</p><p>|| 400 || 554 || 868 || 4531 || 5531 || 4624 || 5984 || 4656 || 5562 ||</p><p>|| 800 || 1107 || 1656 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 ||</p><p><strong>Solution and Hints</strong></p><p>Checking the execution duration for ''_suggest'' I discovered that the code line </p><pre class="wiki">
this.menu.refresh();
</pre><p>is taking the most time. The reason for this is the usage of the time consuming method ''children(a)'' within this method. There are other places within that code which using additional slow  functions, but this part is the worst.</p><p><strong>Current Implementation of refresh()</strong></p><pre class="wiki">
	refresh: function() {
		var self = this;

		// don't refresh list items that are already adapted
		var items = this.element.children("li:not(.ui-menu-item):has(a)")
			.addClass("ui-menu-item")
			.attr("role", "menuitem");
		
		items.children("a")
			.addClass("ui-corner-all")
			.attr("tabindex", -1)
			// mouseenter doesn't work with event delegation
			.mouseenter(function( event ) {
				self.activate( event, $(this).parent() );
			})
			.mouseleave(function() {
				self.deactivate();
			});
	},
</pre><p><strong>A more quicker implementation of refresh()</strong></p><pre class="wiki">
	refresh: function() {
		var self = this;
		// don't refresh list items that are already adapted
		var items = this.element.children("li:not(.ui-menu-item):has(a)")
			.addClass("ui-menu-item")
			.attr("role", "menuitem");
		items.each(function() {
			var item = $(this).children();
			item.addClass("ui-corner-all");
			item.attr("tabindex", -1);
			item.attr("tabindex", -1);
			item.mouseenter(function( event ) {
				self.activate( event, $(this).parent() );
			});
			item.mouseleave(function() {
				self.deactivate();
			});
		}); 
	},

</pre><p>Probably there is a much better solution for it but this part did help a lot (speeded up 4 times). The average display time for 400 items were under 1 s. In general using the DOM manipulation should be limited and replacing the HTML parts in whole is much quicker.</p><p>I used the following article about <a href="http://www.artzstudio.com/2009/04/jquery-performance-rules/" class="ext-link"><span class="icon"></span>| JQuery performance</a> in order to find a better solution for the current problem.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (4)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 11:00AM UTC by <span class="author">jzaefferer</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">&#92;
== Performance Analysis on Autocomplete ==&#92;
&#92;
&#39;&#39;&#39;Current Situation&#39;&#39;&#39;&#92;
&#92;
Having a local array &gt; 200 items the performance of the display of the whole suggestion list is extremely slow under the IE.&#92;
&#92;
{{{&#92;
elem.autocomplete( &quot;search&quot;, &quot;&quot; );&#92;
}}}&#92;
&#92;
Please refer to the following table to see the performance results.&#92;
&#92;
&#39;&#39;Hints:&#39;&#39;&#92;
* the performance measurement was only investigating the execution of the &#39;&#39;_suggest&#39;&#39; function.&#92;
* IE 7.0.5730 and FF 3.6.10 were tested natively&#92;
* for IE 6 and 7 the IE Tester was used ([http://www.my-debugbar.com/wiki/IETester/HomePage | IETester Homepage])&#92;
* the duration is given in ms&#92;
* the timeout on IE for JS execution is set to 10 seconds&#92;
&#92;
||=  =||= FF (3.6.10) =||==||= IE (7.0.5730) =||==||= IE 6 (IETester) =||==||= IE 7 (IETester) =||==||&#92;
||= No. of items =||= page reload =||= without reload =||= page reload =||= without reload =||= page reload =||= without reload =||= page reload =||= without reload =||&#92;
|| 10 || 19 || 25 || 31 || 47 || 31 || 47 || 47 || 62 ||&#92;
|| 50 || 71 || 110 || 187 || 313 || 187 || 297 || 204 || 313 ||&#92;
|| 100 || 139 || 210 || 484 || 735 || 469 || 703 || 484 || 718 ||&#92;
|| 200 || 279 || 404 || 1359 || 1859 || 1344 || 1891 || 1375 || 1922 ||&#92;
|| 400 || 554 || 868 || 4531 || 5531 || 4624 || 5984 || 4656 || 5562 ||&#92;
|| 800 || 1107 || 1656 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 ||&#92;
&#92;
&#39;&#39;&#39;Solution and Hints&#39;&#39;&#39;&#92;
&#92;
Checking the execution duration for &#39;&#39;_suggest&#39;&#39; I discovered that the code line &#92;
&#92;
{{{&#92;
this.menu.refresh();&#92;
}}}&#92;
&#92;
is taking the most time. The reason for this is the usage of the time consuming method &#39;&#39;children(a)&#39;&#39; within this method. There are other places within that code which using additional slow  functions, but this part is the worst.&#92;
&#92;
&#39;&#39;&#39;Current Implementation of refresh()&#39;&#39;&#39;&#92;
&#92;
{{{&#92;
	refresh: function() {&#92;
		var self = this;&#92;
&#92;
		// don&#39;t refresh list items that are already adapted&#92;
		var items = this.element.children(&quot;li:not(.ui-menu-item):has(a)&quot;)&#92;
			.addClass(&quot;ui-menu-item&quot;)&#92;
			.attr(&quot;role&quot;, &quot;menuitem&quot;);&#92;
		&#92;
		items.children(&quot;a&quot;)&#92;
			.addClass(&quot;ui-corner-all&quot;)&#92;
			.attr(&quot;tabindex&quot;, -1)&#92;
			// mouseenter doesn&#39;t work with event delegation&#92;
			.mouseenter(function( event ) {&#92;
				self.activate( event, $(this).parent() );&#92;
			})&#92;
			.mouseleave(function() {&#92;
				self.deactivate();&#92;
			});&#92;
	},&#92;
}}}&#92;
&#92;
&#39;&#39;&#39;A more quicker implementation of refresh()&#39;&#39;&#39;&#92;
&#92;
{{{&#92;
	refresh: function() {&#92;
		var self = this;&#92;
		// don&#39;t refresh list items that are already adapted&#92;
		var items = this.element.children(&quot;li:not(.ui-menu-item):has(a)&quot;)&#92;
			.addClass(&quot;ui-menu-item&quot;)&#92;
			.attr(&quot;role&quot;, &quot;menuitem&quot;);&#92;
		items.each(function() {&#92;
			var item = $(this).children();&#92;
			item.addClass(&quot;ui-corner-all&quot;);&#92;
			item.attr(&quot;tabindex&quot;, -1);&#92;
			item.attr(&quot;tabindex&quot;, -1);&#92;
			item.mouseenter(function( event ) {&#92;
				self.activate( event, $(this).parent() );&#92;
			});&#92;
			item.mouseleave(function() {&#92;
				self.deactivate();&#92;
			});&#92;
		}); &#92;
	},&#92;
&#92;
}}}&#92;
&#92;
Probably there is a much better solution for it but this part did help a lot (speeded up 4 times). The average display time for 400 items were under 1 s. In general using the DOM manipulation should be limited and replacing the HTML parts in whole is much quicker.&#92;
&#92;
I used the following article about [http://www.artzstudio.com/2009/04/jquery-performance-rules/ | JQuery performance] in order to find a better solution for the current problem.</span> → <span class="change-field-new">== Performance Analysis on Autocomplete ==&#92;
&#92;
&#39;&#39;&#39;Current Situation&#39;&#39;&#39;&#92;
&#92;
Having a local array &gt; 200 items the performance of the display of the whole suggestion list is extremely slow under the IE.&#92;
&#92;
{{{&#92;
elem.autocomplete( &quot;search&quot;, &quot;&quot; );&#92;
}}}&#92;
&#92;
Please refer to the following table to see the performance results.&#92;
&#92;
&#39;&#39;Hints:&#39;&#39;&#92;
* the performance measurement was only investigating the execution of the &#39;&#39;_suggest&#39;&#39; function.&#92;
* IE 7.0.5730 and FF 3.6.10 were tested natively&#92;
* for IE 6 and 7 the IE Tester was used ([http://www.my-debugbar.com/wiki/IETester/HomePage | IETester Homepage])&#92;
* the duration is given in ms&#92;
* the timeout on IE for JS execution is set to 10 seconds&#92;
&#92;
||=  =||= FF (3.6.10) =||==||= IE (7.0.5730) =||==||= IE 6 (IETester) =||==||= IE 7 (IETester) =||==||&#92;
||= No. of items =||= page reload =||= without reload =||= page reload =||= without reload =||= page reload =||= without reload =||= page reload =||= without reload =||&#92;
|| 10 || 19 || 25 || 31 || 47 || 31 || 47 || 47 || 62 ||&#92;
|| 50 || 71 || 110 || 187 || 313 || 187 || 297 || 204 || 313 ||&#92;
|| 100 || 139 || 210 || 484 || 735 || 469 || 703 || 484 || 718 ||&#92;
|| 200 || 279 || 404 || 1359 || 1859 || 1344 || 1891 || 1375 || 1922 ||&#92;
|| 400 || 554 || 868 || 4531 || 5531 || 4624 || 5984 || 4656 || 5562 ||&#92;
|| 800 || 1107 || 1656 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 || &gt;10000 ||&#92;
&#92;
&#39;&#39;&#39;Solution and Hints&#39;&#39;&#39;&#92;
&#92;
Checking the execution duration for &#39;&#39;_suggest&#39;&#39; I discovered that the code line &#92;
&#92;
{{{&#92;
this.menu.refresh();&#92;
}}}&#92;
&#92;
is taking the most time. The reason for this is the usage of the time consuming method &#39;&#39;children(a)&#39;&#39; within this method. There are other places within that code which using additional slow  functions, but this part is the worst.&#92;
&#92;
&#39;&#39;&#39;Current Implementation of refresh()&#39;&#39;&#39;&#92;
&#92;
{{{&#92;
	refresh: function() {&#92;
		var self = this;&#92;
&#92;
		// don&#39;t refresh list items that are already adapted&#92;
		var items = this.element.children(&quot;li:not(.ui-menu-item):has(a)&quot;)&#92;
			.addClass(&quot;ui-menu-item&quot;)&#92;
			.attr(&quot;role&quot;, &quot;menuitem&quot;);&#92;
		&#92;
		items.children(&quot;a&quot;)&#92;
			.addClass(&quot;ui-corner-all&quot;)&#92;
			.attr(&quot;tabindex&quot;, -1)&#92;
			// mouseenter doesn&#39;t work with event delegation&#92;
			.mouseenter(function( event ) {&#92;
				self.activate( event, $(this).parent() );&#92;
			})&#92;
			.mouseleave(function() {&#92;
				self.deactivate();&#92;
			});&#92;
	},&#92;
}}}&#92;
&#92;
&#39;&#39;&#39;A more quicker implementation of refresh()&#39;&#39;&#39;&#92;
&#92;
{{{&#92;
	refresh: function() {&#92;
		var self = this;&#92;
		// don&#39;t refresh list items that are already adapted&#92;
		var items = this.element.children(&quot;li:not(.ui-menu-item):has(a)&quot;)&#92;
			.addClass(&quot;ui-menu-item&quot;)&#92;
			.attr(&quot;role&quot;, &quot;menuitem&quot;);&#92;
		items.each(function() {&#92;
			var item = $(this).children();&#92;
			item.addClass(&quot;ui-corner-all&quot;);&#92;
			item.attr(&quot;tabindex&quot;, -1);&#92;
			item.attr(&quot;tabindex&quot;, -1);&#92;
			item.mouseenter(function( event ) {&#92;
				self.activate( event, $(this).parent() );&#92;
			});&#92;
			item.mouseleave(function() {&#92;
				self.deactivate();&#92;
			});&#92;
		}); &#92;
	},&#92;
&#92;
}}}&#92;
&#92;
Probably there is a much better solution for it but this part did help a lot (speeded up 4 times). The average display time for 400 items were under 1 s. In general using the DOM manipulation should be limited and replacing the HTML parts in whole is much quicker.&#92;
&#92;
I used the following article about [http://www.artzstudio.com/2009/04/jquery-performance-rules/ | JQuery performance] in order to find a better solution for the current problem.</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>So the main change you did was removing the selector from the .children() call. As we already filter with :has(a), that change makes sense and shouldn't make any sementic difference.</p><p>Could you verify that removing the selector "a" from the original code makes a noticeable difference? </p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 11:01AM UTC by <span class="author">jzaefferer</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 12:55PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the performance analysis. I had already tracked this down and came up with the same fix a few days ago. There should really be a fix in jQuery core for methods that are guaranteed not to produce duplicate items (the duplication checks are what take all the time).</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 12:55PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Duplicate of <a href="/ticket/6670">#6670</a>.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
