<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#5233 (Add support for high contrast mode) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/5232/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/5234/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#5233</a>
      <span class="ticket-status">open</span>
      <span class="ticket-type">feature</span>
      <span class="ticket-resolution">()</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened February 25, 2010 11:45PM UTC</p>
      
      
        <p>Last modified January 25, 2013 09:22PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Add support for high contrast mode</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        hhillen
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.core</td>
      
        <th>Version:</th>
      
      <td>1.8rc2</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>haspatch</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>High contrast mode is an accessibility</p><p>feature in the Windows operating system that changes background and</p><p>foreground colors so that they are easier to perceive by low vision</p><p>users who require a particular contrast scheme. Browsers generally</p><p>inherit this scheme, usually by overriding background and foreground</p><p>color and removing background images.</p><p>The plan is to follow a similar approach as DOJO does, which in a</p><p>nutshell would mean the following:</p><p>1.  When jQuery loads, create a test div element that is positioned</p><p>off-screen. Set different border colors for individual sides of the</p><p>div. Also set a background image.</p><p>2. After creation, check the element's computed styles. If the border</p><p>colors are now the same for each side of the div, or the background</p><p>image is no longer set, this means high contrast mode is active. This</p><p>is then indicated as a globally accessible flag somewhere on the</p><p>jQuery object (for example, "$.highContrast = true").</p><p>3. When the high contrast flag is set to true, widgets that normally</p><p>have problems displaying correctly in high contrast mode will apply</p><p>specific HTML and/or CSS changes to solve these issues.</p><p>Examples of changes that could be made when high contrast mode is on:</p><ul><li>Adding border styles. Border styles remain visible in high contrast</li></ul><p>mode. this is specifically useful for widgets that indicate selection</p><p>using background styles.</p><ul><li>Inserting text. For example, the progressbar widget is difficult to</li></ul><p>see in high contrast mode because it uses background images. To get</p><p>around this we could ensure that the current value of the progressbar</p><p>is shown as text as well when high contrast mode is active (e.g.</p><p>"54%"). The text would then correctly inherit the high contrast</p><p>styles.</p><ul><li>Inserting  images. For example, some components may normally use</li></ul><p>background images, but in high contrast mode the widget could instead</p><p>inject a high contrast version of the image into the DOM (images in</p><p>the DOM will still be visible in high contrast mode)</p><ul><li>Unhiding content. for example, icon buttons are implemented using  a</li></ul><p>background image.  These buttons also have a hidden span element that</p><p>contains the button's textual name. In high contrast mode, we can</p><p>unhide this element, so that the button would still be usable as a</p><p>text button.</p><ul><li>Applying focus styles. To make it easier to see which element has</li></ul><p>focus, we could add thicker outline or border styles for focused</p><p>elements.</p><p>The point is, there will be a flag set that will allow us to do</p><p>whatever is necessary to make widgets usable in high contrast mode.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (3)</summary>

  <ul class="ticket-attachments">
    
      <li>
        <a href="/attachment/ticket/5233/high_contrast_support.txt/index.html">high_contrast_support.txt</a> (4.4 KB) - added by hhillen
        <strong>February 25, 2010 11:46PM UTC</strong>.<br>
        
      </li>
    
      <li>
        <a href="/attachment/ticket/5233/patch-mar-1.txt/index.html">patch-mar-1.txt</a> (5.3 KB) - added by Gijs
        <strong>March 01, 2010 07:27PM UTC</strong>.<br>
        <p>Updated version of the patch</p>
      </li>
    
      <li>
        <a href="/attachment/ticket/5233/patch-mar-2.txt/index.html">patch-mar-2.txt</a> (7.9 KB) - added by Gijs
        <strong>March 02, 2010 11:37PM UTC</strong>.<br>
        <p>Updated version of the patch</p>
      </li>
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (10)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2010 11:51PM UTC by <span class="author">hhillen</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>My colleague Gijs <a href="/wiki/KruitBosch">KruitBosch</a> has started working on a patch for this (see attached file).</p><p>So far the patch works as follows:</p><p>There's four code (JS) change hunks: a method to check whether HCM is on, automatically running that method on page load, using it to make icon buttons display as text buttons, and adding the value of a progressbar to itself in text. Then there's a whole bunch of style changes that use the attribute added to the &lt;body&gt; in the code blocks. Together, this ensures:</p><ul><li>icon buttons display as text buttons in high contrast mode.</li><li>the date picker buttons display as text in HCM.</li><li>the tabs and accordion widgets get a better focus indication (for the accordion, also outside of HCM)</li><li>the progress bar gets a value shown in HCM.</li></ul><p>The following issues remain:</p><ul><li>Buttons which have a pressed state (like the B/I/U buttons on the default button visual test) don't show that in HCM. </li><li>The dialog resize handle isn't visible in HCM. </li></ul>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 01, 2010 07:34PM UTC by <span class="author">Gijs</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've added an updated version of the patch. Changes are:</p><ul><li>Move to just having a property on jQuery's global object rather than a method.</li><li>Use no CSS for the detection of HCM.</li><li>Use jQuery's own curCSS method to detect the div's styling.</li></ul><p>Note that I'm using the ui-icon class in order to avoid dealing with paths to image files from the jQuery JS, which I think will be treated as being "from" the including page, from which we don't know the location of the jQuery themes/image directory. On the other hand, the current approach will break if there are themes which don't use the same approach to show icons as the default (a single background image, and background offsets to control which icon is shown). If there is a better way to solve this problem, do let me know.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 02, 2010 11:59PM UTC by <span class="author">Gijs</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Still more updates just added. Changes:</p> <ul><li>Use $.support.highContrast</li> <li>Switch to using position:relative on the progressbar container, and position: absolute within, to work around IE6 sucking. This may be a problem if the user of the library could/does decide to use other values for 'position' on the progressbar? To fix that, one could add another div to contain the valueDiv and valueTextDiv, and give that position: relative, or just not care about IE6 and revert to the approach used in the previous patch (which does work in IE7, IE8, Firefox, etc.).</li> <li>Use an &lt;img&gt; for the dialog resize grippy in HCM only, so that it can still be seen and used in HCM. This hacks into the resizable code in order to ensure dragging the &lt;img&gt; works, by adding it to the handles collection. If that's undesirable for reasons that I missed, a different way to make it work is to also check if event.target.parentNode is a handle, in _mouseCapture in jquery.ui.resizable.js.</li></ul><p>I haven't changed the ui-icon approach to use a data: URI, because... it doesn't seem to work! :-(</p><p>For some reason both Firefox (3.6) and IE6-8 don't remove the backgroundImage in the computedstyle, even though it is not displayed. The same happens when using an ordinary http url from the JS too, though... Honestly not sure why at this point. </p><p>With the caveats above, I think this is getting somewhere. The only other issue I know of at this time is showing the pressed state of push buttons, and I'm not quite sure how to go about doing that at this point.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 30, 2010 10:09AM UTC by <span class="author">jzaefferer</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-old">enhancement</span> → <span class="change-field-new">feature</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2012 03:54PM UTC by <span class="author">jzaefferer</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Another work in progress: <a href="https://github.com/jquery/jquery-ui/pull/217" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/pull/217</a></p><p>Looking for Hans to send a new pull request.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 17, 2012 05:42PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Microsoft has a media query for high contrast support: <a href="http://msdn.microsoft.com/en-us/library/ie/hh771830(v=vs.85).aspx" class="ext-link"><span class="icon"></span>http://msdn.microsoft.com/en-us/library/ie/hh771830(v=vs.85).aspx</a></p><p>There is work to get this standardized for Media Queries 4.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 11, 2012 02:42PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.9.0</span> → <span class="change-field-new">1.10.0</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 05, 2012 10:26AM UTC by <span class="author">jzaefferer</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The pull at <a href="https://github.com/jquery/jquery-ui/pull/217" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/pull/217</a> got closed and has some unrelated commits, but the actual change to ui.core.js should still be good.</p><p>We should probably use that as a fallback, using media queries as the primary detection mechanism.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 05, 2012 12:39PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old">a11y</span> → <span class="change-field-new">haspatch</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 25, 2013 09:22PM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.10.0</span> → <span class="change-field-new">none</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
