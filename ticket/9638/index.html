<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#9638 (Autocomplete: Scrolling menu auto selects options in IE) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/9637/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/9639/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#9638</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened October 29, 2013 12:39PM UTC</p>
      
        <p>Closed January 25, 2017 05:28PM UTC</p>
      
      
        <p>Last modified January 25, 2017 05:28PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Autocomplete: Scrolling menu auto selects options in IE</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        peter.morlion
      </td>
      <th>Owned by:</th>
      <td>scottgonzalez</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.12.2">1.12.2</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.autocomplete</td>
      
        <th>Version:</th>
      
      <td>1.10.3</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Take the example for an autocomplete combobox (<a href="http://jqueryui.com/resources/demos/autocomplete/combobox.html)" class="ext-link"><span class="icon"></span>http://jqueryui.com/resources/demos/autocomplete/combobox.html)</a> and everything works. </p><p>Now add the following css:</p><pre class="wiki">
ul.ui-autocomplete {
    max-height: 200px;
    overflow: auto;
}
</pre><p>In IE10, when you open the dropdown, click on the down arrow without moving the cursor inside the list of options (important!), the list will scroll, but the first item will be selected/hovered upon, scroll the list back up. This only happens the first time after opening the dropdown.</p><p>I've tested this with jQuery UI 1.10.3 and the problem is present in IE10 (not Chrome or Firefox). You can test this with the following jsFiddle: <a href="http://jsfiddle.net/KdDfp/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/KdDfp/1/</a></p><p>Using jQuery UI .9.1, I cannot reproduce this (although I had to comment out some code from the autocomplete for it to work).</p><p>I've tried commenting out pieces of the autocomplete plugin to find the problem, but couldn't find it. So possibly this isn't a bug in the ui.autocomplete component, but in something else (ui.core?).</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (9)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2013 12:59PM UTC by <span class="author">peter.morlion</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Further investigation learns me that it has nothing to do with the combobox, but the problem lies with the autocomplete (or jQuery itself):&#92;
&#92;
A working jsFiddle, with jQuery UI 1.8.16: http://jsfiddle.net/xJZvf/3/&#92;
A jsFiddle with the problem, using jQuery UI 1.9.1: http://jsfiddle.net/xJZvf/2/</span> → <span class="change-field-new">1383051614373500</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">Further investigation learns me that it has nothing to do with the combobox, but the problem lies with the autocomplete (or jQuery itself):&#92;
&#92;
A working jsFiddle, with jQuery UI 1.8.16: http://jsfiddle.net/xJZvf/3/&#92;
&#92;
A jsFiddle with the problem, using jQuery UI 1.10.3: http://jsfiddle.net/xJZvf/2/</span> → <span class="change-field-new">1383051862514943</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment2:</th>
                  <td>
                    
                      <span class="change-field-old">Further investigation learns me that it has nothing to do with the combobox, but the problem lies with the autocomplete (or jQuery itself):&#92;
&#92;
A working jsFiddle, with jQuery UI 1.8.16: http://jsfiddle.net/xJZvf/3/&#92;
A jsFiddle with the problem, using jQuery UI 1.10.3: http://jsfiddle.net/xJZvf/2/&#92;
The same problem with jQuery UI 1.9.2: http://jsfiddle.net/xJZvf/4/</span> → <span class="change-field-new">1383051917469533</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>Further investigation learns me that it has nothing to do with the combobox, but the problem lies with the autocomplete (or jQuery itself):</p><p>A working jsFiddle, with jQuery UI 1.8.16: <a href="http://jsfiddle.net/xJZvf/3/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/xJZvf/3/</a></p><p>A jsFiddle with the problem, using jQuery UI 1.10.3: <a href="http://jsfiddle.net/xJZvf/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/xJZvf/2/</a></p><p>The same problem with jQuery UI 1.9.2: <a href="http://jsfiddle.net/xJZvf/4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/xJZvf/4/</a></p><p>So it must have been introduced from 1.8 to 1.9</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2013 01:07PM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Possibly a duplicate of #9496.</span> → <span class="change-field-new">1383052110390910</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">Autocomplete combobox with max-height scrolls up when clicking on down/scroll arrow</span> → <span class="change-field-new">Autocomplete: Scrolling menu auto selects options in IE</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Verified on IE11. Possibly a duplicate of <a href="/ticket/9496">#9496</a>.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2013 01:48PM UTC by <span class="author">peter.morlion</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It could be we're talking about the same code here, but initially, I wouldn't say this is a duplicate. The item isn't actually selected.</p><p>For example in this fiddle: <a href="http://jsfiddle.net/xJZvf/4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/xJZvf/4/</a></p> <ul><li>Put focus on input</li> <li>Type a</li> <li>move your mouse to the right (never into the dropdown), go down, back left so your cursor is now over the down arrow, but you never entered the dropdown with the items (so you didn't hover over it)</li> <li>click</li> <li>The list scrolls down, then back up again; 'ActionScript' is highlighted, but the content of the input remains 'a'. </li> <li>Click next to the widget: the dropdown disappears, nothing is selected, 'a' remains in the input</li></ul>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2013 01:58PM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Yes but if you click enter after the option is highlighted it is selected, which is what <a href="/ticket/9496">#9496</a> is getting at.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2013 02:03PM UTC by <span class="author">peter.morlion</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:4 tj.vantoll]:</p><blockquote> Yes but if you click enter after the option is highlighted it is selected, which is what <a href="/ticket/9496">#9496</a> is getting at.</blockquote><p>Aha, true indeed. Could well be the same then.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 25, 2014 10:36AM UTC by <span class="author">oodavid</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've experience what sounds like the same thing using a recent version of Chrome; v 36.0.1985.125 tested, but possibly previous versions are afflicted too.</p><p>Using this test rig:</p><p><a href="http://jsfiddle.net/oodavid/Yc882/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/oodavid/Yc882/</a></p> <ul><li>Focus</li> <li>Type 'a' - list appears</li> <li>Tap DOWN - Actionscript is highlighted, list looks OK</li> <li>Tap DOWN again - Actionscript is selected, list collapsed to just one (ERROR)</li> <li>Subsequent taps of DOWN toggle the focus between input and list of one (ERROR)</li></ul><p>Demo in animated GIF form:</p><p>[[Image(<a href="http://imgur.com/UAXb1XH.gif)" class="ext-link"><span class="icon"></span>http://imgur.com/UAXb1XH.gif)</a>]]</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 25, 2014 12:18PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Replying to [comment:6 oodavid]:&#92;
&gt; I&#39;ve experience what sounds like the same thing using a recent version of Chrome; v 36.0.1985.125 tested, but possibly previous versions are afflicted too.&#92;
&gt; &#92;
&gt; Using this test rig:&#92;
&gt; &#92;
&gt; http://jsfiddle.net/oodavid/Yc882/&#92;
&gt; &#92;
&gt;  * Focus&#92;
&gt;  * Type &#39;a&#39; - list appears&#92;
&gt;  * Tap DOWN - Actionscript is highlighted, list looks OK&#92;
&gt;  * Tap DOWN again - Actionscript is selected, list collapsed to just one (ERROR)&#92;
&gt;  * Subsequent taps of DOWN toggle the focus between input and list of one (ERROR)&#92;
&gt; &#92;
&gt; Demo in animated GIF form:&#92;
&gt; &#92;
&gt; [[Image(http://imgur.com/UAXb1XH.gif)]]&#92;
&#92;
Thanks for the very thorough test case, but I&#39;m not seeing this behavior in Chrome 36 on OS X or Windows. Do you see this behavior in other browsers? And could you try this using version 1.11 of jQuery UI instead of 1.10.4. Thanks.&#92;
</span> → <span class="change-field-new">1406293556976344</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:6 oodavid]:</p><blockquote> I've experience what sounds like the same thing using a recent version of Chrome; v 36.0.1985.125 tested, but possibly previous versions are afflicted too.  Using this test rig:  <a href="http://jsfiddle.net/oodavid/Yc882/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/oodavid/Yc882/</a></blockquote><p>Thanks for the very thorough test case, but I'm not seeing this behavior in Chrome 36 on OS X or Windows. Do you see this behavior in other browsers? And could you try this using version 1.11 of jQuery UI instead of 1.10.4. Thanks.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 25, 2017 05:28PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ scottgonzalez</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>In [changeset:"573e7e69c9b63752fb06a15d60ec2dded839e093" 573e7e6]:</p><pre class="wiki">
#!CommitTicketReference repository="" revision="573e7e69c9b63752fb06a15d60ec2dded839e093"
Autocomplete: Fix IE/Edge scrolling issues

IE11 and scrolling autocompletes didn't get along great; this should help fix
their relationship.

When you click on an autocomplete scrollbar in IE11, the menu temporarily
gains focus, which caused a couple problems.

1. Depending on how long you clicked, the dropdown could close.

2. Scrolling down by clicking the scrollbar's down arrow would misbehave. The
list would pop back up to the top with the first item selected.

We can fix both problems by modifying the focus/blur handling a bit.

1. There is a flag to instruct the control to ignore blurs, but it was getting
cleared too quickly; when the code refocused the input after it was blurred,
IE would send *another* blur event, which wasn't getting ignored and would
close the dropdown. We now wait for the focus/blur pair to process before
clearing the flag.

2. We remove the tabindex from the dropdown menu, which prevents menu's focus
handler from firing. When you focus a menu, it will select the first menu item
if none are selected. Selecting a menu item will scroll it into view if it's
not visible. This combination of behaviors was causing the strange behavior
when attempting to scroll down.

I couldn't figure out a way to write a unit test for this, since it's IE only
and seems to require user interaction. You can verify the previous behavior
(and the fix) on <code></code>

Fixes #9638
Closes gh-1785
</pre>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 25, 2017 05:28PM UTC by <span class="author">rjollos</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">none</span> → <span class="change-field-new">1.12.2</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
