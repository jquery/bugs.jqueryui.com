<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#14180 (Selectmenu: Page jumps when clicking on selectmenu in IE8) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/14166/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/14190/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#14180</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened August 18, 2015 04:54PM UTC</p>
      
        <p>Closed May 03, 2017 12:58PM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Selectmenu: Page jumps when clicking on selectmenu in IE8</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        tn
      </td>
      <th>Owned by:</th>
      <td>tn</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.selectmenu</td>
      
        <th>Version:</th>
      
      <td>1.11.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>In IE8, clicking on any select/dropdown menu causes the page to scroll/jump to the top of the page.</p><p><a href="https://jsbin.com/yalevehezi/" class="ext-link"><span class="icon"></span>JQuery UI 1.11.4</a></p><p><a href="https://jsbin.com/hamopoliye/" class="ext-link"><span class="icon"></span>JQuery UI 1.11.1</a></p><p>what do we expect to see:</p><p>[[Image(<a href="http://s13.postimg.org/ud1mp1t9z/Screen_Shot_2015_08_18_at_19_40_17.png)" class="ext-link"><span class="icon"></span>http://s13.postimg.org/ud1mp1t9z/Screen_Shot_2015_08_18_at_19_40_17.png)</a>]]</p><p>what we do see:</p><p>[[Image(<a href="http://s1.postimg.org/jk5m3f05b/Screen_Shot_2015_08_18_at_19_51_24.png)" class="ext-link"><span class="icon"></span>http://s1.postimg.org/jk5m3f05b/Screen_Shot_2015_08_18_at_19_51_24.png)</a>]]</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (6)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 18, 2015 05:14PM UTC by <span class="author">tn</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There is no jumping in the older version but it does jump in the latest version.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 19, 2015 04:54PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ tn</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm not seeing that behavior. Tested in IE8 on Windows XP and Windows 7. Are you actually experiencing the problem with the fiddle you provided?</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 19, 2015 11:06PM UTC by <span class="author">blargoner</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hello,</p><p>This buggy jumping behavior was introduced in version 1.11.2 of the select menu and affects at least IE8 on Windows XP and Windows 7. Here is minimal reproduction code:</p><p><a href="https://gist.github.com/blargoner/df46e5c94e1635cfac50" class="ext-link"><span class="icon"></span>https://gist.github.com/blargoner/df46e5c94e1635cfac50</a></p><p>Save that code to a file locally and load it in IE8 and follow the instruction text on the page to reproduce.</p><p>After researching this issue today in detail, I discovered the following history and cause:</p><ul><li>In <a href="http://bugs.jqueryui.com/ticket/10144," class="ext-link"><span class="icon"></span>http://bugs.jqueryui.com/ticket/10144,</a> a user reported that a change in 1.11.0 caused the current DOM selection in the browser to be lost when a select menu was opened, which differed from native select box behavior and was inappropriate for menus where the DOM selection should be maintained (like toolbar menus for rich text editors). This was fixed in 1.11.1 by preventing the DOM selection from being lost: <a href="https://github.com/jquery/jquery-ui/pull/1295/files" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/pull/1295/files</a></li></ul><ul><li>In <a href="http://bugs.jqueryui.com/ticket/10639," class="ext-link"><span class="icon"></span>http://bugs.jqueryui.com/ticket/10639,</a> a user reported that the fix in 1.11.1 caused a new regression: now the select menu was not getting focus when a select menu was opened, interfering with autocomplete functionality. This was fixed in 1.11.2 by storing the current DOM selection on mousedown, then later reselecting it and restoring focus to the select menu: <a href="https://github.com/jquery/jquery-ui/pull/1358/files" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/pull/1358/files</a></li></ul><ul><li>The problem with the fix in 1.11.2 is that, if there is no DOM selection when the select menu is opened, then the reselection <pre class="wiki">this.range.select()</pre> (line 366 in the last link) will cause the page to jump back to the top. If there is a DOM selection when the select menu is opened, the page will jump to the position of the DOM selection. Neither of these behaviors is consistent with native select box function in IE8 and is extremely jarring in a use case like the one in the reproduction code.</li></ul><p>An ideal fix would prevent the DOM reselection from triggering a page jump/scroll, but I am not certain offhand if that is possible in IE, and if so how to do it. If that is not possible, a partial solution might be to prevent reselection in case the user didn't originally have anything selected. Note the current </p><pre class="wiki">if(!this.range)</pre> check in line 355 of the last link is not sufficient for this because the <pre class="wiki">TextRange</pre> object still exists in this case (and hence <pre class="wiki">this.range</pre> is not a falsy value), but <pre class="wiki">this.range.text</pre> is an empty string. However, this approach may have negative consequences for use cases that require even the position of an empty DOM selection to be maintained.<p></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 20, 2015 02:21PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-old">1.11.4</span> → <span class="change-field-new">1.11.2</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Interestingly this is caused by the list of steps in that page. There has to be some actual content that's scrolled off the page, which the jsbin didn't include. You can reduce the body to:</p><pre class="wiki">
&lt;p&gt;I cause the jump&lt;/p&gt;
&lt;div style="height: 1000px"&gt;&lt;/div&gt;
&lt;select style="width: 200px;"&gt;
  &lt;option&gt;...&lt;/option&gt;
&lt;/select&gt;
</pre><p>and that will reproduce the problem.</p><p>Sadly, we may need to store the scroll position(s) and restore after the selection/focus handling. </p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 20, 2015 02:22PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">Forced scroll/jump to top of page on click on any selectmenu</span> → <span class="change-field-new">Selectmenu: Page jumps when clicking on selectmenu in IE8</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 03, 2017 12:58PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We no longer support IE8 and this bug doesn't affect newer versions.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
