<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8593 (Datepicker cannot be re-opened by clicking on the text field after using the scrollbar) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8592/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8594/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#8593</a>
      <span class="ticket-status">open</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">()</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened September 23, 2012 03:26AM UTC</p>
      
      
        <p>Last modified February 29, 2016 11:53AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Datepicker cannot be re-opened by clicking on the text field after using the scrollbar</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        glthomas224
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.datepicker</td>
      
        <th>Version:</th>
      
      <td>1.8.23</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I am re-posting this bug because I believe that it was closed in haste by scott gonzalez.  I will summarize the bug again.  </p><p>The bug: If the user clicks on the scroll bar of the browser then the datepicker disappears AND the text input field that has been assigned to be a datepicker will still have focus.  If the user then clicks on said input field to make the datepicker reappear after their scroll action the datepicker will NOT appear, unless the user first clicks somewhere else on the page to cause the input field to lose focus.  Only after the input field loses focus can the datepicker be made to reappear by clicking again on the original input field.  <strong>This is clunky performance and in my opinion this is absolutely a BUG regardless of any developers opinions on whether datepicker visibility should persist throughout mouse pointer interactions with the scrollbar of a browser.</strong>  If you consider how a native non jquery/javascript dropdown combobox works, if the user clicks on the combobox it opens up the container of selction options. If the user then performs a scroll action the container of selection options disappears, but then the user can immediately reopen the combobox through the <strong>very next click</strong> on the combobox rather than having to perform an unfocus event. For this reason I have recreated this ticket.  </p><p>Now my opinion also is different on what the intended behavior of a datepicker control should be in regards to persistence of the datepicker upon a scroll event.  I have themed my calendar to be larger than the default calendar.  Consequently sometimes my users might want to scroll the calendar depending on the current size of their browser window.  My opinion is that the jquery ui datepicker should perform just like the jquery ui autocomplete combobox.  If the user opens the selection container on the combobox and then performs a scroll event, then the combobox selection options remain visible.  I tried investigating the javascript file for the autocomplete combobox to glean ideas about how to keep the datepicker visible when the scroll bar is selected.  Unfortunately, I was unable to discover the magic code that is enabling this capability within the combobox.  Until a more suitable solution can be concocted users can employ my following strategy.</p><p>On line 837 of the jquery.ui.datepicker.js file there resides a function called _checkExternalClick.  The last line of this function is:</p><pre class="wiki">
$.datepicker._hideDatepicker();
</pre><p>This line needs to be wrapped in the following conditional statement:</p><pre class="wiki">
if (!$target.is('html')) {
    $.datepicker._hideDatepicker();
}
</pre><p>Once this is done, clicking on the browser scrollbar while the datepicker is visible will not hide the datepicker. However any space on the page between the body edge and the window edge is indistinguishable from the scrollbar since that space is considered to be an object of HTMLhtmlElement. The scroll bar is also considered to be an object of HTMLhtmlElement. So by creating a div container that fills this extra space between the body edge and the window edge, then the only thing left that the user can click that is considered to be an object of HTMLhtmlElement is the scrollbar. So here is the extra code needed to do this. </p><p>After the &lt;body&gt; tag on your page add:</p><pre class="wiki">
&lt;div id="UnderMask" style="position:absolute; width:0px; height:0px;
    z-index:-10000; top:0; overflow:hidden; background-color:transparent;"&gt;&lt;/div&gt;
</pre><p>In your style sheet or within your &lt;style&gt; tags add this:</p><pre class="wiki">
html{overflow-x:hidden}
</pre><p>Finally just prior to the close &lt;/body&gt; tag add the following script:</p><pre class="wiki">
&lt;script type="text/javascript"&gt;
jq171('#UnderMask').css('height', jq171(document).height() + 'px');
jq171('#UnderMask').css('width', jq171(window).width() + 'px');
jq171('#UnderMask').css('left', "0");
jq171(window).resize(function () {
    if (jq171(window).width() &lt; jq171('body').width()) {
        jq171('html').css('overflow-x', 'scroll');
    }
    else {
        jq171('html').css('overflow-x', 'hidden');
    } 
    jq171('#UnderMask').css('width', jq171(window).width() + 'px');
});
&lt;/script&gt;
</pre><p>This isnt't the most elegant of solutions but it should suffice until the the jquery ui gods can concoct a more standalone solution which doesnt require the user to add extraneous objects.  Another approach might be to measure where the coordinates of the click occurred and compare that with the coordinates of the browser's scrollbar.</p><p>Please don't close this ticket until at a minimum the bug I've described is resolved, regardless of one's datepicker persistence opinions!</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (10)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 11, 2012 02:45PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.9.0</span> → <span class="change-field-new">1.11.0</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 19, 2012 04:41PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Duplicate of <a href="/ticket/8592">#8592</a>.Thanks for contributing! The maintainers of the datepicker plugin responded to your request and have said what their opinion is. </p><p>Rather than opening another ticket saying the same thing, fork the project on github.com and maintain your own fork that has the behavior that matches *your* opinion rather than their opinion.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 19, 2012 06:27PM UTC by <span class="author">fvox13</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The issue is not "the datepicker closes on scroll". That's fine, and I would think acceptable behavior for this plugin.</p><p>The issue is "the field with the datepicker retains focus, which prevents the datepicker from reopening until you first click somewhere else on the page." This *is* a fairly serious usability bug. Not some dude's opinion.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 19, 2012 06:37PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for clarifying and following up! I couldn't repro this issue at first because I'm on a Mac and scrollbars don't exist by default. But now I see what you're saying. Confirmed.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 19, 2012 06:38PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 27, 2013 02:01PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Hi,&#92;
&#92;
I have added this below function its works well. thank you for your guidelines.&#92;
&#92;
&#39;&#39;&#39;file :&#39;&#39;&#39;jquery.ui.datepicker.js [[BR]]&#92;
&#92;
&#39;&#39;&#39;function called :&#39;&#39;&#39;  _checkExternalClick.&#92;
&#92;
version &quot;jQuery UI Datepicker 1.8.7&quot;&#92;
&#92;
&#92;
_checkExternalClick: function (a) {           &#92;
if (d.datepicker._curInst) {&#92;
                a = d(a.target),&#92;
                inst = d.datepicker._getInst(a[0]);&#92;
                /* a[0].id != d.datepicker._mainDivId &amp;&amp; a.parents(&quot;#&quot; + d.datepicker._mainDivId).length == 0 &amp;&amp; !a.hasClass(d.datepicker.markerClassName) &amp;&amp; !a.hasClass(d.datepicker._triggerClass) &amp;&amp; d.datepicker._datepickerShowing &amp;&amp; !(d.datepicker._inDialog &amp;&amp; d.blockUI) &amp;&amp; d.datepicker._hideDatepicker() */&#92;
                if ( ( ( a[0].id !== d.datepicker._mainDivId &amp;&amp;&#92;
                a.parents(&quot;#&quot; + d.datepicker._mainDivId).length === 0 &amp;&amp;&#92;
                !a.hasClass(d.datepicker.markerClassName) &amp;&amp;&#92;
                !a.closest(&quot;.&quot; + d.datepicker._triggerClass).length &amp;&amp;&#92;
                d.datepicker._datepickerShowing &amp;&amp; !(d.datepicker._inDialog &amp;&amp; d.blockUI) ) ) ||&#92;
                ( a.hasClass(d.datepicker.markerClassName) &amp;&amp; d.datepicker._curInst !== inst )  ) {&#92;
                                if (!a.is(&#39;html&#39;)) {&#92;
                                                d.datepicker._hideDatepicker();&#92;
                                }&#92;
                }&#92;
}&#92;
},&#92;
</span> → <span class="change-field-new">1369664178745773</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Hi,</p><p>I have added this below function its works well. thank you for your guidelines.</p><p>[ code deleted]</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 27, 2013 02:17PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@rnrvenkat If you would like to propose a fix, please sign our <a href="http://contribute.jquery.org/CLA/" class="ext-link"><span class="icon"></span>CLA</a> and send a pull request for <a href="https://github.com/jquery/jquery-ui." class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui.</a> Thanks.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 24, 2014 11:43PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.11.0</span> → <span class="change-field-new">none</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 14, 2014 06:40PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">Datepicker disappears upon scroll</span> → <span class="change-field-new">Datepicker cannot be re-opened by clicking on the text field after using the scrollbar</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 29, 2016 11:53AM UTC by <span class="author">alecpl</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This has nothing to do with a scrollbar at all. Steps:</p><p>1. Goto input field, calendar appears,</p><p>2. Select a date - date will be inserted to the input, the input still has focus,</p><p>3. Now you can't open the calendar again by just clicking the input (e.g. in case you made a mistake selecting the date).</p><p>This can be simply fixed by assigning onclick event to the input, not only onfocus.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
