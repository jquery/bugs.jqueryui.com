<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#6259 (Droppable: drop event incorrectly triggered when dragging a draggable over a droppable onto a sortable) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/6258/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/6260/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#6259</a>
      <span class="ticket-status">open</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">()</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened November 03, 2010 04:11PM UTC</p>
      
      
        <p>Last modified March 05, 2019 05:49AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Droppable: drop event incorrectly triggered when dragging a draggable over a droppable onto a sortable</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        avuori
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/2.0.0">2.0.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.droppable</td>
      
        <th>Version:</th>
      
      <td>1.8.6</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th>Cc:</th>
      
      <td>avuori</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>When a draggable is connected with a sortable, and there is also a droppable involved, the droppable's drop event is erroneously triggered when the draggable is dragged quickly over the droppable (without ever releasing the mouse).</p><p>The example demonstrates the problem. It may not be reproducible instantly, but a few down/up drag movements should do it. An alert is shown when the droppable event is triggered. </p><p>The problem seems to be present only when the draggeble's helper is "clone".</p><pre class="wiki">
&lt;html&gt;
&lt;head&gt;
&lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js" type="text/javascript"&gt;&lt;/script&gt; 
&lt;script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

	&lt;script&gt;
	$(function() {
		$("tbody.sortable").sortable({});
		$(".draggable").draggable({
			helper: "clone",
			connectToSortable: "tbody.sortable"
		});
		$(".droppable")
		.droppable({drop: function () { alert("dropped"); } });
		$("td").disableSelection();
	});
	&lt;/script&gt;
	&lt;table&gt;
		&lt;tbody&gt;
			&lt;tr class="draggable ui-state-highlight"&gt;&lt;td&gt;Drag me down above the sortable, 
then quickly drag me up directly over and past the droppable&lt;/td&gt;&lt;/tr&gt;
			&lt;tr class="droppable ui-state-highlight"&gt;&lt;td&gt;Droppable&lt;/td&gt;&lt;/tr&gt;
		&lt;/tbody&gt;
		&lt;tbody class="sortable"&gt;
			&lt;tr class="ui-state-default"&gt;&lt;td&gt;Item 1&lt;/td&gt;&lt;/tr&gt;
			&lt;tr class="ui-state-default"&gt;&lt;td&gt;Item 2&lt;/td&gt;&lt;/tr&gt;
			&lt;tr class="ui-state-default"&gt;&lt;td&gt;Item 3&lt;/td&gt;&lt;/tr&gt;
			&lt;tr class="ui-state-default"&gt;&lt;td&gt;Item 4&lt;/td&gt;&lt;/tr&gt;
			&lt;tr class="ui-state-default"&gt;&lt;td&gt;Item 5&lt;/td&gt;&lt;/tr&gt;
		&lt;/tbody&gt;
	&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (1)</summary>

  <ul class="ticket-attachments">
    
      <li>
        <a href="/attachment/ticket/6259/example.html/index.html">example.html</a> (1.1 KB) - added by avuori
        <strong>November 03, 2010 04:13PM UTC</strong>.<br>
        
      </li>
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (13)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 03, 2010 04:28PM UTC by <span class="author">avuori</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Tested with Chrome and Firefox 3.6.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 31, 2010 02:08AM UTC by <span class="author">be.davestein</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I had the same issue on my site with very different markup. Was also using clone.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 12, 2011 10:46PM UTC by <span class="author">cnr</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">$(&quot;.droppable&quot;)&#92;
.droppable({drop: function () { &#92;
   if (!$(event.srcElement).hasClass(&quot;ui-draggable-dragging&quot;)) { return; }&#92;
   alert(&quot;dropped&quot;); &#92;
} &#92;
});&#92;
&#92;
will be solve your problem</span> → <span class="change-field-new">1299970024519568</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">$(&quot;.droppable&quot;)&#92;
.droppable({drop: function () { &#92;
   if (!$(event.srcElement).hasClass(&quot;ui-draggable-dragging&quot;)) { return; }&#92;
&#92;
   alert(&quot;dropped&quot;); &#92;
} &#92;
});&#92;
&#92;
will be solve your problem</span> → <span class="change-field-new">1551764970286114</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <pre class="wiki">$(".droppable")
.droppable({drop: function () { 
   if (!$(event.srcElement).hasClass("ui-draggable-dragging")) { return; }

   alert("dropped"); 
} 
});
</pre><p>will be solve your problem</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 15, 2011 04:28PM UTC by <span class="author">rjollos</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Replying to [comment:3 cnr]:&#92;
&gt; $(&quot;.droppable&quot;)&#92;
&gt; .droppable({drop: function () { &#92;
&gt;    if (!$(event.srcElement).hasClass(&quot;ui-draggable-dragging&quot;)) { return; }&#92;
&gt; &#92;
&gt;    alert(&quot;dropped&quot;); &#92;
&gt; } &#92;
&gt; });&#92;
&gt; &#92;
&gt; will be solve your problem&#92;
&#92;
&#92;
Thanks for the tip!&#92;
</span> → <span class="change-field-new">1551764987537961</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:3 cnr]:</p><blockquote> ... will be solve your problem</blockquote><p>Thanks for the tip!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 11, 2012 09:07PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">TBD</span> → <span class="change-field-new">2.0.0</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2012 04:21AM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">Droppable&#39;s drop event triggered when dragging a draggable over the droppable</span> → <span class="change-field-new">Droppable: drop event incorrectly triggered when dragging a draggable over a droppable onto a sortable</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>confirmed on latest: <a href="http://jsfiddle.net/2aJh9/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/2aJh9/</a></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 25, 2013 10:33AM UTC by <span class="author">discy</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Because I needed the droppable to be droppable I fixed it by handling the drop event in the draggable:</p><pre class="wiki">
var draggableOnDroppable;

.droppable({
over: function(event,ui) {
draggableOnDroppable = true;
},
out: function(event, ui) {
draggableOnDroppable = false;
});

.draggable({
stop: function (event, ui) {
if (draggableOnDroppable) //do something with draggable
}
});
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 11, 2013 05:49PM UTC by <span class="author">pdore</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Is there a known workaround?</p><p>Is there an alternative to using clone helper?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 11, 2013 05:53PM UTC by <span class="author">pdore</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Is there a known workaround?</p><p>Is there an alternative to using clone helper?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 22, 2014 09:01AM UTC by <span class="author">rjollos</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Hello, the solution is simple. The drop can&#39;t be effective if you don&#39;t release the left mouse, so just detect the state of it, and bloc any action in droppable if you don&#39;t have left mouse released :&#92;
&#92;
&#92;
var leftButtonDown;&#92;
$(document).mousedown(function(e){&#92;
   if(e.which === 1) leftButtonDown = true;&#92;
});&#92;
$(document).mouseup(function(e){&#92;
   if(e.which === 1) leftButtonDown = false;&#92;
});&#92;
&#92;
.droppable({&#92;
  drop:function(e,ui){&#92;
&#92;
    if(leftButtonDown) return false;&#92;
    // Here code when really drop&#92;
&#92;
});</span> → <span class="change-field-new">1551764956663020</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Hello, the solution is simple. The drop can't be effective if you don't release the left mouse, so just detect the state of it, and bloc any action in droppable if you don't have left mouse released :</p><pre class="wiki">var leftButtonDown;
$(document).mousedown(function(e){
   if(e.which === 1) leftButtonDown = true;
});
$(document).mouseup(function(e){
   if(e.which === 1) leftButtonDown = false;
});

.droppable({
  drop:function(e,ui){

    if(leftButtonDown) return false;
    // Here code when really drop

});
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 09, 2014 10:22AM UTC by <span class="author">rjollos</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Replying to [comment:10 paulf66]:&#92;
&gt; Hello, the solution is simple. The drop can&#39;t be effective if you don&#39;t release the left mouse, so just detect the state of it, and bloc any action in droppable if you don&#39;t have left mouse released :&#92;
&gt; &#92;
&gt; &#92;
&gt; var leftButtonDown;&#92;
&gt; $(document).mousedown(function(e){&#92;
&gt;    if(e.which === 1) leftButtonDown = true;&#92;
&gt; });&#92;
&gt; $(document).mouseup(function(e){&#92;
&gt;    if(e.which === 1) leftButtonDown = false;&#92;
&gt; });&#92;
&gt; &#92;
&gt; .droppable({&#92;
&gt;   drop:function(e,ui){&#92;
&gt; &#92;
&gt;     if(leftButtonDown) return false;&#92;
&gt;     // Here code when really drop&#92;
&gt; &#92;
&gt; });&#92;
&#92;
&#92;
This work-around works perfectly for FF &amp; Chrome but IE10 triggers drop event first and then mouseup will get fire. So again this will not work on IE10. &#92;
</span> → <span class="change-field-new">1551764939277841</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:10 paulf66]:</p><blockquote> Hello, the solution is simple. The drop can't be effective if you don't release the left mouse, so just detect the state of it, and bloc any action in droppable if you don't have left mouse released :  ...</blockquote><p>This work-around works perfectly for FF & Chrome but IE10 triggers drop event first and then mouseup will get fire. So again this will not work on IE10. </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 01, 2015 06:51PM UTC by <span class="author">Morph3y</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">I was able to find a quick workaround for those who are still interested.&#92;
&#92;
Basically the problem occurs only when during the drag over the sortable your draggable is in the position when its both over the droppable and sortable (highlighting both).&#92;
&#92;
Feel free to add a quick data() or just a flag to your ui.helper during the out() of the sortable which could be removed during the over() of the droppable.&#92;
PS Make sure you don&#39;t allow your drop() on droppable to execute first time after the sortable out()!&#92;
&#92;
Example:&#92;
&#92;
self.contentTemplate.sortable({&#92;
... bla bla bla ...&#92;
    out: function (event, ui) {&#92;
       // workaround for bug http://bugs.jqueryui.com/ticket/6259&#92;
       ui.helper.data(&#39;overSortable&#39;, true);&#92;
    },&#92;
... bla bla bla ...&#92;
});&#92;
&#92;
template.droppable({&#92;
... bla bla bla ...&#92;
    over: function (event, ui) {&#92;
        // workaround for bug http://bugs.jqueryui.com/ticket/6259&#92;
        ui.helper.removeData(&#39;overSortable&#39;);&#92;
    },&#92;
    drop: function (event, ui) {&#92;
        // workaround for bug http://bugs.jqueryui.com/ticket/6259&#92;
        if (ui.helper.data(&#39;overSortable&#39;) != null) {&#92;
            ui.helper.removeData(&#39;overSortable&#39;);&#92;
            return;&#92;
        }&#92;
    ... bla bla bla ... DO THE STUFF &#92;
    },&#92;
... bla bla bla ...&#92;
});&#92;
&#92;
&#92;
</span> → <span class="change-field-new">1427914440031696</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">I was able to find a quick workaround for those who are still interested.&#92;
&#92;
Basically the problem occurs only when during the drag over the sortable your draggable is in the position when its both over the droppable and sortable (highlighting both).&#92;
&#92;
Feel free to add a quick data() or just a flag to your ui.helper during the out() of the sortable which could be removed during the over() of the droppable.&#92;
PS Make sure you don&#39;t allow your drop() on droppable to execute first time after the sortable out()!&#92;
&#92;
Example:&#92;
&#92;
self.contentTemplate.sortable({&#92;
... bla bla bla ...&#92;
    out: function (event, ui) {&#92;
       // workaround for bug http://bugs.jqueryui.com/ticket/6259&#92;
&#92;
       ui.helper.data(&#39;overSortable&#39;, true);&#92;
    },&#92;
... bla bla bla ...&#92;
});&#92;
&#92;
template.droppable({&#92;
... bla bla bla ...&#92;
    over: function (event, ui) {&#92;
        // workaround for bug http://bugs.jqueryui.com/ticket/6259&#92;
&#92;
        ui.helper.removeData(&#39;overSortable&#39;);&#92;
    },&#92;
    drop: function (event, ui) {&#92;
&#92;
        // workaround for bug http://bugs.jqueryui.com/ticket/6259&#92;
&#92;
        if (ui.helper.data(&#39;overSortable&#39;) != null) {&#92;
            ui.helper.removeData(&#39;overSortable&#39;);&#92;
            return;&#92;
        }&#92;
    ... bla bla bla ... DO THE STUFF &#92;
    },&#92;
... bla bla bla ...&#92;
});&#92;
&#92;
&#92;
</span> → <span class="change-field-new">1551764920664269</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>I was able to find a quick workaround for those who are still interested.</p><p>Basically the problem occurs only when during the drag over the sortable your draggable is in the position when its both over the droppable and sortable (highlighting both).</p><p>Feel free to add a quick data() or just a flag to your ui.helper during the out() of the sortable which could be removed during the over() of the droppable.</p><p>PS Make sure you don't allow your drop() on droppable to execute first time after the sortable out()!</p><p>Example:</p><pre class="wiki">self.contentTemplate.sortable({
... bla bla bla ...
    out: function (event, ui) {
       // workaround for bug http://bugs.jqueryui.com/ticket/6259

       ui.helper.data('overSortable', true);
    },
... bla bla bla ...
});

template.droppable({
... bla bla bla ...
    over: function (event, ui) {
        // workaround for bug http://bugs.jqueryui.com/ticket/6259

        ui.helper.removeData('overSortable');
    },
    drop: function (event, ui) {

        // workaround for bug http://bugs.jqueryui.com/ticket/6259

        if (ui.helper.data('overSortable') != null) {
            ui.helper.removeData('overSortable');
            return;
        }
    ... bla bla bla ... DO THE STUFF 
    },
... bla bla bla ...
});
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 12, 2015 10:24AM UTC by <span class="author">Skaffen</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I think I've pieced together which bits of code are interacting to cause this, plus also for "deactivate" to be triggered on droppables when you just drag a draggable back out of a connected sortable. The "drag" handler of the draggable's "connectToSortable" plugin has a bit which says:</p><pre class="wiki">
// If it doesn't intersect with the sortable, and it intersected before,
// we fake the drag stop of the sortable, but make sure it doesn't remove
// the helper by using cancelHelperRemoval.
</pre><p>When you drag a draggable into a sortable and then out again as you drag out of the sortable that bit of code triggers and part of it calls:</p><pre class="wiki">
sortable._mouseStop( event, true );
</pre><p>The _mouseStop of sortable then in turn runs this bit of code:</p><pre class="wiki">
		//If we are using droppables, inform the manager about the drop
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			$.ui.ddmanager.drop(this, event);
		}
</pre><p>So it will call drop on the ddmanager, which doesn't seem desirable and can have two side effects.</p><p>The first is the one mentioned on this ticket - if your draggable happens to have moved over a droppable as you've moved out of the sortable then you'll see the drop event trigger (ddmanager.drop will check if the draggable intersects with a droppable and only call drop if it has).</p><p>The second one is one which prompted me to dig into this stuff which is that dragging a draggable into a sortable and then out of a sortable again will result in _deactivate being called on any droppables on the page:</p><pre class="wiki">
				this._deactivate.call( this, event );
</pre><p>I spotted this because I was using the activeClass option of a droppable to highlight it where my draggable was also connected to a sortable. I was finding that dragging the droppable into and out of the sortable was causing the highlighting to go off.</p><p>This fiddle demonstrates:</p><p><a href="http://jsfiddle.net/k0w71yb1/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/k0w71yb1/2/</a></p><p>On that fiddle drag the draggable downwards slowly and you'll see the drop area will highlight as you begin to drag. Continue to drag the draggable down through the sortable list and then out below the sortable list. You'll see that the highlighting of the drop area will cease and a "deactivate" will be logged to the console. Then stop dragging (let go of the mouse button) and you'll see a second "deactivate" will be logged to the console.</p><p>I would guess the fix could be for _mouseStop to be told that it's a fake drag stop and know to not trigger the "drop" event on the droppables in this circumstance, but I don't know enough about why the code is doing what it's doing to be sure!</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
