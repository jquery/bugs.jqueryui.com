<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#1553 (Error in offset position when dragging element more than once) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/1547/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/1632/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#1553</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened August 30, 2007 12:06PM UTC</p>
      
        <p>Closed August 30, 2007 02:00PM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Error in offset position when dragging element more than once</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        pragueexpat
      </td>
      <th>Owned by:</th>
      <td>paul</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        blocker
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/"></a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.core</td>
      
        <th>Version:</th>
      
      <td>1.1.3</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I have a draggable (helper = clone) div that can be dragged to one of several droppable divs. The start function of the drag records the start position of the draggable div using offset(). The first drag records the position correctly. The second is not correct. The third is correct, the fourth is not correct, etc. The incorrect positions are all reported as the same value (its off by 14 pixels to the right)</p><p>ui.mouse.js, ui.draggable.js, ui.droppable.js are from new jQueryUI August 28,2007</p><p>contact:pragueexpat &lt;at&gt; hotmail.com</p><p>Explanation of sample code:</p><p>Open this file in Firefox (it uses the console.log of firebug). Drag the red dot to any of the green dots. The console will log the starting position of the red dot div when you start the drag. Notice that every even numbered time you drag the red dot, the position is incorrect.</p><pre class="wiki">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
	&lt;head&gt;
		&lt;script type="text/javascript" src="/lib/jquery/jquery-1.1.3.1.js"&gt;&lt;/script&gt;
		&lt;script type="text/javascript" src="/lib/jqueryui/ui.mouse.js"&gt;&lt;/script&gt;
		&lt;script type="text/javascript" src="/lib/jqueryui/ui.draggable.js"&gt;&lt;/script&gt;
		&lt;script type="text/javascript" src="/lib/jqueryui/ui.droppable.js"&gt;&lt;/script&gt;
		&lt;script type="text/javascript" src="/lib/jquerydimensions/jquery.dimensions.js"&gt;&lt;/script&gt;
		&lt;style type="text/css"&gt;
			.container{
				border:1px solid blue;
				position:absolute;
				z-Index:100;
				width:300px;
				height:60px;			
			}
			#textInput1_container{
				top:25px;
				left:500px;
			}
			#textInput2_container{
				top:25px;
				left:50px;
			}
			#textInput3_container{
				top:100px;
				left:50px;
			}
			#textInput4_container{
				top:175px;
				left:50px;
			}
			#textInput5_container{
				top:250px;
				left:50px;
			}
			#textInput6_container{
				top:100px;
				left:500px;
			}
			#textInput7_container{
				top:175px;
				left:500px;
			}
			.dd{
				display:inline;
				border:1px solid green
			}
		&lt;/style&gt;
	&lt;/head&gt;
&lt;body&gt;
	&lt;div id="textInput1_container" class="container"&gt;
		Enter text: &lt;input type="text" id="textInput1" name="textInput1" size="40" /&gt;
		&lt;div id="drag_textInput1" class="dd drag"&gt;
		&lt;img src="/images/dragzone.jpg" /&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id="textInput2_container" class="container"&gt;
		Enter text: &lt;input type="text" id="textInput2" name="textInput2" size="40" /&gt;
		&lt;div id="drop_textInput2" class="dd drop"&gt;
		&lt;img src="/images/dropzone.jpg" /&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id="textInput3_container" class="container"&gt;
		Enter text: &lt;input type="text" id="textInput3" name="textInput3" size="40" /&gt;
		&lt;div id="drop_textInput3" class="dd drop"&gt;
		&lt;img src="/images/dropzone.jpg" /&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id="textInput4_container" class="container"&gt;
		Enter text: &lt;input type="text" id="textInput4" name="textInput4" size="40" /&gt;
		&lt;div id="drop_textInput4" class="dd drop"&gt;
		&lt;img src="/images/dropzone.jpg" /&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id="textInput5_container" class="container"&gt;
		Enter text: &lt;input type="text" id="textInput5" name="textInput5" size="40" /&gt;
		&lt;div id="drop_textInput5" class="dd drop"&gt;
		&lt;img src="/images/dropzone.jpg" /&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id="textInput6_container" class="container"&gt;
		Enter text: &lt;input type="text" id="textInput6" name="textInput6" size="40" /&gt;
		&lt;div id="drop_textInput6" class="dd drop"&gt;
		&lt;img src="/images/dropzone.jpg" /&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id="textInput7_container" class="container"&gt;
		Enter text: &lt;input type="text" id="textInput7" name="textInput7" size="40" /&gt;
		&lt;div id="drop_textInput7" class="dd drop"&gt;
		&lt;img src="/images/dropzone.jpg" /&gt;
		&lt;/div&gt;
	&lt;/div&gt;		

&lt;script type="text/javascript"&gt;
$(function(){
	$('.dragdiv').draggable();
	$('.drop').each(function(){createDropTarget($(this))});
	$('.drag').each(function(){createDragTarget($(this))});
});

createDropTarget = function(jObj){
	(jObj).droppable({accept:'.drag',tolerance:'intersect',greedy:true});
}

createDragTarget = function(jObj){
	(jObj).draggable({helper:'clone',start:function(){
		var tmp = $('#'+this.id).offset();
		console.log(tmp);
	}});
}

&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (2)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 30, 2007 12:46PM UTC by <span class="author">pragueexpat</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry, just realized that the images 'dragzone.jpg' and 'dropzone.jpg' are not attached. The first div is the draggable and the rest are droppable.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 30, 2007 02:00PM UTC by <span class="author">paul</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The cloning of the helper also clones the id of the original because of css reasons. Therefore, this is not a bug, but it reports from time to time the helper position. Please use $(this) for a real reference to the original to avoid this.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
