<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#9310 (Draggable option &amp;#39;grid&amp;#39; needs a way to offset from parent) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/9309/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/9311/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#9310</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(duplicate)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened May 16, 2013 05:50PM UTC</p>
      
        <p>Closed May 19, 2013 04:03AM UTC</p>
      
      
        <p>Last modified May 23, 2013 02:20PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Draggable option &#39;grid&#39; needs a way to offset from parent</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        jonez
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.core</td>
      
        <th>Version:</th>
      
      <td>1.10.3</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Currently the grid array passed into a Draggable object uses the elements starting position as [0,0] for the grid. If an element starts at 103x25 with a grid of [20x20] the first increment moving left would be 123x25, ideally it would move to 120x25 or an option should be present to change it's behaviour.</p><p><a href="http://bugs.jqueryui.com/ticket/4454" class="ext-link"><span class="icon"></span>http://bugs.jqueryui.com/ticket/4454</a></p><p>Same issue, I can't reply to that thread but I believe the reply from scott.gonzalez missed the author's intent. The 'dragstart' event triggers too late to move an element off the grid into the grid, and while the 'drag' event can pragmatically control the position of the element doing so overrides the built in 'snap' logic. So yes, technically we can control the grid but in doing so we lose other functionality.</p><p><a href="http://forum.jquery.com/topic/jquery%E2%80%99s-draggable-grid-conceptually-flawed" class="ext-link"><span class="icon"></span>http://forum.jquery.com/topic/jquery%E2%80%99s-draggable-grid-conceptually-flawed</a></p><p>The response from fordlover49 seems to suggest you can modify ui.originalPosition in 'dragstart' but this does not work.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (8)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 19, 2013 04:03AM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Duplicate of <a href="/ticket/4454">#4454</a>.Hi jonez,</p><p>Thanks for taking the time to contribute to the jQuery UI project. You should be able to comment on closed issues so I'm going to close this as a duplicate of <a href="/ticket/4454">#4454</a> to keep this consolidated. If you have issues commenting on that issue let us know.</p><p>Also, could you please provide a test case that shows this issue? I'm having a hard time visualizing your use case of moving something from off the grid into it. You can use this as a starting point: <a href="http://jsfiddle.net/tj_vantoll/W7UxN/." class="ext-link"><span class="icon"></span>http://jsfiddle.net/tj_vantoll/W7UxN/.</a></p><p>Thanks!</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2013 01:36PM UTC by <span class="author">jonez</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Updated fiddle: <a href="http://jsfiddle.net/W7UxN/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/W7UxN/1/</a></p><p>"I'm having a hard time visualizing your use case of moving something from off the grid into it."</p><p>Imagine you have a container that has 5 elements inside it. These elements can be arbitrarily placed by the user at any increment (25,25 or 21,28 etc). Draggable is initialized with grid=false, and the user moves the pieces around. Now the user decides that element A and element B should have their top edges aligned with one another. We give the user an option to show/hide a grid system to assist in making alignments. The user turns the grid on, we loop through all 5 elements and set grid=16,16. When grid inits, every element has their own grid with the center 0,0 at their current position. Even though every element has the same grid increment, none of them can be aligned with one another because they are all on their own grids, vs. one common grid (parent).</p><p>What we'd like to have happen:</p><p>1. We start with grid=false, element at 21,27.</p><p>2. We set grid=20,20 on all elements</p><p>3. When element is moved, the first move pushes the element to 20,20. Now the element is in the grid.</p><p>4. Any subsequent move uses the grid system, so 20,40 or 40,40 etc.</p><p>If every element started out on a grid increment this wouldn't be an issue. But, myself and the other users in the previous ticket are looking to only apply a grid when necessary. This creates a situation where an element can init not on a grid increment, have a grid applied, then need to be put into a valid grid increment so it can be aligned with other elements within a parent container.</p><p>I hope that does a better job of describing the problem.</p><p>Possible solutions:</p><p>1. Option to specify a parent as the base for the grid</p><p>2. Beforestart event so we can push out of grid elements into the grid if needed</p><p>Thanks!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2013 01:40PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>FWIW, the grid option is going away with the interactions rewrite. However, there is a beforeStart callback in the new API. See <a href="http://wiki.jqueryui.com/w/page/12137878/Draggable" class="ext-link"><span class="icon"></span>http://wiki.jqueryui.com/w/page/12137878/Draggable</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2013 01:43PM UTC by <span class="author">jonez</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Actually this is a better fiddle: <a href="http://jsfiddle.net/W7UxN/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/W7UxN/2/</a></p><p>Two elements, both in the same container with the same grid 20,20. Neither element can have their edges aligned because they init at off-grid increments.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2013 01:49PM UTC by <span class="author">jonez</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Replying to [comment:3 scott.gonzalez]:&#92;
&gt; FWIW, the grid option is going away with the interactions rewrite. However, there is a beforeStart callback in the new API. See http://wiki.jqueryui.com/w/page/12137878/Draggable&#92;
When you say new API, what do you mean? I just tried the following and none fire.&#92;
&#92;
{{{&#92;
&#92;
	container.draggable({&#92;
		containment: &#39;parent&#39;,&#92;
		snap: true,&#92;
		snapTolerance: 10,&#92;
		grid: grid,&#92;
		beforeStart: function( )  {&#92;
			console.log( &#39;go1&#39; );&#92;
		}&#92;
	});&#92;
&#92;
	container.bind( &#39;beforestart&#39;, function( ) {&#92;
		console.log( &#39;go2&#39; );&#92;
	});&#92;
&#92;
	container.bind( &#39;beforeStart&#39;, function( ) {&#92;
		console.log( &#39;go3&#39; );&#92;
	});&#92;
}}}&#92;
</span> → <span class="change-field-new">1369317000874676</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:3 scott.gonzalez]:</p><blockquote> FWIW, the grid option is going away with the interactions rewrite. However, there is a beforeStart callback in the new API. See <a href="http://wiki.jqueryui.com/w/page/12137878/Draggable" class="ext-link"><span class="icon"></span>http://wiki.jqueryui.com/w/page/12137878/Draggable</a></blockquote><p>When you say new API, what do you mean? I just tried the following and none fire (1.10.3).</p><pre class="wiki">

	container.draggable({
		containment: 'parent',
		snap: true,
		snapTolerance: 10,
		grid: grid,
		beforeStart: function( )  {
			console.log( 'go1' );
		}
	});

	container.bind( 'beforestart', function( ) {
		console.log( 'go2' );
	});

	container.bind( 'beforeStart', function( ) {
		console.log( 'go3' );
	});
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2013 01:53PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I assume you didn't read the note at the top of the page I linked to:</p><blockquote> Note: This plugin is being rewritten for the 2.0 release. This documentation is about the rewrite, not the existing plugin.</blockquote>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2013 02:01PM UTC by <span class="author">jonez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:6 scott.gonzalez]:</p><blockquote> I assume you didn't read the note at the top of the page I linked to:  &gt; Note: This plugin is being rewritten for the 2.0 release. This documentation is about the rewrite, not the existing plugin.</blockquote><p>Sorry I skipped straight to the API methods. Is there any chance beforeStart could be added before 2.0? From your roadmap I'm assuming it will be a few months before 2.0 is released. If you are willing to accept patches I'd gladly provide the code.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2013 02:20PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>No new APIs will be accepted prior to the rewrite. You can implement a custom grid using the drag event.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
