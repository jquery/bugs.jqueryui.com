<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8134 (new $.Widget and _creatWidget should not require an element) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8133/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8135/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#8134</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">enhancement</span>
      <span class="ticket-resolution">(worksforme)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened February 24, 2012 06:12AM UTC</p>
      
        <p>Closed February 24, 2012 01:14PM UTC</p>
      
      
        <p>Last modified February 27, 2012 07:11PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">new $.Widget and _creatWidget should not require an element</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        fooblah
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.9.0">1.9.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.widget</td>
      
        <th>Version:</th>
      
      <td>git (not yet released)</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>It would be nice if $.Widget.prototype._createWidget did not require an element if none is provided.</p><p>Then if there was a $.Widget.prototype.setElement() that did the $.data setup and binding to remove so a preexisting element isn't assumed.  The element could be defined programmatically, set later (or changed).</p><pre class="wiki">
$.Widget.prototype._setElement: function (element) {
  this.element.unbind( "remove." + this.widgetName, $.proxy(this.destroy, this));
  this.element = $(element);
  $.data(this.element[0], this.widgetName, this);
  this.element.bind( "remove." + this.widgetName, $.proxy(this.destroy, this));
}
</pre><p>It would make things a lot nicer for people inserting widgets into the dom instead of just adding behavior to existing elements.  This way widgets could be responsible for creating their own dom instead of requiring scaffolding already exist in the dom.</p><p>Another option would be to have a _buildDom method which is called before _create which by default assumes an element gives developers a chance to do something totally custom for generating the dom.</p><p>Since the default $.widget.bridge always has an element to pass to _createWidget, this would not impact $(selector).myWidget() type instantiation.</p><p>Current workaround:</p><pre class="wiki">
  var w = new $.custom.myWidget(options, $('&lt;div&gt;'));
</pre><p>Define _setElement and in myWidget.prototype._create</p><pre class="wiki">
  this._setElement(JST[this.options.template](this.options));
</pre><p>I know I could just insert my template ''into'' a div or something but that somewhat defeats the purpose of using templates since I then have to manually add classes to element, know external to the widget the element type, etc.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (7)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2012 01:14PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This has been possible for over a year: <a href="https://github.com/jquery/jquery-ui/commit/cc90b440607a1af87c4abb8b2ee3325e96b0f5a1" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/commit/cc90b440607a1af87c4abb8b2ee3325e96b0f5a1</a></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2012 01:15PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Wrong commit, defaultElement came before that: <a href="https://github.com/jquery/jquery-ui/commit/3a0b617bb44565aacfa90c2ee20b293654d911c9" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-ui/commit/3a0b617bb44565aacfa90c2ee20b293654d911c9</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2012 01:25PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm not sure what you're trying to gain here. Are you trying to avoid invoking your template directly? You're not going to have default options or <code>_getCreateOptions()</code> mixed in by the time your template runs, so you're not really gaining much.</p><p>I don't follow your statement of "I know I could just insert my template into a div or something but that somewhat defeats the purpose of using templates since I then have to manually add classes to element, know external to the widget the element type, etc." You have to insert your template into the DOM at some point no matter what. Invoking your template <code>_createWidget()</code> instead of before the call to your widget doesn't change that at all.</p><p>We will also not support something like what you've suggested with <code>_setElement()</code> since we wouldn't support it ever being called after create.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2012 06:18PM UTC by <span class="author">fooblah</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">That code hasn&#39;t been merged into 1.8 so I didn&#39;t see that.&#92;
&#92;
However, defaultElement doesn&#39;t accomplish what I&#39;m suggesting anyway.  The widget should be able to define its own markup *on instantiation* as *a function* its options.&#92;
&#92;
Setting defaultWidget can only be done via options (which means something other than the widget handles its rendering) or by subclassing and overriding defaultElement.  However then you can&#39;t render the dom as a function of options during instantiation.&#92;
&#92;
About your  concern with _setElement, I&#39;m not sure why rerendering is such a big deal, it is pretty essential for staying synchronized with external events.  render() is one of the key features of Backbone.View for example (although it doesn&#39;t allow you to replace the top level element either).&#92;
&#92;
In any case, something like _render that is called automatically before _init would at least allow for the widget to manage its own layout concerns.&#92;
&#92;
About your question about my statement saying I could insert my updated markup into a div, yes I do have to do that call no matter what, the point is the widget should be able to make that call itself, not some external code.</span> → <span class="change-field-new">1330366901661491</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">That code hasn&#39;t been merged into 1.8 so I didn&#39;t see that.&#92;
&#92;
However, defaultElement doesn&#39;t accomplish what I&#39;m suggesting anyway.  The widget should be able to define its own markup *on instantiation* as *a function* its options.&#92;
&#92;
Setting defaultWidget can only be done via options (which means something other than the widget handles its rendering) or by subclassing and overriding defaultElement.  However then you can&#39;t render the dom as a function of options during instantiation.&#92;
&#92;
This basically mandates a poor separation of concerns.  If you are doing server side rendering, bad separation of concerns is the norm.  However with client side templating, there is an opportunity to have the widget handle all it&#39;s own business but the way defaultElement works, that isn&#39;t an option.&#92;
&#92;
About your  concern with _setElement, I&#39;m not sure why rerendering is such a big deal, it is pretty essential for staying synchronized with external events.  render() is one of the key features of Backbone.View for example (although it doesn&#39;t allow you to replace the top level element either).&#92;
&#92;
In any case, something like _render that is called automatically before _init would at least allow for the widget to manage its own layout concerns.&#92;
&#92;
About your question about my statement saying I could insert my updated markup into a div, yes I do have to do that call no matter what, the point is the widget should be able to make that call itself, not some external code.</span> → <span class="change-field-new">1330367075653623</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>That code hasn't been merged into 1.8 so I didn't see that.</p><p>However, defaultElement doesn't accomplish what I'm suggesting anyway.  The widget should be able to define its own markup *on instantiation* as *a function* its options.</p><p>Setting defaultWidget can only be done via options (which means something other than the widget handles its rendering) or by subclassing and overriding defaultElement.  However then you can't render the dom as a function of options during instantiation.</p><p>This basically mandates a poor separation of concerns.  If you are doing server side rendering, bad separation of concerns is the norm.  However with client side templating, there is an opportunity to have the widget handle all it's own business but the way defaultElement works, that isn't an option.</p><p>About your  concern with _setElement, I'm not sure why rerendering is such a big deal, it is pretty essential for staying synchronized with external events.  render() is one of the key features of Backbone.View for example (although it doesn't allow you to replace the top level element either).  I understand there is some bookkeeping involved with this.element but that bookkeeping can just get updated right?</p><p>In any case, something like _render that is called automatically before _init would at least allow for the widget to manage its own layout concerns.</p><p>About your question about my statement saying I could insert my updated markup into a div, yes I do have to do that call no matter what, the point is the widget should be able to make that call itself, not some external code.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2012 06:21PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Nothing is stopping you from using a default element of <code>&lt;div&gt;</code> or whatever makes sense for the specific widget and just populating the contents using a template option on creation.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2012 06:25PM UTC by <span class="author">fooblah</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Replying to [comment:5 scott.gonzalez]:&#92;
&gt; Nothing is stopping you from using a default element of `&lt;div&gt;` or whatever makes sense for the specific widget and just populating the contents using a template option on creation.&#92;
&#92;
Absolutely, that&#39;s what I was saying earlier.   However what if I don&#39;t want a div?  Or I want to set classes on that top level div?  I can&#39;t do that with a template.</span> → <span class="change-field-new">1330367216938608</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:5 scott.gonzalez]:</p><blockquote> Nothing is stopping you from using a default element of <code>&lt;div&gt;</code> or whatever makes sense for the specific widget and just populating the contents using a template option on creation.</blockquote><p>Absolutely, that's what I was saying earlier.   However what if I don't want a div (at instantiation)?  Or I want to set classes on that top level div (at instantiation)?  I can't do that with a template.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2012 07:11PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Does this work for you? <a href="http://jsbin.com/uhuluj/edit#javascript" class="ext-link"><span class="icon"></span>http://jsbin.com/uhuluj/edit#javascript</a></p><p>The one problem I see with that implementation is that you don't get the merged options.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
