<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#15119 (this.currentContainer points to the wrong container in ui.sortable._mouseDrag().) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/15118/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/15120/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#15119</a>
      <span class="ticket-status">new</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">()</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened December 23, 2016 03:57PM UTC</p>
      
      
        <p>Last modified December 23, 2016 03:57PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">this.currentContainer points to the wrong container in ui.sortable._mouseDrag().</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        kevinmkr
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.sortable</td>
      
        <th>Version:</th>
      
      <td>1.12.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>This is my first bug report so please be kind.  I've tried to narrow it down to the best of my abilities and have provided a test case that shows the behavior that results from this bug.</p><h2>Brief Description:</h2><p>Let's say you have some <code>ui.draggable</code> items and a <code>ui.sortable</code> drop area for those items.  Let's say, also, that one of the items in the <code>ui.sortable</code> drop area is an instance of <code>ui.tabs</code> containing 2 (or more) tabs.  Let's, further, say that each tab contains its own <code>ui.sortable</code> drop area.  Lastly, the items being dragged should have the ability to be dropped in the main <code>ui.sortable</code> area or any of the tab's drop areas and those dropped items should also be freely draggable between the tab's drop area and the main drop area.</p><h2>Steps to Recreate:</h2><p>I've created a <a href="https://jsfiddle.net/5yy2n4o1/" class="ext-link"><span class="icon"></span>fiddle</a> to demonstrate the issue.</p><p>1) Drag the green block straight down. Note that you must drag it past the 3rd blue block before the placeholder will appear.</p><p>2) Change to "Tab 2". Drag the green block straight down once again. Note that now you only need to drag the green block past the 1st blue block before the placeholder appears.</p><p>3) You can also experiment by dragging the blue blocks onto or off of the tabs in order to lengthen/shorten the height on either tab. In all cases, the height of the hidden tab ALWAYS dictates how far down you must drag the green block before being allowed to drop. You could, alternatively, experiment by dragging the green block 2-3 inches to the right before dragging it down. This also avoids the phantom tabs overlay.</p><h2>Affected Versions:</h2><p><strong>OS</strong>: Windows 7 and Windows 10 tested and found to manifest the issue.</p><p><strong>Browsers</strong>: IE 11, Firefox 50, Chrome 55 have all been tested and found to manifest the issue.</p><h2>Discoveries so far:</h2><p>The issue appears to be, simply, that the main <code>ui.sortable</code> object thinks you're hovering above the hidden tab when you are actually nowhere close to it.</p><p>While this underlying issue appears to be present in all versions of jQuery-UI, I've noted that the visual manifestation of the issue (having to drag the green block past the 3rd blue block as described in Steps To Recreate Step 1) began with the addition of the following code in <code>_mouseDrag()</code>:</p><pre class="wiki">
if ( item.instance !== this.currentContainer ) {
        continue;
}
</pre><p>However, that code does not seem to be responsible for the bug.  It just makes its existence more prominent.  Removing that code will cause the test case to visually function as expected.  However, some console logging within <code>_mouseDrag()</code> of <code>this.currentContainer</code> will demonstrate that the hovering green block still thinks it's above the hidden tab while hovering above the first 3 blue blocks.</p><p>Further evidence to bolster this assumption is the fact that, if you release a green block over the first blue block, it gets added to the hidden tab.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (0)</summary>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
