<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8592 (Datepicker disappears upon scroll) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8591/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8593/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#8592</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(notabug)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened September 22, 2012 12:55PM UTC</p>
      
        <p>Closed September 22, 2012 07:28PM UTC</p>
      
      
        <p>Last modified October 19, 2012 04:41PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Datepicker disappears upon scroll</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        glthomas224
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.9.0">1.9.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.datepicker</td>
      
        <th>Version:</th>
      
      <td>1.8.23</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>This bug is very easy to reproduce.  Simply go to the jquery example at <a href="http://jqueryui.com/demos/datepicker/" class="ext-link"><span class="icon"></span>http://jqueryui.com/demos/datepicker/</a> and then click on the text input field to make the datepicker appear.  Now if the user attempts to scroll their browser window the datepicker will disappear.  Naturally the user would think that in order to get the datepicker to reappear they would need to click into the input form field again. However this only works if the user causes the input field to blur first like by clicking outside of the input field.  Only then can the datepicker be made to reappear.  </p><p>I've discovered a way to fix this though.  On line 843 of the jquery.ui.datepicker.js file resides the _checkExternalClick: function.  Within that function is the line:</p><p>$.datepicker._hideDatepicker();</p><p>Simply wrap that line so that it looks like this:</p><p>$('html').click(function () {</p><p>     $.datepicker._hideDatepicker();</p><p>});</p><p>the whole function should now look like this:</p><p>_checkExternalClick: function (event) {</p><p>     if (!$.datepicker._curInst)</p><p>          return;</p><p>     var $target = $(event.target),</p><p>     inst = $.datepicker._getInst($target[0]);</p><p>     if ((($target[0].id != $.datepicker._mainDivId &&</p><p>	$target.parents('#' + $.datepicker._mainDivId).length == 0 &&</p><p>	!$target.hasClass($.datepicker.markerClassName) &&</p><p>	!$target.hasClass($.datepicker._triggerClass) &&</p><p>	$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI)))||($target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst != inst))</p><p>             $('html').click(function () {</p><p>                  $.datepicker._hideDatepicker();</p><p>             });</p><p>            return;</p><p>        },</p><p>Now when the user clicks on the scroll bar of a browser it won't inadvertently close the datepicker because the scrollbar is considered to be outside the "html" object.  Voila!  I tested in IE, Chrome, and <a href="/wiki/FireFox">FireFox</a>.  Enjoy.  Hopefully you can patch this into the next release!</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (3)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 22, 2012 04:50PM UTC by <span class="author">glthomas224</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">After some further testing I determined that this is not a fix to the bug that I described.  I have continued to try and patch this bug and here is what I have come up with for a solution.  It&#39;s kind of ugly but there may be some more elegant ways to achieve the desired behavior.  Essentially we want the datepicker to stay visible if we scroll using the mouse or keyboard.  Clicking on the scrollbar causes the datepicker to disappear.  &#92;
&#92;
In the code I pasted above, replace this:&#92;
$(&#39;html&#39;).click(function () {&#92;
    $.datepicker._hideDatepicker();&#92;
});&#92;
&#92;
with the following segment of code:&#92;
if (!$target.is(&#39;html&#39;)) {&#92;
    $.datepicker._hideDatepicker();&#92;
}&#92;
&#92;
Once this is done, clicking on the browser scrollbar while the datepicker is visible will not hide the datepicker.  However any space on the page between the body edge and the window edge is indistinguishable from the scrollbar since that space is considered to be an object of HTMLhtmlElement.  The scroll bar is also considered to be an object of HTMLhtmlElement.  So by creating a div container that fills this extra space between the body edge and the window edge the only thing left that the user can click that is considered to be an object of HTMLhtmlElement is the scrollbar.  So here is the extra code needed to do this.&#92;
&#92;
After the &lt;body&gt; tag on your page add:&#92;
&lt;div id=&quot;underneath&quot; style=&quot;position:absolute; width:0px; height:0px; z-index:-10000; top:0; overflow:hidden; background-color:transparent;&quot;&gt;&lt;/div&gt;&#92;
&#92;
In your style sheet or within your &lt;style&gt; tag add this:&#92;
html{overflow-x:hidden}&#92;
&#92;
Finally just prior to the &lt;/body&gt; tag add the following script&#92;
&lt;script type=&quot;text/javascript&quot;&gt;&#92;
    jq171(&#39;#underneath&#39;).css(&#39;height&#39;, jq171(document).height() + &#39;px&#39;);&#92;
    jq171(&#39;#underneath&#39;).css(&#39;width&#39;, jq171(window).width() + &#39;px&#39;);&#92;
    jq171(&#39;#underneath&#39;).css(&#39;left&#39;, &quot;0&quot;);&#92;
&#92;
    jq171(window).resize(function () {&#92;
        if (jq171(window).width() &lt; jq171(&#39;body&#39;).width()) {&#92;
            jq171(&#39;html&#39;).css(&#39;overflow-x&#39;, &#39;scroll&#39;);&#92;
        }&#92;
        else {&#92;
            jq171(&#39;html&#39;).css(&#39;overflow-x&#39;, &#39;hidden&#39;);&#92;
        }&#92;
        jq171(&#39;#underneath&#39;).css(&#39;width&#39;, jq171(window).width() + &#39;px&#39;);&#92;
    });&#92;
&lt;/script&gt;&#92;
&#92;
Hopefully someone can come up with a more elegant solution, but this gets the job done for my needs.&#92;
</span> → <span class="change-field-new">1348332995137569</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>After some further testing I determined that this is not a fix to the bug that I described.  I have continued to try and patch this bug and here is what I have come up with for a solution.  It's kind of ugly but there may be some more elegant ways to achieve the desired behavior.  Essentially we want the datepicker to stay visible if we scroll using the mouse or keyboard.  Clicking on the scrollbar causes the datepicker to disappear.  </p><p>In the code I pasted above, replace this:</p><p>$('html').click(function () {</p><p>    $.datepicker._hideDatepicker();</p><p>});</p><p>with the following segment of code:</p><p>if (!$target.is('html')) {</p><p>    $.datepicker._hideDatepicker();</p><p>}</p><p>Once this is done, clicking on the browser scrollbar while the datepicker is visible will not hide the datepicker.  However any space on the page between the body edge and the window edge is indistinguishable from the scrollbar since that space is considered to be an object of HTMLhtmlElement.  The scroll bar is also considered to be an object of HTMLhtmlElement.  So by creating a div container that fills this extra space between the body edge and the window edge the only thing left that the user can click that is considered to be an object of HTMLhtmlElement is the scrollbar.  So here is the extra code needed to do this.</p><p>After the &lt;body&gt; tag on your page add:</p><p>&lt;div id="underneath" style="position:absolute; width:0px; height:0px; z-index:-10000; top:0; overflow:hidden; background-color:transparent;"&gt;&lt;/div&gt;</p><p>In your style sheet or within your &lt;style&gt; tag add this:</p><p>html{overflow-x:hidden}</p><p>Finally just prior to the &lt;/body&gt; tag add the following script:</p><p>&lt;script type="text/javascript"&gt;</p><p>    jq171('#underneath').css('height', jq171(document).height() + 'px');</p><p>    jq171('#underneath').css('width', jq171(window).width() + 'px');</p><p>    jq171('#underneath').css('left', "0");</p><p>    jq171(window).resize(function () {</p><p>        if (jq171(window).width() &lt; jq171('body').width()) {</p><p>            jq171('html').css('overflow-x', 'scroll');</p><p>        }</p><p>        else {</p><p>            jq171('html').css('overflow-x', 'hidden');</p><p>        }</p><p>        jq171('#underneath').css('width', jq171(window).width() + 'px');</p><p>    });</p><p>&lt;/script&gt;</p><p>Hopefully someone can come up with a more elegant solution, but this gets the job done for my needs.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 22, 2012 07:28PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The datepicker should not stay open while the user scrolls.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 19, 2012 04:41PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/8593">#8593</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
