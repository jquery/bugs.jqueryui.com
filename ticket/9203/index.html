<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#9203 (Search cancelled when triggered on select (regression from 1.8)) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/9202/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/9204/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#9203</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened April 03, 2013 03:51PM UTC</p>
      
        <p>Closed April 18, 2013 08:35AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Search cancelled when triggered on select (regression from 1.8)</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        BigBeaule
      </td>
      <th>Owned by:</th>
      <td>BigBeaule</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.autocomplete</td>
      
        <th>Version:</th>
      
      <td>1.10.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>It's now impossible to trigger another search during the select callback. I have a single input field that will first show suggestions for a property A. Once selected, the input is supposed to show suggestions values for the property A right away: </p><pre class="wiki">
.autocomplete{
    minLength: 0,
    source: function( request, response ) {
        ... some Ajax source that is working fine
    },
    select: function( event, ui ) {
        ... adapted for ticket
        if ( A === null) 
            // Switch to property value selection
            A = ui.item.value;
            input.autocomplete('search');
            return false;
        }

        VAL = ui.item.value;
        return true;
    }
});
</pre><p>While searching the cause, I found that it's happening in the usage of the newly menu widget. If you look at line 284 (handler when selecting a value):</p><pre class="wiki">
if ( false !== this._trigger( "select", event, { item: item } ) ) {
	this._value( item.value );
}
// reset the term after the select event
// this allows custom select handling to work properly
this.term = this._value();

this.close( event );
this.selectedItem = item;
</pre><p>The close event is called after the trigger on the select callback and since close is setting cancelSearch at true on any case, I can't prevent my triggered search to be cancelled. I notice that both putting the line this.close( event ) before the select trigger or using this._close( event ) instead is fixing my problem, but I haven't done enough tests to see if there's any other consequences.</p><p>Working jsFiddle (only have to switch between jquery UI 1.8.9 and 1.9.2 to see the difference) <a href="http://jsfiddle.net/DYWZG/13/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/DYWZG/13/</a></p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (6)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2013 08:37PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ BigBeaule</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I don't see any difference in behavior with 1.8.9 and 1.9.2 in that fiddle. Also, it's not clear what steps you want us to take to reproduce the problem. Can you clearly describe the steps to reproduce, the expected behavior, and the actual behavior?</p><p>Why are you running a search after selecting a value? Why is that dependent on a previous value having already been selected? There is no context to what is happening and I find this fiddle extremely confusing.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2013 08:54PM UTC by <span class="author">BigBeaule</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The difference between the 2 version is that after selecting the first property (A for example), the autocomplete input should be reopened right away with the possible values of property A (A1, A2 and A3). It works with jQuery UI 1.8.5 or 1.8.9 (ugly display because of the css, but still) while the automatic reopening is aborted with jQuery UI &gt; 1.9.</p><p>My utilization context is that a user must give a desired property and its desired value to my application. I use the same autocomplete input to provide the suggested properties and its values. </p><p>The current glitch is just that as soon as the property is selected (I.E. an item is selected in the autocomplete suggestions), I trigger a search on the same autocomplete in the select callback in order to retrieve and display all the values for the selected property without having the user do anything in the input field. The retrieval is working fine but the reopening of the suggestions menu is cancelled because of the order of the internal trigger('select') and this.close( event ).</p><p>For the fix, I was suggesting to use _close instead. I found that it was causing some glitches but putting the this.close( event ) before the trigger('select') seems to be ok.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2013 09:01PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">&gt; The difference between the 2 version is that after selecting the first property (A for example), the autocomplete input should be reopened right away with the possible values of property A (A1, A2 and A3). It works with jQuery UI 1.8.5 or 1.8.9 (ugly display because of the css, but still) while the automatic reopening is aborted with jQuery UI &gt; 1.9.&#92;
&#92;
I&#39;m not seeing that behavior with 1.8.9: http://jsfiddle.net/DYWZG/14/&#92;
&#92;
&gt; My utilization context is that a user must give a desired property and its desired value to my application. I use the same autocomplete input to provide the suggested properties and its values.&#92;
&#92;
That&#39;s a bit confusing. Also, at least from the fiddle, it&#39;s impossible to then go back and choose a different top level location. Why can&#39;t use just use a timeout if the closing is a problem?</span> → <span class="change-field-new">1365024956399962</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <blockquote> The difference between the 2 version is that after selecting the first property (A for example), the autocomplete input should be reopened right away with the possible values of property A (A1, A2 and A3). It works with jQuery UI 1.8.5 or 1.8.9 (ugly display because of the css, but still) while the automatic reopening is aborted with jQuery UI &gt; 1.9.</blockquote><p>I'm not seeing that behavior with 1.8.9: <a href="http://jsfiddle.net/DYWZG/14/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/DYWZG/14/</a></p><blockquote> My utilization context is that a user must give a desired property and its desired value to my application. I use the same autocomplete input to provide the suggested properties and its values.</blockquote><p>That's a bit confusing. Also, at least from the fiddle, it's impossible to then go back and choose a different top level location. Why can't you just use a timeout if the closing is a problem?</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2013 09:32PM UTC by <span class="author">BigBeaule</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I was using the option jQuery 1.x (edge) coupled with jQuery UI 1.8.5 and it was reproducible only cause of a js error happening I guess. My application uses an ajax source that seems to be returning just after the normal close and since they are handled differently in 1.8 vs 1.9, the behaviour is not the same. I'll try to think of a way to put that in fiddle tomorrow.</p><p>I must add that my application offer all the feature to go back and forth between selected properties and their values of course. I just put a minimalist display here.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2013 09:35PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 18, 2013 08:35AM UTC by <span class="author">trac-o-bot</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Because we get so many tickets, we often need to return them to the initial reporter for more information. If that person does not reply within 14 days, the ticket will automatically be closed, and that has happened in this case. If you still are interested in pursuing this issue, feel free to add a comment with the requested information and we will be happy to reopen the ticket if it is still valid. Thanks!</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
