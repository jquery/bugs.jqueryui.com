<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#10581 (autocomplete: item.value skips zero index) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/10580/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/10582/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#10581</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(notabug)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened September 01, 2014 11:47PM UTC</p>
      
        <p>Closed September 02, 2014 12:46PM UTC</p>
      
      
        <p>Last modified September 02, 2014 10:45PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">autocomplete: item.value skips zero index</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        gadelat
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.autocomplete</td>
      
        <th>Version:</th>
      
      <td>1.11.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I got something like this:</p><pre class="wiki">
$('#form-name').autocomplete({
  source: function(request, response) {
    $.ajax({
      dataType: "json",
      url: "private_url",
      success: function(data) {
        response($.map(data, function(item, index) {
          return {
            label: 'test',
            value: index
          }
        }));
      }
    })
  },
  select: function(event, ui) {
    console.log(ui.item.value);
  }
});
</pre><p>It worked fine in 1.10.4, but in 1.11.1 it outputs label instead  of value when selecting first item. When selected other than first item, it works fine. I guess jquery-ui v. 1.11.1 puts label into value if index &lt; 1</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (3)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 02, 2014 12:46PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ notabug</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This isn't a bug, since autocomplete doesn't support numbers. The number <code>0</code> fails the truthy check in <code>a || b</code>, the rest pass the test and are implicitly converted to strings.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 02, 2014 10:31PM UTC by <span class="author">gadelat</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Uhh, can you enlighten me in decision to stop supporting numbers anymore? It&#39;s INDEX for gods sake, it&#39;s supposed to be zero and pass whatever check there is. Now user can&#39;t reliably do this anymore:&#92;
&#92;
var users = {};&#92;
$(&#39;#form-name&#39;).autocompleteExt({&#92;
  source: function(request, response) {&#92;
    $.ajax({&#92;
      dataType: &quot;json&quot;,&#92;
      url: &quot;private_url&quot;,&#92;
      success: function(data) {&#92;
        users = data;&#92;
        response($.map(data, function(item, index) {&#92;
          return {&#92;
            label: item.name,&#92;
            value: index&#92;
          }&#92;
        }));&#92;
      }&#92;
    })&#92;
  },&#92;
  select: function(event, ui) {&#92;
    event.preventDefault();&#92;
    var user = users[ui.item.value];&#92;
      $(&#39;#property1&#39;).val(user.property1);&#92;
      $(&#39;#property2&#39;).val(user.property2);&#92;
      $(&#39;#property3&#39;).val(user.property3);&#92;
      $(&#39;#property4&#39;).val(user.property4);&#92;
  }&#92;
});&#92;
&#92;
I can easily skip this check by doing String(index), but one should not be supposed to do that, indexes are not supposed to be strings just to pass illogical condition in library.</span> → <span class="change-field-new">1409697201523723</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">Uhh, can you enlighten me in decision to stop supporting numbers anymore? It&#39;s INDEX for gods sake, it&#39;s supposed to be zero and pass whatever check there is. Now user can&#39;t reliably do this anymore:&#92;
&#92;
{{{&#92;
var users = {};&#92;
$(&#39;#form-name&#39;).autocompleteExt({&#92;
  source: function(request, response) {&#92;
    $.ajax({&#92;
      dataType: &quot;json&quot;,&#92;
      url: &quot;private_url&quot;,&#92;
      success: function(data) {&#92;
        users = data;&#92;
        response($.map(data, function(item, index) {&#92;
         return {&#92;
            label: item.name,&#92;
            value: index&#92;
          }&#92;
        }));&#92;
      }&#92;
    })&#92;
  },&#92;
  select: function(event, ui) {&#92;
    event.preventDefault();&#92;
    var user = users[ui.item.value];&#92;
      $(&#39;#property1&#39;).val(user.property1);&#92;
      $(&#39;#property2&#39;).val(user.property2);&#92;
      $(&#39;#property3&#39;).val(user.property3);&#92;
      $(&#39;#property4&#39;).val(user.property4);&#92;
  }&#92;
});&#92;
}}}&#92;
I can easily skip this check by doing String(index), but one should not be supposed to do that, indexes are not supposed to be strings just to pass illogical condition in library.</span> → <span class="change-field-new">1409697436911979</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment2:</th>
                  <td>
                    
                      <span class="change-field-old">Uhh, can you enlighten me in decision to stop supporting numbers anymore? It&#39;s INDEX for gods sake, it&#39;s supposed to be zero and pass whatever check there is. Now user can&#39;t reliably do this anymore:&#92;
&#92;
{{{&#92;
var users = {};&#92;
$(&#39;#form-name&#39;).autocomplete({&#92;
  source: function(request, response) {&#92;
    $.ajax({&#92;
      dataType: &quot;json&quot;,&#92;
      url: &quot;private_url&quot;,&#92;
      success: function(data) {&#92;
        users = data;&#92;
        response($.map(data, function(item, index) {&#92;
         return {&#92;
            label: item.name,&#92;
            value: index&#92;
          }&#92;
        }));&#92;
      }&#92;
    })&#92;
  },&#92;
  select: function(event, ui) {&#92;
    event.preventDefault();&#92;
    var user = users[ui.item.value];&#92;
      $(&#39;#property1&#39;).val(user.property1);&#92;
      $(&#39;#property2&#39;).val(user.property2);&#92;
      $(&#39;#property3&#39;).val(user.property3);&#92;
      $(&#39;#property4&#39;).val(user.property4);&#92;
  }&#92;
});&#92;
}}}&#92;
I can easily skip this check by doing String(index), but one should not be supposed to do that, indexes are not supposed to be strings just to pass illogical condition in library.</span> → <span class="change-field-new">1409697844218375</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>Uhh, can you enlighten me in decision to stop supporting numbers anymore? It's INDEX for gods sake, it's supposed to be zero and pass whatever check there is. Now user can't reliably do this anymore:</p><pre class="wiki">
var users = {};
$('#form-name').autocomplete({
  source: function(request, response) {
    $.ajax({
      dataType: "json",
      url: "private_url",
      success: function(data) {
        users = data;
        response($.map(data, function(item, index) {
         return {
            label: item.name,
            value: index
          }
        }));
      }
    })
  },
  select: function(event, ui) {
    event.preventDefault();
    var user = users[ui.item.value];
      $('#property1').val(user.property1);
      $('#property2').val(user.property2);
      $('#property3').val(user.property3);
      $('#property4').val(user.property4);
  }
});
</pre><p>I can easily skip this check by doing String(index), but one should not be supposed to do that, indexes are not supposed to be strings just to pass this truth check in library.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 02, 2014 10:45PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We didn't decide to stop supporting it. It was never supported in the first place, it just happened to work.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
