<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#9122 (Dialog: Removing modal dialog with iframe blocks focus in IE9 / IE10) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/9121/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/9123/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#9122</a>
      <span class="ticket-status">open</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">()</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened February 26, 2013 12:58AM UTC</p>
      
      
        <p>Last modified September 08, 2014 09:10AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Dialog: Removing modal dialog with iframe blocks focus in IE9 / IE10</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        zanadar84
      </td>
      <th>Owned by:</th>
      <td>zanadar84</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.dialog</td>
      
        <th>Version:</th>
      
      <td>1.10.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I recognize that you want a jsfiddle or jsbin but my example is not easily written using these tools due to the dependence of the iframe src...</p><p>Steps to reproduce with example (might take a couple of attempts as it is not 100% consistent):</p><p>*Load IETest.htm in IE9 and ensure that Browser Mode and Document Mode is set to IE9 standards using debug (F12) (Seems to work ok in ie8 mode but other things do not such as ms-filter css so that is not an option for us!)</p><p>*Click "Show Dialog"</p><p>*(Optional) Put the input focus in the dialog's text input</p><p>*Close the dialog</p><p>*Attempt to put the input focus in the main form's text input (You can't, nor can you type into it)</p><p>Potential fix:</p><p>Clear the src of iframe prior to destroy and remove in jQuery ui.</p><p>The following simple html (save as a file called IE9Test.htm) reproduces the issue:</p><p>----------START IE9TEST.HTM----------</p><pre class="wiki">
&lt;!doctype html&gt;
&lt;html lang="en"&gt;
&lt;head id="Head1" runat="server"&gt;
	&lt;meta charset="utf-8" /&gt;
	&lt;title&gt;IE9Test&lt;/title&gt;
	&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"&gt;&lt;/script&gt;
	&lt;link rel="Stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form id="form1" runat="server"&gt;		
		&lt;div&gt;
			&lt;input id="TextBox1" type="text" /&gt;
			&lt;br /&gt;
			&lt;a id="Show" href="#"&gt;Show Dialog&lt;/a&gt;
		&lt;/div&gt;

		&lt;script type="text/javascript"&gt;
			function ShowButton_Click(e) {
				var dialog = $('&lt;div id="jqueryuidialog" &gt;&lt;iframe width="100%" height="100%" frameborder="0"&gt;&lt;/iframe&gt;&lt;/div&gt;').hide();
				var frame = dialog.children("iframe");
				frame.attr("src", "IE9Test.htm");
				dialog.dialog({ modal: true, autoOpen: false, title: "", width: 600, height: 600 });
				dialog.dialog('open');
				dialog.bind('dialogclose', function(){
					//frame.attr('src', 'about:blank'); //uncomment this line to fix input bug
					jQuery(this).dialog('destroy').remove(); // this line causes error, without it we have no error but we collect dialog iframes in DOM
				});
				
				e.stopPropagation();
			}

			jQuery(document).ready(new function() {
				jQuery("#Show").click(ShowButton_Click);
			});
		&lt;/script&gt;

	&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>----------END IE9TEST.HTM----------</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (8)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 26, 2013 02:46AM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ zanadar84</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi zanadar84,</p><p>Thanks for taking the time to contribute to the jQuery UI project.  I'm having trouble following your example so a jsFiddle or JS Bin would be helpful.  You actually can test iframes by simply pointing one test case at another, see <a href="http://jsfiddle.net/tj_vantoll/kGYQm/." class="ext-link"><span class="icon"></span>http://jsfiddle.net/tj_vantoll/kGYQm/.</a>  The same technique is possible on JS Bin as well.</p><p>Thanks.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 26, 2013 03:01AM UTC by <span class="author">zanadar84</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks, i wasn't aware of that feature :)</p><p><a href="http://jsfiddle.net/GwbAS/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/GwbAS/</a></p><p>Click "Show Dialog" put the focus in the input text box then close the dialog.</p><p>Attempt to enter text in the main input text box and you will be unable to get focus in the box or add text.</p><p>NB: Make sure IE9 is running in IE9 mode for both browser and document mode under F12 debug tools!</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 26, 2013 04:02AM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks.</p><p>I can get focus in the textbox it just seems to take 2 clicks for some reason.  I won't have the chance to look into this further tonight but this does seem like it might be related to <a href="/ticket/9067">#9067</a>.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 26, 2013 04:56AM UTC by <span class="author">zanadar84</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Of 3 systems here running Windows 7 + IE9 (Fully windows updated), 2 of them fail to get focus in the text box at all after only 1 or two dialog open/closes, the third generally takes more than 2 dialog open/closes to cause the error.</p><p>Sooner or later though they all break to the point of not being able to get focus in the text box at all.</p><p>At this point, opening and closing the dialog restores the input's functionality.</p><p>I believe this is a IE9 bug, however setting the iframe src to 'about:blank' prior to destroying the dialog resolves the issue.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2013 03:25AM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">Destroy/Remove Dialog created from iframe causes IE9 input issue</span> → <span class="change-field-new">Dialog: Removing modal dialog with iframe blocks focus in IE9 / IE10</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Reduced and verified against master: <a href="http://jsfiddle.net/tj_vantoll/GwbAS/10/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/tj_vantoll/GwbAS/10/</a></p><p>This, is an odd one.  The bug occurs in IE9 & IE10.  It does not occur in IE7, IE8, Firefox, Chrome, Safari, or Opera.  On the test case give the input in the dialog focus, close it, then attempt to give the input on the main page focus.  You cannot do it in IE9 & 10.  Although occasionally after a few clicks it will work.</p><p>Not sure what's going on here. </p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2013 06:06AM UTC by <span class="author">zanadar84</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Note that the workaround/fix is to set the src on the iframe to 'about:blank' before removing it!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2013 06:24AM UTC by <span class="author">zanadar84</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I wonder if this is a jQuery core issue, however my testing seems to indicate that it is not.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 08, 2014 09:10AM UTC by <span class="author">alerde</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This issue is a bug in IE9+ and reproducible without jquery. However, the proposed workaround does fine.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
