<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#15103 (Make an element draggable can lead to unfocusable elements being focused on click (mouseup) in IE11) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/15102/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/15104/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#15103</a>
      <span class="ticket-status">new</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">()</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened November 21, 2016 11:00PM UTC</p>
      
      
        <p>Last modified November 21, 2016 11:00PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Make an element draggable can lead to unfocusable elements being focused on click (mouseup) in IE11</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        JoolsCaesar
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.draggable</td>
      
        <th>Version:</th>
      
      <td>1.12.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>When child elements of focusable elements have certain CSS properties, those child elements become focusable in IE11. This is a bug with IE11 that Microsoft have no intention of fixing. <a href="https://connect.microsoft.com/IE/feedback/details/2499233/ie11-elements-with-display-inline-block-which-are-children-of-focusable-elements-can-be-given-focus-even-if-they-are-not-themselves-focusable" class="ext-link"><span class="icon"></span>https://connect.microsoft.com/IE/feedback/details/2499233/ie11-elements-with-display-inline-block-which-are-children-of-focusable-elements-can-be-given-focus-even-if-they-are-not-themselves-focusable</a></p><p>The problem often isn't noticeable unless you have css focus highlighting as described in the bug.</p><p>jQuery UI's draggable has a piece of code where it focuses draggable elements on mouse up:</p><pre class="wiki">
_mouseUp: function( event ) {
   ...
   // Only need to focus if the event occurred on the draggable itself, see #10527
   if ( this.handleElement.is( event.target ) ) {
      
      // The interaction is over; whether or not the click resulted in a drag,
      // focus the element
      this.element.trigger("focus");
   }

</pre><p>In most browsers this has the desired effect, focusing the closest focusable element, otherwise having no effect. However in IE11 it is not unusual for this to lead to the focusing of an element that should not be focusable. While the focusabilty is not jquery UI's fault, the end result is worse than if the item was not draggable, because a programatic focus is treated by IE11 as though it was a tab-focus and triggers auto scrolling.</p><p>See this jsfiddle as an example:</p><p><a href="https://jsfiddle.net/JoolsCaesar/ttbzseyn/" class="ext-link"><span class="icon"></span>https://jsfiddle.net/JoolsCaesar/ttbzseyn/</a></p><p>Scroll the div until you can see the text "Inner bottom".</p><p>Click the text and it will auto scroll the content back to the top.</p><p>This does not occur if you comment out the line making it draggable.</p><p>See this abstract of the relevant code which merely calls focus() on mouseup:</p><p><a href="https://jsfiddle.net/JoolsCaesar/rfs49p56/" class="ext-link"><span class="icon"></span>https://jsfiddle.net/JoolsCaesar/rfs49p56/</a></p><p>Follow the same steps as above and observe the same pattern.</p><p>The workaround I'm currently using is to change the line of code that does the focussing, to first check that the element it's focusing should be focusable:</p><pre class="wiki">
that.element.closest(':focusable').focus();
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (0)</summary>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
