<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8218 (Drag event firing even when draggable has not moved. ui.position is updating even if item did not move along axis.) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8217/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8219/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#8218</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(worksforme)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened March 24, 2012 11:48PM UTC</p>
      
        <p>Closed March 25, 2012 01:02PM UTC</p>
      
      
        <p>Last modified March 28, 2012 08:41PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Drag event firing even when draggable has not moved. ui.position is updating even if item did not move along axis.</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        sp2
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.9.0">1.9.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.draggable</td>
      
        <th>Version:</th>
      
      <td>1.8.18</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>There are lots of situations where a mouse down on a draggable, and a slight drag will not actually move a draggable. Examples: draggable is constrained, has an axis setting or draggable has a grid. In these situations, even if the object does not move, the start, drag and stop events still fire, and drag constantly fires while moving cursor, even though object does not move. Worse yet, the ui.originalPosition setting appears to be set sort of randomly to begin with, and ui.position is showing a change along the x axis, even when axis is constrained.</p><p>See <a href="http://jsfiddle.net/spekary/JxRYP/," class="ext-link"><span class="icon"></span>http://jsfiddle.net/spekary/JxRYP/,</a> based on jQuery UI example code, modified to have a grid and axis setting.</p><p>Steps to reproduce:</p><p>1) Click top text and move cursor slightly, then release. Will show start, drag and stop events firing even though item has not moved.</p><p>2) Click top text and drag down about 100 pixels. Click again and drag up. Note that 'drag from' text taken from ui.originalPosition appears random.</p><p>3) Click top text and drag to right. Note that 'drag to' left coordinate is changing, taken from ui.position.left, even though object is not moving left or right.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (4)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 25, 2012 01:02PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This is correct. The events occur every time a drag can happend the position indicates where the user is trying to move to the item to.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 25, 2012 06:42PM UTC by <span class="author">sp2</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Bear with me a bit while I push back on that a little. Perhaps I have a different expectation of what the drag event is supposed to be. </p><p>I do see that the description in the documentation is 'This event is triggered when the mouse is moved during the dragging.' I guess my expectation is that the event should be triggered when the item is moved, not when the mouse is moved, since there are other ways to track mouse move events. I am not sure why I would want to see drag events constantly if no drag happened. By setting a grid, I purposely am saying, 'Don't move until you go a certain distance.' Why would I want to know that the user tried to move it, but it didn't move yet because the user hadn't dragged far enough?</p><p>Re: ui.position, if I set an axis, why would I want to know in the drag event what would have happened if I didn't specify an axis setting? It is strange to me that ui.position.left is changing if I set axis to 'y'. In addition, if I have an axis setting of 'y', and have a grid setting of '5', and I drag to the right, I see multiples of 5 in ui.position.left, even though it doesn't move in that direction. I would think the developer would want to know the actual position of the draggable, not a hypothetical position if the axis value had not been set.</p><p>Finally, is ui.originalPosition supposed to be valid, and what should it be set to? In particular, I am noticing that the first time you drag, it is set correctly for drag event and stop event. But if you click on the same item and drag it again, it gets set to what appears to be a random value. I would think it should be set to the top-left of the draggable object at the moment the item is clicked the 2nd time.</p><p>If its still decided to keep the drag event as is, then I would request a 'move' event, that would fire each time the draggable moved, and only when the draggable actually moved, and would update ui.position with the new, actual, top-left location of the draggable, and would update ui.originalPosition to the top-left of the draggable each time the object was clicked.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 26, 2012 02:39PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This discussion will be way too large to have here. Feel free to post your questions/ideas on the <a href="http://forum.jquery.com" class="ext-link"><span class="icon"></span>forum</a> or the <a href="http://wiki.jqueryui.com/Draggable" class="ext-link"><span class="icon"></span>planning wiki</a> where we're redesigning the interaction plugins.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 28, 2012 08:41PM UTC by <span class="author">sp2</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>OK, I posted a question in the forums. I can see from the documentation that the behavior of originalPosition is not specified, and the Drag event could be interpreted as dragging on mouseMove events, but the documentation also says that for all events:</p><p>ui.position - current position of the helper as { top, left } object, relative to the offset element</p><p>And this simply isn't true if you set an axis constraint. So, bottom line, either the doc is wrong on this, or its a bug.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
