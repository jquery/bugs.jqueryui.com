<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#10671 (Pseudo-class :active gets suppressed by ui.sortable in Firefox) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/10670/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/10672/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#10671</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(patcheswelcome)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened October 22, 2014 12:44PM UTC</p>
      
        <p>Closed October 22, 2014 05:47PM UTC</p>
      
      
        <p>Last modified May 07, 2018 12:33PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Pseudo-class :active gets suppressed by ui.sortable in Firefox</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        Thomeeque
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/none">none</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.sortable</td>
      
        <th>Version:</th>
      
      <td>1.11.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p> Hi guys,</p><p> on sortable UL list I am trying to achieve different styling (move shape cursor, highlighted background) of the item when user "mousedowns" it and the item is ready to be dragged.</p><p> I was able to achieve this using li:active CSS selector, problem is, that in the Firefox (33.0) :active pseudo-class does not appear on the item when the ui.sortable is activated:</p><p> <a href="http://jsfiddle.net/vp5jy3vk/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/vp5jy3vk/</a> (jQuery 2.0.2 + jQuery UI 1.10.3 ~ the newest on jsfiddle)</p><p> <a href="http://jsfiddle.net/jLut0L1u/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/jLut0L1u/</a> (jQuery 1.6.4 ~ the oldest on jsfiddle)</p><p> (I am getting same behavior with jquery-2.1.1 + jquery-ui-1.11.2 offline)</p><p> To see it fully functional try with Chrome, please.</p><p> I expect that it is caused by different way the mousedown event bubbles thru in the FF and other browsers and that in FF ui.sortable somehow stops propagation of this event before :active would get triggered.</p><p> Please note, I am aware of the <strong>ui-sortable-helper</strong> class, but this class is not added until user starts to drag item.</p><p> Thanks in advance for any feedback, cheers, Tomas</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (2)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2014 05:47PM UTC by <span class="author">tj.vantoll</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ patcheswelcome</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Interesting. I'm not sure why </p><pre class="wiki">:active</pre> doesn't work here, but it's trivial to write an extension to implement this behavior:<p></p><pre class="wiki">
$.widget( "ui.sortable", $.ui.sortable, {
    _create: function() {
        this._super();
        this._on( this.element, {
            "mousedown &gt; *": function( event ) {
                $( event.target ).addClass( "ui-sortable-active" );
            },
            "sortstop": function( event, ui ) {
                $( ui.item ).removeClass( "ui-sortable-active" );
            }
        });
    }
});
</pre><p>Here's an example of it in use: <a href="http://jsfiddle.net/tj_vantoll/gr1mjnpL/." class="ext-link"><span class="icon"></span>http://jsfiddle.net/tj_vantoll/gr1mjnpL/.</a> I'm going to close this ticket as patcheswelcome. If someone can find why </p><pre class="wiki">:active</pre> doesn't work and can provide a reasonable PR we'll consider it, otherwise you can use the extension to implement this behavior.<p></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 07, 2018 12:33PM UTC by <span class="author">MikeMatusz</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The example provided is not the same behavior as :active at all, and has several issues.  Trying to actually duplicate the behavior becomes less trivial.  For one, :active only applies while the mouse is held down, when it's released the state should be cleared.  Also, if any of those list items contain more complex content, this is applying the class to whatever nested element was clicked.  Lastly, if you click multiple elements without dragging, they all turn orange.  With these requirements, the extension becomes a bit less trivial.</p><p>Why it's not working to begin with is the event.preventDefault() inside the mouseDown handler of ui.mouse (which is calling the _mouseCapture implementation of sortable).  If you remove that preventDefault, :active works correctly (although I assume many other things would not, so definitely not proposing that as a solution).</p><p>See:</p><ul><li><a href="https://github.com/w3c/csswg-drafts/issues/2262" class="ext-link"><span class="icon"></span>https://github.com/w3c/csswg-drafts/issues/2262</a></li><li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=771241" class="ext-link"><span class="icon"></span>https://bugzilla.mozilla.org/show_bug.cgi?id=771241</a></li></ul><p>At the moment, it doesn't look like there's going to be any fix from their end in the near future...</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
