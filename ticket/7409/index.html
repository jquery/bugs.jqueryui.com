<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7409 (Creating inner-accordions into an empty accordion) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7407/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7410/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#7409</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(notabug)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened May 21, 2011 09:26AM UTC</p>
      
        <p>Closed June 05, 2011 07:58AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Creating inner-accordions into an empty accordion</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        TheDoci
      </td>
      <th>Owned by:</th>
      <td>TheDoci</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        minor
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.9.0">1.9.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.accordion</td>
      
        <th>Version:</th>
      
      <td>1.8.13</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>When we have inner-accordions, the destroy-recreate method to refresh an accordion after adding some panels doesn't work correctly.</p><p>When you click on the button in the second accordion it adds a section into it. But the sub-accordion doesn't work (in spite of the desctruction-recreation of the accordion).</p><p>Test it : <a href="http://jsfiddle.net/YL99D/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/YL99D/</a></p><p>BUT if you modify the HTML code this way (add a first section in the #sections div), it works perfectly when we click the button : <a href="http://jsfiddle.net/YL99D/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/YL99D/1/</a></p><p>Additionnal information :</p> <ul><li>version of JQuery : 1.5.1</li> <li>browser : Firefox 4.0.1</li> <li>operating system : Windows 7 64 bits Family Edition</li></ul></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (3)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 21, 2011 12:26PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">When we have inner-accordions, the destroy-recreate method to refresh an accordion after adding some panels doesn&#39;t work correctly.&#92;
&#92;
Here is the HTML code :&#92;
&#92;
{{{&#92;
&lt;div id=&quot;main-content&quot;&gt;&#92;
    &lt;h3&gt;&lt;a href=&quot;#&quot;&gt;Accordion 1&lt;/a&gt;&lt;/h3&gt;&#92;
    &lt;div&gt;&#92;
        Content 1&#92;
    &lt;/div&gt;&#92;
    &#92;
    &lt;h3&gt;&lt;a href=&quot;#&quot;&gt;Accordion 2&lt;/a&gt;&lt;/h3&gt;&#92;
    &lt;div&gt;&#92;
        Content 2&lt;br /&gt;&#92;
        &lt;input type=&quot;button&quot; value=&quot;Add a new section&quot; id=&quot;add-section&quot; /&gt;&lt;br /&gt;&lt;br /&gt;&#92;
        &#92;
        Sections :&lt;br /&gt;&#92;
        &lt;div id=&quot;sections&quot;&gt;&lt;/div&gt;&#92;
    &lt;/div&gt;&#92;
&lt;/div&gt;&#92;
}}}&#92;
&#92;
&#92;
Here is the corresponding Javascript code :&#92;
&#92;
{{{&#92;
$(function() {&#92;
    /* The main accordions */&#92;
    $( &quot;#main-content&quot; ).accordion({&#92;
        collapsible: true,&#92;
        active: 0,&#92;
        autoHeight: false&#92;
    });&#92;
    &#92;
    /* The different sections of the second accordion */&#92;
    $( &quot;#sections&quot; )&#92;
    .data(&quot;sectionsAccordionSettings&quot;, {&#92;
        header: &quot;&gt; div &gt; h3&quot;,&#92;
        collapsible: true,&#92;
        active: false,&#92;
        autoHeight: false&#92;
    })&#92;
    .accordion($(&quot;#sections&quot;).data(&quot;sectionsAccordionSettings&quot;));&#92;
    &#92;
    /* The questions selected for the questionnaire are sortable */&#92;
    $(&quot;.sub-accordions&quot;)&#92;
    .data(&quot;subAccordionSettings&quot;, {&#92;
        header: &quot;&gt; div &gt; h3&quot;,&#92;
        collapsible: true,&#92;
        active: false,&#92;
        autoHeight: false&#92;
    })&#92;
    .accordion($(&quot;.sub-accordions&quot;).data(&quot;subAccordionSettings&quot;));&#92;
    &#92;
    /* Adding a new section to the second accordion can be done by clicking this element */&#92;
    $(&quot;#add-section&quot;).live(&#39;click&#39;, function() {&#92;
        var sectionsBlock = $(&quot;#sections&quot;);&#92;
        var section = &#39;&lt;div id=&quot;sections_new1&quot;&gt;&#39; +&#92;
                            &#39;&lt;h3&gt;&lt;a href=&quot;#&quot;&gt;Section&lt;/a&gt;&lt;/h3&gt;&#39; +&#92;
                            &#39;&lt;div&gt;&#39; +&#92;
                                &#39;Section content :&lt;br /&gt;&#39; +&#92;
                                &#39;&lt;div class=&quot;sub-accordions&quot;&gt;&#39; +&#92;
                                    &#39;&lt;div&gt;&#39; +&#92;
                                        &#39;&lt;h3&gt;&lt;a href=&quot;#&quot;&gt;Sub accordion.&lt;/a&gt;&lt;/h3&gt;&#39; +&#92;
                                        &#39;&lt;div&gt;Sub accordion content&lt;/div&gt;&#39; +&#92;
                                    &#39;&lt;/div&gt;&#39;&#92;
                                &#39;&lt;/div&gt;&#39; +&#92;
                            &#39;&lt;/div&gt;&#39; +&#92;
                        &#39;&lt;/div&gt;&#39;;&#92;
        sectionsBlock.append(section);&#92;
        &#92;
        // Refresh the accordions&#92;
        sectionsBlock.accordion(&#39;destroy&#39;).accordion(sectionsBlock.data(&#39;sectionsAccordionSettings&#39;));&#92;
        var subAccordionsBlock = $(&#39;.sub-accordions&#39;);&#92;
        subAccordionsBlock.accordion(&#39;destroy&#39;).accordion(subAccordionsBlock.data(&#39;subAccordionSettings&#39;));&#92;
    });&#92;
});&#92;
}}}&#92;
&#92;
When you click on the button in the second accordion it adds a section into it. But the sub-accordion doesn&#39;t work (in spite of the desctruction-recreation of the accordion).&#92;
Test it : http://jsfiddle.net/YL99D/&#92;
&#92;
BUT if you modify the HTML code this way (add a first section in the #sections div), it works perfectly when we click the button :&#92;
&#92;
{{{&#92;
&lt;div id=&quot;main-content&quot;&gt;&#92;
    &lt;h3&gt;&lt;a href=&quot;#&quot;&gt;Accordion 1&lt;/a&gt;&lt;/h3&gt;&#92;
    &lt;div&gt;&#92;
        Content 1&#92;
    &lt;/div&gt;&#92;
    &#92;
    &lt;h3&gt;&lt;a href=&quot;#&quot;&gt;Accordion 2&lt;/a&gt;&lt;/h3&gt;&#92;
    &lt;div&gt;&#92;
        Content 2&lt;br /&gt;&#92;
        &lt;input type=&quot;button&quot; value=&quot;Add a new section&quot; id=&quot;add-section&quot; /&gt;&lt;br /&gt;&lt;br /&gt;&#92;
        &#92;
        Sections :&lt;br /&gt;&#92;
        &lt;div id=&quot;sections&quot;&gt;&#92;
            &lt;div id=&quot;sections_new1&quot;&gt;&#92;
                &lt;h3&gt;&lt;a href=&quot;#&quot;&gt;Section&lt;/a&gt;&lt;/h3&gt;&#92;
                &lt;div&gt;&#92;
                    Section content :&lt;br /&gt;&#92;
                    &lt;div class=&quot;sub-accordions&quot;&gt;&#92;
                        &lt;div&gt;&#92;
                            &lt;h3&gt;&lt;a href=&quot;#&quot;&gt;Sub accordion.&lt;/a&gt;&lt;/h3&gt;&#92;
                            &lt;div&gt;Sub accordion content&lt;/div&gt;&#92;
                        &lt;/div&gt;&#92;
                    &lt;/div&gt;&#92;
                &lt;/div&gt;&#92;
            &lt;/div&gt;&#92;
        &lt;/div&gt;&#92;
    &lt;/div&gt;&#92;
&lt;/div&gt;&#92;
}}}&#92;
&#92;
Test it : http://jsfiddle.net/YL99D/1/&#92;
&#92;
I have looked at the generated HTML codes and I have found something interesting :&#92;
First look at the code generated when I have put a hard-coded section in the #sections div :&#92;
&#92;
{{{&#92;
&lt;div id=&quot;sections&quot; class=&quot;ui-accordion ui-widget ui-helper-reset ui-accordion-icons&quot; role=&quot;tablist&quot;&gt;&#92;
    &lt;div id=&quot;sections_new1&quot;&gt;&#92;
        &lt;h3 class=&quot;ui-accordion-header ui-helper-reset ui-state-active ui-corner-top&quot; role=&quot;tab&quot; aria-expanded=&quot;true&quot; aria-selected=&quot;true&quot; tabindex=&quot;0&quot;&gt;&#92;
            &lt;span class=&quot;ui-icon ui-icon-triangle-1-s&quot;&gt;&lt;/span&gt;&#92;
            &lt;a href=&quot;#&quot; tabindex=&quot;-1&quot;&gt;Section&lt;/a&gt;&#92;
        &lt;/h3&gt;&#92;
        &lt;div class=&quot;ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active&quot; role=&quot;tabpanel&quot; style=&quot;display: block;&quot;&gt;&#92;
            Section content :&#92;
            &lt;br&gt;&#92;
            &lt;div class=&quot;sub-accordions ui-accordion ui-widget ui-helper-reset ui-accordion-icons&quot; role=&quot;tablist&quot;&gt;&#92;
                &lt;div&gt;&#92;
                    &lt;h3 class=&quot;ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-hover&quot; role=&quot;tab&quot; aria-expanded=&quot;false&quot; aria-selected=&quot;false&quot; tabindex=&quot;0&quot;&gt;&#92;
                        &lt;span class=&quot;ui-icon ui-icon-triangle-1-e&quot;&gt;&lt;/span&gt;&#92;
                        &lt;a href=&quot;#&quot; tabindex=&quot;-1&quot;&gt;Sub accordion.&lt;/a&gt;&#92;
                    &lt;/h3&gt;&#92;
                    &lt;div class=&quot;ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom&quot; role=&quot;tabpanel&quot; style=&quot;display: none;&quot;&gt;Sub accordion content&lt;/div&gt;&#92;
                &lt;/div&gt;&#92;
            &lt;/div&gt;&#92;
        &lt;/div&gt;&#92;
    &lt;/div&gt;&#92;
&lt;/div&gt;&#92;
}}}&#92;
&#92;
Now look at the code generated when I let the #sections div empty :&#92;
&#92;
{{{&#92;
&lt;div id=&quot;sections&quot; class=&quot;ui-accordion ui-widget ui-helper-reset ui-accordion-icons&quot; role=&quot;tablist&quot;&gt;&#92;
    &lt;div id=&quot;sections_new1&quot;&gt;&#92;
        &lt;h3 class=&quot;ui-accordion-header ui-helper-reset ui-state-active ui-corner-top&quot; role=&quot;tab&quot; aria-expanded=&quot;true&quot; aria-selected=&quot;true&quot; tabindex=&quot;0&quot;&gt;&#92;
            &lt;span class=&quot;ui-icon ui-icon-triangle-1-s&quot;&gt;&lt;/span&gt;&#92;
            &lt;a href=&quot;#&quot; tabindex=&quot;-1&quot;&gt;Section&lt;/a&gt;&#92;
        &lt;/h3&gt;&#92;
        &lt;div class=&quot;ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active&quot; role=&quot;tabpanel&quot; style=&quot;display: block;&quot;&gt;&#92;
            Section content :&#92;
            &lt;br&gt;&#92;
            &lt;div class=&quot;sub-accordions ui-accordion ui-widget ui-helper-reset ui-accordion-icons&quot; role=&quot;tablist&quot;&gt;&#92;
                &lt;div class=&quot;ui-accordion-header ui-helper-reset ui-state-default ui-state-active ui-corner-top ui-state-hover&quot; role=&quot;tab&quot; aria-expanded=&quot;true&quot; aria-selected=&quot;true&quot; tabindex=&quot;0&quot;&gt;&#92;
                    &lt;span class=&quot;ui-icon ui-icon-triangle-1-s&quot;&gt;&lt;/span&gt;&#92;
                    &lt;h3&gt;&#92;
                        &lt;a href=&quot;#&quot; tabindex=&quot;-1&quot;&gt;Sub accordion.&lt;/a&gt;&#92;
                    &lt;/h3&gt;&#92;
                    &lt;div&gt;Sub accordion content&lt;/div&gt;&#92;
                &lt;/div&gt;&#92;
            &lt;/div&gt;&#92;
        &lt;/div&gt;&#92;
    &lt;/div&gt;&#92;
&lt;/div&gt;&#92;
}}}&#92;
&#92;
The classes are badly set.&#92;
&#92;
Additionnal information :&#92;
 * version of JQuery : 1.5.1&#92;
 * browser : Firefox 4.0.1&#92;
 * operating system : Windows 7 64 bits Family Edition</span> → <span class="change-field-new">When we have inner-accordions, the destroy-recreate method to refresh an accordion after adding some panels doesn&#39;t work correctly.&#92;
&#92;
&#92;
When you click on the button in the second accordion it adds a section into it. But the sub-accordion doesn&#39;t work (in spite of the desctruction-recreation of the accordion).&#92;
Test it : http://jsfiddle.net/YL99D/&#92;
&#92;
BUT if you modify the HTML code this way (add a first section in the #sections div), it works perfectly when we click the button : http://jsfiddle.net/YL99D/1/&#92;
&#92;
Additionnal information :&#92;
 * version of JQuery : 1.5.1&#92;
 * browser : Firefox 4.0.1&#92;
 * operating system : Windows 7 64 bits Family Edition</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>In the future, please do not dump tons of code into the ticket.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 21, 2011 12:33PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ TheDoci</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This test doesn't look correct at all. You're destroying widgets that never exist and reading data off widgets that don't have any data. Please provide an even more reduced test case showing the problem or use the <a href="http://forum.jquery.com" class="ext-link"><span class="icon"></span>forums</a> for help.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 05, 2011 07:58AM UTC by <span class="author">trac-o-bot</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Because we get so many tickets, we often need to return them to the initial reporter for more information. If that person does not reply within 14 days, the ticket will automatically be closed, and that has happened in this case. If you still are interested in pursuing this issue, feel free to add a comment with the requested information and we will be happy to reopen the ticket if it is still valid. Thanks!</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
