<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7840 (Autocomplete: popup results not read by screen-readers) - jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/u10aUuj4Q4.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7839/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7841/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h2>
      <a href="" class="ticket-number">#7840</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h2>

    <div class="ticket-dates">
      <p>Opened November 08, 2011 02:01PM UTC</p>
      
        <p>Closed May 16, 2012 10:06AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Autocomplete: popup results not read by screen-readers</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        ezufelt
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        blocker
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.9.0">1.9.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ui.autocomplete</td>
      
        <th>Version:</th>
      
      <td>1.8.16</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>a11y</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Firefox 7.0.1</p><p>JAWS 13</p><p>Autocomplete demo 1.9pre</p><p>Using a screen-reader it is possible to navigate to the autocomplete field, to start entering a value, and to be notified that a 'menu' has appeared. It is also possible to use the arrow keys to navigate the menu and to select an autocomplete option.</p><p>Problem</p><p>Screen-readers, however, do not read the items within the menu while navigating, so it is not possible to know which result is selected without navigating away from, and returning back to the autocomplete field.</p><p>Solution</p><p>1. set focus to the menu (and active menu item) while navigating. Return focus to the autocomplete field if a character key is pressed.</p><p>2. Use a hidden ARIA live region to announce the currently selected item (as is done with the Drupal 7 autocomplete widget, which can be seen at <a href="http://certifiedtorock.com/" class="ext-link"><span class="icon"></span>http://certifiedtorock.com/</a> ).</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (10)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 08, 2011 02:06PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">minor</span> → <span class="change-field-new">blocker</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There's a <a href="https://groups.google.com/group/jquery-a11y/browse_thread/thread/b58c8d5329f8c182" class="ext-link"><span class="icon"></span>long discussion about this on the jquery-a11y list</a>. I suggest going with what Drupal does because we're trying very hard not to move focus around.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 08, 2011 02:12PM UTC by <span class="author">ezufelt</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Agreed that option 2 is likely best, especially for complex implementations such as custom data / categories.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 08, 2011 02:40PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ a11y</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 21, 2011 11:40AM UTC by <span class="author">jzaefferer</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>That's also what Hans implemented: <a href="https://github.com/hanshillen/jquery-ui/commits/autocomplete-hh" class="ext-link"><span class="icon"></span>https://github.com/hanshillen/jquery-ui/commits/autocomplete-hh</a> - <a href="https://github.com/hanshillen/jquery-ui/commit/b70a922f718efb55da6e6451948ced022823614c" class="ext-link"><span class="icon"></span>https://github.com/hanshillen/jquery-ui/commit/b70a922f718efb55da6e6451948ced022823614c</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 29, 2011 09:38AM UTC by <span class="author">ezufelt</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've been working on this issue, extending the work done by Hans.</p><ul><li>removes "menu" role from popup &lt;ul&gt; (this really isn't a menu in the context of autocomplete, and was causing problems with live region announcements)</li><li>adds role="application" to element's parent</li><li>announces "Autocomplete popup" when the menu appears (perhaps on a delay)</li><li>announces items while navigating using arrow keys (in default demo), but not in multiple demo</li></ul><p>I have a couple of questions that I think may clarify things for me.</p><p>1. Am I correct to believe that in default (single) mode the text contents of the element are replaced while navigating the menu, but that this is not the case in multiple mode?</p><p>2. Are there events that fire:</p><ul><li>when the populated menu appears</li><li>when it is destroyed (or disappears)</li><li>when an item in the menu is selected (highlighted)?</li></ul><p>3. If the above events do not exist, what are your recommendations for the next best approximation of these 'events'?</p><p>Thanks</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 29, 2011 10:27AM UTC by <span class="author">ezufelt</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I did a bit more research, and would appreciate some confirmation:</p><p>1. Using the 'focus' event of the menu component I can find out which item of the menu has just received focus. </p><p>2. _suggest() executes when the menu is populated (refreshed).</p><p>3. close() executes when the menu is hidden.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 29, 2011 01:09PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:5 ezufelt]:</p><blockquote> - removes "menu" role from popup &lt;ul&gt; (this really isn't a menu in the context of autocomplete, and was causing problems with live region announcements)</blockquote><p>That should be fine. I would assume there are no negative side effects to having all other ARIA roles and states set inside the menu even though it doesn't have the menu role.</p><blockquote> - adds role="application" to element's parent</blockquote><p>I'm a bit concerned about this because it can affect a lot of other content on the page. So far we've stayed away from ever setting an application role. We should have a longer discussion about this outside of this ticket.</p><blockquote> I have a couple of questions that I think may clarify things for me.  1. Am I correct to believe that in default (single) mode the text contents of the element are replaced while navigating the menu, but that this is not the case in multiple mode?</blockquote><p>Yes, but that's only the default implementation. If you call <code>event.preventDefault()</code> in the autocompletefocus event, then the value of the text field does not get updated during navigation. All of the multiple word demos do this, but you could do the same in a single word usage as well.</p><blockquote> 2. Are there events that fire: - when the populated menu appears</blockquote><p><code>_suggest()</code></p><blockquote> - when it is destroyed (or disappears)</blockquote><p><code>close()</code></p><blockquote> - when an item in the menu is selected (highlighted)?</blockquote><p>The menu focus event.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 29, 2011 02:21PM UTC by <span class="author">ezufelt</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="https://github.com/ezufelt/jquery-ui/commit/1feec649032e20b66f005966be2ffe788ee09177" class="ext-link"><span class="icon"></span>https://github.com/ezufelt/jquery-ui/commit/1feec649032e20b66f005966be2ffe788ee09177</a></p><p>First pass at accessible autocomplete.</p><ul><li>Adds role="application" to input element parent*</li><li>Adds an invisible live region</li><li>Adds an options string to be spoken, placed in live region, when suggestions appear, defaults to "Autocomplete popup"</li><li>Speaks name of focused menu item (suggestion)</li></ul><p>I did quick testing and this is working in JAWS 13 + FF 8 for both default and multiple demos.</p><ul><li>We need to use role="application" to ensure that arrow keys are passed to the input element by screen-readers. I tried using</li></ul><p>var elementApplicationWrapper = $("&lt;span role='application'&gt;&lt;/span&gt;");</p><p>this.element.replaceWith(elementApplicationWrapper).appendTo(elementApplicationWrapper);</p><p>This seemed to break things and I did not receive any suggestion popup, although the input element was a child of the span in the correct position in the DOM.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 13, 2012 07:47AM UTC by <span class="author">ezufelt</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="https://github.com/ezufelt/jquery-ui/commit/427815efbc031ec22139face9c016dcca1148cf6" class="ext-link"><span class="icon"></span>https://github.com/ezufelt/jquery-ui/commit/427815efbc031ec22139face9c016dcca1148cf6</a></p><p>The above commit:</p><ul><li>Removes the 'menu' role from the list of autocomplete suggestions</li><li>creates a hidden live region span</li><li>announces "Autocomplete popup" when the suggestions appear (configurable string)</li><li>Announces each item as it is selected (sometimes twice because of application role not being enabled )</li><li>does not have 'application' role</li></ul><p><a href="/wiki/ToDo">ToDo</a></p><ul><li>Decide if message needs to be added when search begins</li><li>Test more thoroughly (write tests?)</li><li>Make final decision on application role</li><li>decide if we need to / can we remove all @role attributes from the suggestions 'menu'</li></ul>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 16, 2012 10:06AM UTC by <span class="author">Jörn Zaefferer</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Autocomplete: ARIA live region as extension, adding a messages option. Fixes <a href="/ticket/7840">#7840</a> - Autocomplete: popup results not read by screen-readers </p><p> Changeset: f4b2d7a4115814b64ff291e3518fe15f2dfbe390</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
