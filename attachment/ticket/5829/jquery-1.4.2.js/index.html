<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">jquery-1.4.2.js on Ticket #5829 – Attachment – jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/bugs.jqueryui.com/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/bugs.jqueryui.com/favicon.svg">
<link rel="apple-touch-icon" href="/bugs.jqueryui.com/apple-touch-icon.png">
    
    
    
    
    
    
    
    <style>
      code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-diff]{--eleventy-code-padding:1.25em;padding-left:var(--eleventy-code-padding);padding-right:var(--eleventy-code-padding)}.token.deleted{background-color:#ffd8d8;color:inherit}.token.inserted{background-color:#caffcf;color:inherit}.token.prefix.deleted,.token.prefix.inserted,.token.prefix.unchanged{-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;padding-top:2px;padding-bottom:2px}.token.prefix.deleted,.token.prefix.inserted{width:var(--eleventy-code-padding);background-color:rgba(0,0,0,.2)}.token.deleted:not(.prefix),.token.inserted:not(.prefix){display:block;margin-left:calc(-1 * var(--eleventy-code-padding));margin-right:calc(-1 * var(--eleventy-code-padding));text-decoration:none;color:inherit}:root{--attachment-info-bg-color:#f7f7f0;--attachment-info-border-color:#d7d7d7;--attachment-download-link-color:#666}h1,h2,h3,h4,h5,h6{font-weight:700}h3{font-size:.875rem}h6{font-size:.6875rem}.attachment-info{padding:.25em .5em;margin:1em 0;background-color:var(--attachment-info-bg-color);border:1px solid var(--attachment-info-border-color)}.attachment-info h6{font-family:var(--font-family-alternate)}.attachment-download{margin:2em 0;gap:.5em}.attachment-download-link[href],.attachment-download-link[href]:visited{color:var(--attachment-download-link-color)}.attachment img,.attachment picture{display:block;max-width:100%;height:auto}code[class*=language-],pre[class*=language-]{font-size:.75rem}:root{--font-family:'Arial','Helvetica','Verdana','sans-serif';--font-family-header:var(--font-family);--font-family-alternate:Verdana,Arial,'Bitstream Vera Sans',Helvetica,sans-serif;--font-family-monospace:Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace}:root{--primary-color:#000000;--secondary-color:#ff9c08;--text-color:#222;--text-color-dark-bg:#fff;--text-color-link:#bb0000;--text-color-link-hover:#f00000;--text-color-link-active:#ff2424;--text-color-link-visited:#cc0000;--text-color-link-disabled:#998;--main-link-hover-bg-color:#eee;--text-shadow-color:#fcfcfc;--button-color:var(--secondary-color);--button-hover-color:#a36200;--button-text-color:#fff;--background-color:#5f5f5f;--main-background-start-color:#1a1a1a;--main-background-end-color:var(--background-color);--top-nav-hover-start-color:#414240;--top-nav-hover-mid-color:#323530;--top-nav-hover-end-color:#292b28;--nav-background-color:var(--primary-color);--secondary-nav-start-color:#2d2d2d;--secondary-nav-end-color:#060606;--secondary-nav-box-shadow:#313131;--content-background-color:#fafafa;--banner-background-color:var(--primary-color);--footer-background-start-color:#000000;--footer-background-end-color:#141400;--footer-text-color-link:#bbb;--nav-text-link-color:white;--nav-hover-link-color:rgba(255, 255, 255, 0.2);--border-color:#e4e4e4;--border-radius:6px;--input-border-color:white;--blockquote-border-color:#b44;--pre-color:#333;--pre-background-color:#fff;--code-color:#600;--code-background-color:var(--content-background-color);--syntax-tab-size:2}*{box-sizing:border-box}body,html{padding:0;margin:0 auto;font-family:var(--font-family);font-size:100%;color:var(--text-color);line-height:1.4}html{overflow-y:auto;background-color:var(--background-color)}html:before{content:'';position:absolute;top:80px;left:0;right:0;height:900px;background:linear-gradient(to bottom,var(--main-background-start-color),var(--main-background-start-color) 25%,var(--main-background-end-color));z-index:-1}.banner{width:100%;height:80px;background-color:var(--banner-background-color);color:#fff;box-shadow:0 2px 5px rgba(0,0,0,.2);text-align:center;font-size:.875rem;padding:0 .25em}.banner a[href],.banner a[href]:visited{color:#5cb5f0}.banner a[href]:hover{color:var(--text-color-link-hover)}.banner a[href]:active{color:var(--text-color-link-active)}th,tr{font-family:var(--font-family-alternate)}.container{width:100%;max-width:956px;margin:0 auto;overflow:hidden}h1,h2,h3,h4,h5,h6{font-family:var(--font-family-header);font-weight:400;margin:0;padding:0;letter-spacing:0}h1,h2,h3,h4{letter-spacing:-.018em}h1{font-size:1.25rem;font-weight:700}h2{font-size:1rem;font-weight:700}.visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}p{line-height:1.5;margin:.5em 0 1em}p:last-child{margin-bottom:0}ul{margin:0}li{line-height:1.5}hr{width:100%}blockquote{margin:-.3em 0 0 0;border-style:solid;border-width:0 0 0 2px;padding-left:.4em;border-color:var(--blockquote-border-color)}a[href]{color:var(--text-color-link)}a[href]:visited{color:var(--text-color-link-visited)}a[href]:hover{color:var(--text-color-link-hover)}a[href]:active{color:var(--text-color-link-active)}a[aria-disabled=true]{color:var(--text-color-link-disabled)}main{padding:1rem}table{margin:1em 0}table td,table th{padding-right:1em}code,pre{font-family:var(--font-family-monospace)}pre:not([class*=language-]){margin:.5em 0;-moz-tab-size:var(--syntax-tab-size);-o-tab-size:var(--syntax-tab-size);tab-size:var(--syntax-tab-size);-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;width:100%;padding:.25em;font-size:.6875rem;border-radius:var(--border-radius);overflow-x:auto;background:var(--pre-background-color);color:var(--pre-color);border:1px solid #000;text-align:left}code{color:var(--code-color);border:1px solid var(--border-color);border-radius:.25em;padding:0 .3em;background:var(--code-background-color);word-break:break-all}pre[class*=language-] code{color:unset;border:none;border-radius:0;padding:0;background:0 0;word-break:normal}.strikethrough{text-decoration:line-through}header{position:relative;height:95px;display:flex;flex-wrap:wrap;padding:0 1em}.nav{display:flex;flex-direction:column;padding:0;list-style:none}.nav a{display:flex;align-items:center;height:35px;font-size:.75rem;padding:0 1em;text-decoration:none;border-bottom:2px solid transparent;white-space:nowrap;width:100%}.nav li:not(.active) a:active,.nav li:not(.active) a:hover{background-color:var(--nav-hover-link-color);border-bottom-color:var(--secondary-color)}.nav a,.nav a:active,.nav a:hover,.nav a:visited{color:var(--nav-text-link-color)}.nav a:active{background:linear-gradient(to bottom,var(--secondary-nav-end-color),var(--secondary-nav-start-color))}.nav .active a{border-bottom-color:var(--secondary-color)}#jq-siteLogo{margin-top:1em}#jq-primaryNavigation{padding:0 .5em;background-color:var(--nav-background-color)}#jq-secondaryNavigation{padding:0 .5em;background:linear-gradient(to bottom,var(--secondary-nav-start-color),var(--secondary-nav-end-color));box-shadow:0 -2px 1px var(--secondary-nav-box-shadow),0 2px 1px #000}#jq-secondaryNavigation a{font-size:.8125rem}#jq-content{position:relative;width:100%}.content-nav{font-size:.8125rem;margin:1.2em 0;align-self:flex-end}.content-nav ul{list-style:none}.content-nav li{padding:0 .75em}.content-nav li:not(:last-of-type){border-right:1px solid var(--border-color)}.hamburger-lines{position:relative;width:18px;height:14px;align-self:center}.hamburger-line{width:100%;height:2px;background-color:#fff;transition:opacity .2s ease-in-out,transform .2s ease-in-out}.hamburger-toggle:checked+.hamburger-lines span:first-of-type{transform:rotateZ(45deg) translate(4px,4.5px) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:nth-of-type(2){transform:rotateZ(135deg) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:last-of-type{transform:translateY(-8px) scale(0);opacity:0}.hamburger-toggle:checked~#jq-menus{transform:none;opacity:1}form{gap:.5em}label{font-style:italic;font-size:.8125rem;font-weight:700}input{border:1px solid var(--input-border-color);border-radius:var(--border-radius);height:25px;padding:0 .5em;color:var(--text-color)}button{display:block;border:0;padding:5px 10px;border-radius:var(--border-radius);background:var(--button-color);color:var(--button-text-color);font-size:.875rem;cursor:pointer}button:active,button:hover{background-color:var(--button-hover-color)}button:active{box-shadow:inset 0 0 5px #000}main{padding:1em;gap:1em}main a[href]:active,main a[href]:hover{background-color:var(--main-link-hover-bg-color)}#jq-topnav{gap:.25em}#jq-topnav a{width:100%;display:block;font-family:var(--font-family-alternate);font-size:.625rem;padding:.1em 1.5em;text-decoration:none;border:2px solid var(--border-color);color:#000;box-shadow:0 1px 2px rgba(0,0,0,.5);text-align:center;border-radius:var(--border-radius)}#jq-topnav a:active,#jq-topnav a:hover{color:#fff;border-color:var(--top-nav-hover-end-color)}#jq-topnav a:hover{background:linear-gradient(to bottom,var(--top-nav-hover-start-color),var(--top-nav-hover-mid-color) 50%,var(--top-nav-hover-end-color) 50%,var(--top-nav-hover-end-color))}#jq-topnav a:active{background:linear-gradient(to bottom,var(--top-nav-hover-end-color),var(--top-nav-hover-end-color) 50%,var(--top-nav-hover-mid-color) 50%,var(--top-nav-hover-start-color))}footer{background-color:var(--nav-background-color);background:var(--nav-background-color) linear-gradient(to bottom,var(--footer-background-start-color),var(--footer-background-end-color));padding:2em;margin-bottom:2em;color:var(--text-color-dark-bg);border:2px solid transparent;border-top:0;border-radius:0 0 var(--border-radius) var(--border-radius)}footer a[href],footer a[href]:visited{color:var(--footer-text-color-link)}footer a[href]:active,footer a[href]:hover{background-color:var(--main-link-hover-bg-color);color:#000}.flex-row{display:flex;flex-direction:row}.flex-column{display:flex;flex-direction:column}.flex-between-start{justify-content:space-between;align-items:flex-start}.flex-between-center{justify-content:space-between;align-items:center}.flex-start-center{justify-content:flex-start;align-items:center}.flex-end-center{justify-content:flex-end;align-items:center}.flex-center{display:flex;justify-content:center;align-items:center}.items-start{align-items:start}.white-box{background-color:var(--content-background-color);border:1px solid var(--border-color)}a.ext-link .icon{padding-left:15px}@media (max-width:919px){#jq-menus{position:absolute;top:95px;height:calc(100vh - 95px);left:0;right:0;background-color:var(--nav-background-color);z-index:1;transition:transform .2s ease-in-out,opacity .2s ease-in-out;transform:translateX(100%);opacity:0;display:flex;flex-direction:column-reverse;justify-content:flex-end}}@media (min-width:920px){html:before{top:60px}body{background-position-y:60px}.banner{height:60px;font-size:1rem}header{height:125px;padding:0 0 0 2em}#jq-topnav{flex-direction:row;align-self:flex-end;gap:0}#jq-topnav a{width:auto;border-radius:0}#jq-topnav a:first-of-type{border-radius:var(--border-radius) 0 0 var(--border-radius)}#jq-topnav a:last-of-type{border-radius:0 var(--border-radius) var(--border-radius) 0}.nav{flex-direction:row}.nav a{width:auto}#jq-primaryNavigation a{height:27px;align-self:flex-end}#jq-secondaryNavigation{border-radius:var(--border-radius);margin-top:2em}#jq-siteLogo{align-self:flex-end}main{flex-grow:1;min-height:520px;font-size:.75rem}.hamburger-lines{display:none}.content-nav{margin-top:.4em}}:root{--pagefind-ui-background-color:#fff}#search{width:100%;position:relative;min-height:25px}.pagefind-ui__search-input{width:100%;border:1px solid var(--border-color)}.pagefind-ui__search-clear{display:inline-block;position:absolute;width:25px;height:25px;right:15px;top:0;padding:0 0 0 25px;overflow:hidden;background-color:transparent;z-index:1}.pagefind-ui__search-clear:active,.pagefind-ui__search-clear:hover{background-color:rgba(0,0,0,.2)}.pagefind-ui__search-clear:after{content:'×';position:absolute;top:0;left:0;right:0;bottom:0;font-weight:700;font-size:1.5rem;line-height:26px;text-align:center;color:var(--text-color);opacity:1}.pagefind-ui__hidden{display:none}.pagefind-ui__suppressed{display:none}.pagefind-ui__drawer{position:absolute;top:100%;left:0;right:0;height:350px;background-color:var(--pagefind-ui-background-color);border:1px solid var(--border-color);border-top:0;border-radius:0 0 var(--border-radius) var(--border-radius);box-shadow:0 2px 4px rgba(0,0,0,.2);padding:10px;color:var(--text-color);font-size:.875rem;overflow-y:auto;word-break:break-word;z-index:1}.pagefind-ui__results-area{width:100%}.pagefind-ui__results{padding-left:20px}.pagefind-ui__result{margin-bottom:10px;vertical-align:top}.pagefind-ui__result-thumb{display:flex;flex-direction:column}.pagefind-ui__result-thumb .pagefind-ui__result-image{max-width:150px}.pagefind-ui__message{font-weight:700;text-transform:uppercase;font-size:1rem}.pagefind-ui__button{width:100%;padding:10px;margin-top:2em}@media(min-width:920px){#search{width:auto}.pagefind-ui__search-input{width:300px}.pagefind-ui__search-clear{right:auto;left:270px}.pagefind-ui__drawer{left:-200px;height:500px;padding:15px}}body{background:url(/bugs.jqueryui.com/img/body_bg.jpg) no-repeat center 80px}a.ext-link .icon{background:url(/bugs.jqueryui.com/img/extlink.png) 0 50% no-repeat}
    </style>
    
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/bugs.jqueryui.com/" title="jQuery UI Bugs Home">
            <img src="/bugs.jqueryui.com/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/bugs.jqueryui.com/newticket">New Ticket</a>
          <a href="/bugs.jqueryui.com/report">View Tickets</a>
          <a href="/bugs.jqueryui.com/ticketgraph">Ticket Graph</a>
          <a href="/bugs.jqueryui.com/roadmap">Roadmap</a>
          <a href="/bugs.jqueryui.com/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          


<div class="flex-column attachment">
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/bugs.jqueryui.com/ticket/5829">Back to Ticket #5829</a>
      </li>
    </ul>
  </nav>

  <h1>
    <a href="/bugs.jqueryui.com/ticket/5829">Ticket #5829</a>: jquery-1.4.2.js
  
  <hr>

  <div class="attachment-info">
    <h6>File jquery-1.4.2.js, 160.0 KB (added by Kurt, July 15, 2010 03:03PM UTC)</h6>
    
  </div>

  
    <div class="attachment-preview">
      
      <pre class="language-js" tabindex="0"><code class="language-js"><span class="token comment">/*!
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">window<span class="token punctuation">,</span> <span class="token keyword">undefined</span></span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token comment">// Define a local copy of jQuery</span>
<span class="token keyword">var</span> <span class="token function-variable function">jQuery</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector<span class="token punctuation">,</span> context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// The jQuery object is actually just the init constructor 'enhanced'</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> context <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Map over jQuery in case of overwrite</span>
	_jQuery <span class="token operator">=</span> window<span class="token punctuation">.</span>jQuery<span class="token punctuation">,</span>

	<span class="token comment">// Map over the $ in case of overwrite</span>
	_$ <span class="token operator">=</span> window<span class="token punctuation">.</span>$<span class="token punctuation">,</span>

	<span class="token comment">// Use the correct document accordingly with window argument (sandbox)</span>
	document <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">,</span>

	<span class="token comment">// A central reference to the root jQuery(document)</span>
	rootjQuery<span class="token punctuation">,</span>

	<span class="token comment">// A simple way to check for HTML strings or ID strings</span>
	<span class="token comment">// (both of which we optimize for)</span>
	quickExpr <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^&lt;]*(&lt;[\w\W]+>)[^>]*$|^#([\w-]+)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

	<span class="token comment">// Is it a simple selector</span>
	isSimple <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.[^:#\[\.,]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

	<span class="token comment">// Check if a string has a non-whitespace character in it</span>
	rnotwhite <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\S</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

	<span class="token comment">// Used for trimming whitespace</span>
	rtrim <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(\s|\u00A0)+|(\s|\u00A0)+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>

	<span class="token comment">// Match a standalone tag</span>
	rsingleTag <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;(\w+)\s*\/?>(?:&lt;\/\1>)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

	<span class="token comment">// Keep a UserAgent string for use with jQuery.browser</span>
	userAgent <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">,</span>

	<span class="token comment">// For matching the engine and version of the browser</span>
	browserMatch<span class="token punctuation">,</span>
	
	<span class="token comment">// Has the ready events already been bound?</span>
	readyBound <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	
	<span class="token comment">// The functions to execute on DOM ready</span>
	readyList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token comment">// The ready event handler</span>
	DOMContentLoaded<span class="token punctuation">,</span>

	<span class="token comment">// Save a reference to some core methods</span>
	toString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">,</span>
	hasOwnProperty <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">,</span>
	push <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push<span class="token punctuation">,</span>
	slice <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">,</span>
	indexOf <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>indexOf<span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector<span class="token punctuation">,</span> context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> match<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> doc<span class="token punctuation">;</span>

		<span class="token comment">// Handle $(""), $(null), or $(undefined)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>selector <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Handle $(DOMElement)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> selector<span class="token punctuation">.</span>nodeType <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> selector<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">// The body element only exists once, optimize finding it</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> selector <span class="token operator">===</span> <span class="token string">"body"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>context <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> document<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>selector <span class="token operator">=</span> <span class="token string">"body"</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Handle HTML strings</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Are we dealing with HTML string or an ID?</span>
			match <span class="token operator">=</span> quickExpr<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Verify a match, and that no context was specified for #id</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> match <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token operator">!</span>context<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// HANDLE: $(html) -> $(array)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					doc <span class="token operator">=</span> <span class="token punctuation">(</span>context <span class="token operator">?</span> context<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> context <span class="token operator">:</span> document<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// If a single string is passed in and it's a single tag</span>
					<span class="token comment">// just do a createElement and skip the rest</span>
					ret <span class="token operator">=</span> rsingleTag<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span> context <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							selector <span class="token operator">=</span> <span class="token punctuation">[</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span> ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
							jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> context<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							selector <span class="token operator">=</span> <span class="token punctuation">[</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span> ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						ret <span class="token operator">=</span> <span class="token function">buildFragment</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> doc <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
						selector <span class="token operator">=</span> <span class="token punctuation">(</span>ret<span class="token punctuation">.</span>cacheable <span class="token operator">?</span> ret<span class="token punctuation">.</span>fragment<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">:</span> ret<span class="token punctuation">.</span>fragment<span class="token punctuation">)</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					
					<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
					
				<span class="token comment">// HANDLE: $("#id")</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// Handle the case where IE and Opera return items</span>
						<span class="token comment">// by name instead of ID</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>id <span class="token operator">!==</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> rootjQuery<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Otherwise, we inject the element directly into the jQuery object</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
						<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> document<span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>selector <span class="token operator">=</span> selector<span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

			<span class="token comment">// HANDLE: $("TAG")</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>context <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>selector <span class="token operator">=</span> selector<span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> document<span class="token punctuation">;</span>
				selector <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// HANDLE: $(expr, $(...))</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>context <span class="token operator">||</span> context<span class="token punctuation">.</span>jquery <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>context <span class="token operator">||</span> rootjQuery<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// HANDLE: $(expr, context)</span>
			<span class="token comment">// (which is just equivalent to: $(context).find(expr)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> context <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token comment">// HANDLE: $(function)</span>
		<span class="token comment">// Shortcut for document ready</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> rootjQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>selector<span class="token punctuation">.</span>selector <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>selector <span class="token operator">=</span> selector<span class="token punctuation">.</span>selector<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> selector<span class="token punctuation">.</span>context<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Start with an empty selector</span>
	<span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>

	<span class="token comment">// The current version of jQuery being used</span>
	<span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">"1.4.2"</span><span class="token punctuation">,</span>

	<span class="token comment">// The default length of a jQuery object is 0</span>
	<span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

	<span class="token comment">// The number of elements contained in the matched element set</span>
	<span class="token function-variable function">size</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">toArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Get the Nth element in the matched element set OR</span>
	<span class="token comment">// Get the whole matched element set as a clean array</span>
	<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">num</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> num <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span>

			<span class="token comment">// Return a 'clean' array</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>

			<span class="token comment">// Return just the object</span>
			<span class="token punctuation">(</span> num <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">[</span> <span class="token number">0</span> <span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">[</span> num <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Take an array of elements and push it onto the stack</span>
	<span class="token comment">// (returning the new matched element set)</span>
	<span class="token function-variable function">pushStack</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems<span class="token punctuation">,</span> name<span class="token punctuation">,</span> selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Build a new jQuery matched element set</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span> elems <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> elems <span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> elems <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Add the old object onto the stack (as a reference)</span>
		ret<span class="token punctuation">.</span>prevObject <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

		ret<span class="token punctuation">.</span>context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"find"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret<span class="token punctuation">.</span>selector <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selector <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>selector <span class="token operator">?</span> <span class="token string">" "</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> selector<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret<span class="token punctuation">.</span>selector <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selector <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"("</span> <span class="token operator">+</span> selector <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Return the newly-formed element set</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Execute a callback for every element in the matched set.</span>
	<span class="token comment">// (You can seed the arguments with an array of args, but this is</span>
	<span class="token comment">// only used internally.)</span>
	<span class="token function-variable function">each</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">callback<span class="token punctuation">,</span> args</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> args <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">ready</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Attach the listeners</span>
		jQuery<span class="token punctuation">.</span><span class="token function">bindReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// If the DOM is already ready</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>isReady <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Execute the function immediately</span>
			<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> document<span class="token punctuation">,</span> jQuery <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Otherwise, remember the function for later</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> readyList <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Add the function to the wait list</span>
			readyList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">eq</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> i <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span> <span class="token operator">:</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span> i<span class="token punctuation">,</span> <span class="token operator">+</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">first</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">last</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">slice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token string">"slice"</span><span class="token punctuation">,</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">map</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">end</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prevObject <span class="token operator">||</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// For internal use only.</span>
	<span class="token comment">// Behaves like an Array's method, not like a jQuery method.</span>
	<span class="token literal-property property">push</span><span class="token operator">:</span> push<span class="token punctuation">,</span>
	<span class="token literal-property property">sort</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort<span class="token punctuation">,</span>
	<span class="token literal-property property">splice</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>splice
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Give the init function the jQuery prototype for later instantiation</span>
jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>prototype <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>extend <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">extend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// copy reference to target object</span>
	<span class="token keyword">var</span> target <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> length <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span> deep <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> options<span class="token punctuation">,</span> name<span class="token punctuation">,</span> src<span class="token punctuation">,</span> copy<span class="token punctuation">;</span>

	<span class="token comment">// Handle a deep copy situation</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">"boolean"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		deep <span class="token operator">=</span> target<span class="token punctuation">;</span>
		target <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token comment">// skip the boolean and the target</span>
		i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Handle case when target is a string or something (possible in deep copy)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> target <span class="token operator">!==</span> <span class="token string">"object"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// extend jQuery itself if only one argument is passed</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> length <span class="token operator">===</span> i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token operator">--</span>i<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Only deal with non-null/undefined values</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>options <span class="token operator">=</span> arguments<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Extend the base object</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> options <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				src <span class="token operator">=</span> target<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
				copy <span class="token operator">=</span> options<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Prevent never-ending loop</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> target <span class="token operator">===</span> copy <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">continue</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Recurse if we're merging object literal values or arrays</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> deep <span class="token operator">&amp;&amp;</span> copy <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> clone <span class="token operator">=</span> src <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">?</span> src
						<span class="token operator">:</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

					<span class="token comment">// Never move original objects, clone them</span>
					target<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span> deep<span class="token punctuation">,</span> clone<span class="token punctuation">,</span> copy <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Don't bring in undefined values</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> copy <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					target<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> copy<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Return the modified object</span>
	<span class="token keyword">return</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">noConflict</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">deep</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		window<span class="token punctuation">.</span>$ <span class="token operator">=</span> _$<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> deep <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			window<span class="token punctuation">.</span>jQuery <span class="token operator">=</span> _jQuery<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token comment">// Is the DOM ready to be used? Set to true once it occurs.</span>
	<span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	
	<span class="token comment">// Handle when the DOM is ready</span>
	<span class="token function-variable function">ready</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Make sure that the DOM is not already loaded</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>isReady <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>document<span class="token punctuation">.</span>body <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>ready<span class="token punctuation">,</span> <span class="token number">13</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Remember that the DOM is ready</span>
			jQuery<span class="token punctuation">.</span>isReady <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

			<span class="token comment">// If there are functions bound, to execute</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> readyList <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Execute all of them</span>
				<span class="token keyword">var</span> fn<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>fn <span class="token operator">=</span> readyList<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> document<span class="token punctuation">,</span> jQuery <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Reset the list of functions</span>
				readyList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Trigger any bound ready events</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>triggerHandler <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span> document <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">triggerHandler</span><span class="token punctuation">(</span> <span class="token string">"ready"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">bindReady</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> readyBound <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		readyBound <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

		<span class="token comment">// Catch cases where $(document).ready() is called after the</span>
		<span class="token comment">// browser event has already occurred.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">"complete"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Mozilla, Opera and webkit nightlies currently support this event</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>addEventListener <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Use the handy event callback</span>
			document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span> <span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> DOMContentLoaded<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token comment">// A fallback to window.onload, that will always work</span>
			window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span> <span class="token string">"load"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>ready<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// If IE event model is used</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>attachEvent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// ensure firing before onload,</span>
			<span class="token comment">// maybe late but safe also for iframes</span>
			document<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">"onreadystatechange"</span><span class="token punctuation">,</span> DOMContentLoaded<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token comment">// A fallback to window.onload, that will always work</span>
			window<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span> <span class="token string">"onload"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>ready <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// If IE and not a frame</span>
			<span class="token comment">// continually check to see if the document is ready</span>
			<span class="token keyword">var</span> toplevel <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				toplevel <span class="token operator">=</span> window<span class="token punctuation">.</span>frameElement <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>doScroll <span class="token operator">&amp;&amp;</span> toplevel <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">doScrollCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// See test/unit/core.js for details concerning isFunction.</span>
	<span class="token comment">// Since version 1.3, DOM methods and functions like alert</span>
	<span class="token comment">// aren't supported. They return false on IE (#2968).</span>
	<span class="token function-variable function">isFunction</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">obj</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"[object Function]"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">isArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">obj</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"[object Array]"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">isPlainObject</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">obj</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Must be an Object.</span>
		<span class="token comment">// Because of IE, we also have to check the presence of the constructor property.</span>
		<span class="token comment">// Make sure that DOM nodes and window objects don't pass through, as well</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>obj <span class="token operator">||</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"[object Object]"</span> <span class="token operator">||</span> obj<span class="token punctuation">.</span>nodeType <span class="token operator">||</span> obj<span class="token punctuation">.</span>setInterval <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">// Not own constructor property must be Object</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> obj<span class="token punctuation">.</span>constructor
			<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">"constructor"</span><span class="token punctuation">)</span>
			<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">"isPrototypeOf"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">// Own properties are enumerated firstly, so to speed up,</span>
		<span class="token comment">// if last one is own, then all properties are own.</span>
	
		<span class="token keyword">var</span> key<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> key <span class="token keyword">in</span> obj <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
		
		<span class="token keyword">return</span> key <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> <span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> obj<span class="token punctuation">,</span> key <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">isEmptyObject</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">obj</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> name <span class="token keyword">in</span> obj <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">msg</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> msg<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">parseJSON</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> data <span class="token operator">!==</span> <span class="token string">"string"</span> <span class="token operator">||</span> <span class="token operator">!</span>data <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Make sure leading/trailing whitespace is removed (IE can't handle it)</span>
		data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// Make sure the incoming data is actual JSON</span>
		<span class="token comment">// Logic borrowed from http://json.org/json2.js</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\],:{}\s]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"@"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"]"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?:^|:|,)(?:\s*\[)+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Try to use the native JSON parser first</span>
			<span class="token keyword">return</span> window<span class="token punctuation">.</span><span class="token constant">JSON</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse <span class="token operator">?</span>
				window<span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">"return "</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> <span class="token string">"Invalid JSON: "</span> <span class="token operator">+</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">noop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Evalulates a script in a global context</span>
	<span class="token function-variable function">globalEval</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token operator">&amp;&amp;</span> rnotwhite<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Inspired by code by Andrea Giammarchi</span>
			<span class="token comment">// http://webreflection.blogspot.com/2007/08/global-scope-evaluation-and-dom.html</span>
			<span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>
				script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"text/javascript"</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>scriptEval <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				script<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				script<span class="token punctuation">.</span>text <span class="token operator">=</span> data<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Use insertBefore instead of appendChild to circumvent an IE6 bug.</span>
			<span class="token comment">// This arises when a base node is used (#2709).</span>
			head<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> script<span class="token punctuation">,</span> head<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
			head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> script <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">nodeName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// args is for internal usage only</span>
	<span class="token function-variable function">each</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">object<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> args</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> name<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			length <span class="token operator">=</span> object<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
			isObj <span class="token operator">=</span> length <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> args <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> isObj <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> object <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> object<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">,</span> args <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> object<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> args <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

		<span class="token comment">// A special, fast, case for the most common use of each</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> isObj <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> object <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> object<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> object<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> value <span class="token operator">=</span> object<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					i <span class="token operator">&lt;</span> length <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> value<span class="token punctuation">,</span> i<span class="token punctuation">,</span> value <span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">;</span> value <span class="token operator">=</span> object<span class="token punctuation">[</span><span class="token operator">++</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> object<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">trim</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">text</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>text <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> rtrim<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// results is for internal usage only</span>
	<span class="token function-variable function">makeArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">array<span class="token punctuation">,</span> results</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> results <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> array <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// The window, strings (and functions) also have 'length'</span>
			<span class="token comment">// The extra typeof function check is to prevent crashes</span>
			<span class="token comment">// in Safari 2 (See: #3039)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> array<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> array <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> array <span class="token operator">!==</span> <span class="token string">"function"</span> <span class="token operator">&amp;&amp;</span> array<span class="token punctuation">.</span>setInterval<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> array <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> array <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">inArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> array</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> array<span class="token punctuation">.</span>indexOf <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> array<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">===</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> i<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">merge</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">first<span class="token punctuation">,</span> second</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> i <span class="token operator">=</span> first<span class="token punctuation">.</span>length<span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> second<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> l <span class="token operator">=</span> second<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				first<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span> <span class="token operator">=</span> second<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span> second<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				first<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span> <span class="token operator">=</span> second<span class="token punctuation">[</span> j<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		first<span class="token punctuation">.</span>length <span class="token operator">=</span> i<span class="token punctuation">;</span>

		<span class="token keyword">return</span> first<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">grep</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> inv</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Go through the array, only saving the items</span>
		<span class="token comment">// that pass the validator function</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>inv <span class="token operator">!==</span> <span class="token operator">!</span><span class="token function">callback</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> i <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// arg is for internal usage only</span>
	<span class="token function-variable function">map</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> arg</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> value<span class="token punctuation">;</span>

		<span class="token comment">// Go through the array, translating each of the items to their</span>
		<span class="token comment">// new value (or values).</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			value <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arg <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				ret<span class="token punctuation">[</span> ret<span class="token punctuation">.</span>length <span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// A global GUID counter for objects</span>
	<span class="token literal-property property">guid</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>

	<span class="token function-variable function">proxy</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn<span class="token punctuation">,</span> proxy<span class="token punctuation">,</span> thisObject</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> proxy <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				thisObject <span class="token operator">=</span> fn<span class="token punctuation">;</span>
				fn <span class="token operator">=</span> thisObject<span class="token punctuation">[</span> proxy <span class="token punctuation">]</span><span class="token punctuation">;</span>
				proxy <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> proxy <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> proxy <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				thisObject <span class="token operator">=</span> proxy<span class="token punctuation">;</span>
				proxy <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>proxy <span class="token operator">&amp;&amp;</span> fn <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">proxy</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> thisObject <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Set the guid of unique handler to the same of original handler, so it can be removed</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> fn <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			proxy<span class="token punctuation">.</span>guid <span class="token operator">=</span> fn<span class="token punctuation">.</span>guid <span class="token operator">=</span> fn<span class="token punctuation">.</span>guid <span class="token operator">||</span> proxy<span class="token punctuation">.</span>guid <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// So proxy can be declared as an argument</span>
		<span class="token keyword">return</span> proxy<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Use of jQuery.browser is frowned upon.</span>
	<span class="token comment">// More details: http://docs.jquery.com/Utilities/jQuery.browser</span>
	<span class="token function-variable function">uaMatch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">ua</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		ua <span class="token operator">=</span> ua<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> match <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(webkit)[ \/]([\w.]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> ua <span class="token punctuation">)</span> <span class="token operator">||</span>
			<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(opera)(?:.*version)?[ \/]([\w.]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> ua <span class="token punctuation">)</span> <span class="token operator">||</span>
			<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(msie) ([\w.]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> ua <span class="token punctuation">)</span> <span class="token operator">||</span>
			<span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">compatible</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> ua <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(mozilla)(?:.*? rv:([\w.]+))?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> ua <span class="token punctuation">)</span> <span class="token operator">||</span>
		  	<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">browser</span><span class="token operator">:</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">"0"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

browserMatch <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">uaMatch</span><span class="token punctuation">(</span> userAgent <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> browserMatch<span class="token punctuation">.</span>browser <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">[</span> browserMatch<span class="token punctuation">.</span>browser <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>version <span class="token operator">=</span> browserMatch<span class="token punctuation">.</span>version<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Deprecated, use jQuery.browser.webkit instead</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>webkit <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>safari <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> indexOf <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span><span class="token function-variable function">inArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> array</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> array<span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// All jQuery objects should point back to these</span>
rootjQuery <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Cleanup functions for the document ready method</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>addEventListener <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">DOMContentLoaded</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span> <span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> DOMContentLoaded<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>attachEvent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">DOMContentLoaded</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">"complete"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			document<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span> <span class="token string">"onreadystatechange"</span><span class="token punctuation">,</span> DOMContentLoaded <span class="token punctuation">)</span><span class="token punctuation">;</span>
			jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// The DOM ready check for Internet Explorer</span>
<span class="token keyword">function</span> <span class="token function">doScrollCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>isReady <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token comment">// If IE is used, use the trick by Diego Perini</span>
		<span class="token comment">// http://javascript.nwbox.com/IEContentLoaded/</span>
		document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">doScroll</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> error <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span> doScrollCheck<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// and execute any waiting functions</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">evalScript</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>src <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> elem<span class="token punctuation">.</span>src<span class="token punctuation">,</span>
			<span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">"script"</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span><span class="token function">globalEval</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>text <span class="token operator">||</span> elem<span class="token punctuation">.</span>textContent <span class="token operator">||</span> elem<span class="token punctuation">.</span>innerHTML <span class="token operator">||</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Mutifunctional method to get and set values to a collection</span>
<span class="token comment">// The value/s can be optionally by executed if its a function</span>
<span class="token keyword">function</span> <span class="token function">access</span><span class="token punctuation">(</span> <span class="token parameter">elems<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> exec<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> pass</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> length <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
	
	<span class="token comment">// Setting many attributes</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> k <span class="token keyword">in</span> key <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">access</span><span class="token punctuation">(</span> elems<span class="token punctuation">,</span> k<span class="token punctuation">,</span> key<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> exec<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> elems<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// Setting one attribute</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Optionally, function values get executed if exec is true</span>
		exec <span class="token operator">=</span> <span class="token operator">!</span>pass <span class="token operator">&amp;&amp;</span> exec <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">fn</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> exec <span class="token operator">?</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">fn</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> key <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">:</span> value<span class="token punctuation">,</span> pass <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">return</span> elems<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// Getting an attribute</span>
	<span class="token keyword">return</span> length <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	jQuery<span class="token punctuation">.</span>support <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>
		script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		id <span class="token operator">=</span> <span class="token string">"script"</span> <span class="token operator">+</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"   &lt;link/>&lt;table>&lt;/table>&lt;a href='/a' style='color:red;float:left;opacity:.55;'>a&lt;/a>&lt;input type='checkbox'/>"</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> all <span class="token operator">=</span> div<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		a <span class="token operator">=</span> div<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token comment">// Can't get basic test support</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>all <span class="token operator">||</span> <span class="token operator">!</span>all<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token operator">!</span>a <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span>support <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token comment">// IE strips leading whitespace when .innerHTML is used</span>
		<span class="token literal-property property">leadingWhitespace</span><span class="token operator">:</span> div<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">,</span>

		<span class="token comment">// Make sure that tbody elements aren't automatically inserted</span>
		<span class="token comment">// IE will insert them into empty tables</span>
		<span class="token literal-property property">tbody</span><span class="token operator">:</span> <span class="token operator">!</span>div<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"tbody"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>

		<span class="token comment">// Make sure that link elements get serialized correctly by innerHTML</span>
		<span class="token comment">// This requires a wrapper element in IE</span>
		<span class="token literal-property property">htmlSerialize</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>div<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"link"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>

		<span class="token comment">// Get the style information from getAttribute</span>
		<span class="token comment">// (IE uses .cssText insted)</span>
		<span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">red</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> a<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token comment">// Make sure that URLs aren't manipulated</span>
		<span class="token comment">// (IE normalizes it by default)</span>
		<span class="token literal-property property">hrefNormalized</span><span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"/a"</span><span class="token punctuation">,</span>

		<span class="token comment">// Make sure that element opacity exists</span>
		<span class="token comment">// (IE uses filter instead)</span>
		<span class="token comment">// Use a regex to work around a WebKit issue. See #5145</span>
		<span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^0.55$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token comment">// Verify style float existence</span>
		<span class="token comment">// (IE uses styleFloat instead of cssFloat)</span>
		<span class="token literal-property property">cssFloat</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssFloat<span class="token punctuation">,</span>

		<span class="token comment">// Make sure that if no value is specified for a checkbox</span>
		<span class="token comment">// that it defaults to "on".</span>
		<span class="token comment">// (WebKit defaults to "" instead)</span>
		<span class="token literal-property property">checkOn</span><span class="token operator">:</span> div<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">"on"</span><span class="token punctuation">,</span>

		<span class="token comment">// Make sure that a selected-by-default option has a working selected property.</span>
		<span class="token comment">// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)</span>
		<span class="token literal-property property">optSelected</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"select"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"option"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>selected<span class="token punctuation">,</span>

		<span class="token literal-property property">parentNode</span><span class="token operator">:</span> div<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>parentNode <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

		<span class="token comment">// Will be defined later</span>
		<span class="token literal-property property">deleteExpando</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">checkClone</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">scriptEval</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">noCloneEvent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">boxModel</span><span class="token operator">:</span> <span class="token keyword">null</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"text/javascript"</span><span class="token punctuation">;</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		script<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span> <span class="token string">"window."</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">"=1;"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

	root<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> script<span class="token punctuation">,</span> root<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Make sure that the execution of code works by injecting a script</span>
	<span class="token comment">// tag with appendChild/createTextNode</span>
	<span class="token comment">// (IE doesn't support this, fails, and uses .text instead)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> window<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>scriptEval <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token keyword">delete</span> window<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Test to see if it's possible to delete an expando from an element</span>
	<span class="token comment">// Fails in Internet Explorer</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">delete</span> script<span class="token punctuation">.</span>test<span class="token punctuation">;</span>
	
	<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>deleteExpando <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	root<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> script <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> div<span class="token punctuation">.</span>attachEvent <span class="token operator">&amp;&amp;</span> div<span class="token punctuation">.</span>fireEvent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		div<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">"onclick"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Cloning a node shouldn't copy over any</span>
			<span class="token comment">// bound event handlers (IE does this)</span>
			jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>noCloneEvent <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			div<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">"onclick"</span><span class="token punctuation">,</span> click<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		div<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fireEvent</span><span class="token punctuation">(</span><span class="token string">"onclick"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"&lt;input type='radio' name='radiotest' checked='checked'/>"</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> div<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// WebKit doesn't clone checked state correctly in fragments</span>
	jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>checkClone <span class="token operator">=</span> fragment<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lastChild<span class="token punctuation">.</span>checked<span class="token punctuation">;</span>

	<span class="token comment">// Figure out if the W3C box model works as expected</span>
	<span class="token comment">// document.body must exist before we can do this</span>
	<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>paddingLeft <span class="token operator">=</span> <span class="token string">"1px"</span><span class="token punctuation">;</span>

		document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> div <span class="token punctuation">)</span><span class="token punctuation">;</span>
		jQuery<span class="token punctuation">.</span>boxModel <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>boxModel <span class="token operator">=</span> div<span class="token punctuation">.</span>offsetWidth <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">;</span>
		document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> div <span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>

		div <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Technique from Juriy Zaytsev</span>
	<span class="token comment">// http://thinkweb2.com/projects/prototype/detecting-event-support-without-browser-sniffing/</span>
	<span class="token keyword">var</span> <span class="token function-variable function">eventSupported</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">eventName</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
		<span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		eventName <span class="token operator">=</span> <span class="token string">"on"</span> <span class="token operator">+</span> eventName<span class="token punctuation">;</span> 

		<span class="token keyword">var</span> isSupported <span class="token operator">=</span> <span class="token punctuation">(</span>eventName <span class="token keyword">in</span> el<span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>isSupported <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
			el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> <span class="token string">"return;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
			isSupported <span class="token operator">=</span> <span class="token keyword">typeof</span> el<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">;</span> 
		<span class="token punctuation">}</span> 
		el <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 

		<span class="token keyword">return</span> isSupported<span class="token punctuation">;</span> 
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
	jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>submitBubbles <span class="token operator">=</span> <span class="token function">eventSupported</span><span class="token punctuation">(</span><span class="token string">"submit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>changeBubbles <span class="token operator">=</span> <span class="token function">eventSupported</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// release memory in IE</span>
	root <span class="token operator">=</span> script <span class="token operator">=</span> div <span class="token operator">=</span> all <span class="token operator">=</span> a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>props <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string-property property">"for"</span><span class="token operator">:</span> <span class="token string">"htmlFor"</span><span class="token punctuation">,</span>
	<span class="token string-property property">"class"</span><span class="token operator">:</span> <span class="token string">"className"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">readonly</span><span class="token operator">:</span> <span class="token string">"readOnly"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">maxlength</span><span class="token operator">:</span> <span class="token string">"maxLength"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">cellspacing</span><span class="token operator">:</span> <span class="token string">"cellSpacing"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">rowspan</span><span class="token operator">:</span> <span class="token string">"rowSpan"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">colspan</span><span class="token operator">:</span> <span class="token string">"colSpan"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">tabindex</span><span class="token operator">:</span> <span class="token string">"tabIndex"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">usemap</span><span class="token operator">:</span> <span class="token string">"useMap"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">frameborder</span><span class="token operator">:</span> <span class="token string">"frameBorder"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> expando <span class="token operator">=</span> <span class="token string">"jQuery"</span> <span class="token operator">+</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> uuid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> windowData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token literal-property property">expando</span><span class="token operator">:</span>expando<span class="token punctuation">,</span>

	<span class="token comment">// The following elements throw uncatchable exceptions if you</span>
	<span class="token comment">// attempt to add expando properties to them.</span>
	<span class="token literal-property property">noData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">"embed"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token string-property property">"object"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token string-property property">"applet"</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>noData<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		elem <span class="token operator">=</span> elem <span class="token operator">==</span> window <span class="token operator">?</span>
			<span class="token literal-property property">windowData</span> <span class="token operator">:</span>
			elem<span class="token punctuation">;</span>

		<span class="token keyword">var</span> id <span class="token operator">=</span> elem<span class="token punctuation">[</span> expando <span class="token punctuation">]</span><span class="token punctuation">,</span> cache <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">,</span> thisCache<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>id <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Compute a unique ID for the element</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>id <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
			id <span class="token operator">=</span> <span class="token operator">++</span>uuid<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Avoid generating a new cache unless none exists and we</span>
		<span class="token comment">// want to manipulate it.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem<span class="token punctuation">[</span> expando <span class="token punctuation">]</span> <span class="token operator">=</span> id<span class="token punctuation">;</span>
			thisCache <span class="token operator">=</span> cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem<span class="token punctuation">[</span> expando <span class="token punctuation">]</span> <span class="token operator">=</span> id<span class="token punctuation">;</span>
			cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		thisCache <span class="token operator">=</span> cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Prevent overriding the named cache with undefined values</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			thisCache<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">?</span> thisCache<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">:</span> thisCache<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">removeData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>noData<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		elem <span class="token operator">=</span> elem <span class="token operator">==</span> window <span class="token operator">?</span>
			<span class="token literal-property property">windowData</span> <span class="token operator">:</span>
			elem<span class="token punctuation">;</span>

		<span class="token keyword">var</span> id <span class="token operator">=</span> elem<span class="token punctuation">[</span> expando <span class="token punctuation">]</span><span class="token punctuation">,</span> cache <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">,</span> thisCache <span class="token operator">=</span> cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// If we want to remove a specific section of the element's data</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> thisCache <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Remove the section of cache data</span>
				<span class="token keyword">delete</span> thisCache<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// If we've removed all the data, remove the element's cache</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>thisCache<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

		<span class="token comment">// Otherwise, we want to remove all of the element's data</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>deleteExpando <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">delete</span> elem<span class="token punctuation">[</span> jQuery<span class="token punctuation">.</span>expando <span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>removeAttribute <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elem<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>expando <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Completely remove the data cache</span>
			<span class="token keyword">delete</span> cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">key<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> key <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> parts <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">"."</span> <span class="token operator">+</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerHandler</span><span class="token punctuation">(</span><span class="token string">"getData"</span> <span class="token operator">+</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"!"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">:</span>
				data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"setData"</span> <span class="token operator">+</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"!"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">removeData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">key</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> key <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">queue</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		type <span class="token operator">=</span> <span class="token punctuation">(</span>type <span class="token operator">||</span> <span class="token string">"fx"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"queue"</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> q <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Speed up dequeue by getting out quickly if this is just a lookup</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>data <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> q <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>q <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			q <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> q<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">dequeue</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		type <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">"fx"</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> queue <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">,</span> fn <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// If the fx queue is dequeued, always remove the progress sentinel</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> fn <span class="token operator">===</span> <span class="token string">"inprogress"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fn <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> fn <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Add a progress sentinel to prevent the fx queue from being</span>
			<span class="token comment">// automatically dequeued</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"fx"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				queue<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">"inprogress"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">queue</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> type <span class="token operator">!==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			data <span class="token operator">=</span> type<span class="token punctuation">;</span>
			type <span class="token operator">=</span> <span class="token string">"fx"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> queue <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"fx"</span> <span class="token operator">&amp;&amp;</span> queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">"inprogress"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">dequeue</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Based off of the plugin by Clint Helfers, with permission.</span>
	<span class="token comment">// http://blindsignals.com/index.php/2009/07/jquery-delay/</span>
	<span class="token function-variable function">delay</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">time<span class="token punctuation">,</span> type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fx <span class="token operator">?</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">[</span>time<span class="token punctuation">]</span> <span class="token operator">||</span> time <span class="token operator">:</span> time<span class="token punctuation">;</span>
		type <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">"fx"</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> time <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">clearQueue</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span> type <span class="token operator">||</span> <span class="token string">"fx"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rclass <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\n\t]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
	rspace <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rreturn <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
	rspecialurl <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">href|src|style</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rtype <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(button|input)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rfocusable <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(button|input|object|select|textarea)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rclickable <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(a|area)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rradiocheck <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">radio|checkbox</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">attr</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>attr <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">removeAttr</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">addClass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				self<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> self<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> classNames <span class="token operator">=</span> <span class="token punctuation">(</span>value <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span> rspace <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>className <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						elem<span class="token punctuation">.</span>className <span class="token operator">=</span> value<span class="token punctuation">;</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> className <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> elem<span class="token punctuation">.</span>className <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">,</span> setClass <span class="token operator">=</span> elem<span class="token punctuation">.</span>className<span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cl <span class="token operator">=</span> classNames<span class="token punctuation">.</span>length<span class="token punctuation">;</span> c <span class="token operator">&lt;</span> cl<span class="token punctuation">;</span> c<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span> className<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> <span class="token string">" "</span> <span class="token operator">+</span> classNames<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
								setClass <span class="token operator">+=</span> <span class="token string">" "</span> <span class="token operator">+</span> classNames<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						elem<span class="token punctuation">.</span>className <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span> setClass <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">removeClass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				self<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> self<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>value <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token operator">||</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> classNames <span class="token operator">=</span> <span class="token punctuation">(</span>value <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>rspace<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>className <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> className <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> elem<span class="token punctuation">.</span>className <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rclass<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cl <span class="token operator">=</span> classNames<span class="token punctuation">.</span>length<span class="token punctuation">;</span> c <span class="token operator">&lt;</span> cl<span class="token punctuation">;</span> c<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							className <span class="token operator">=</span> className<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> classNames<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						elem<span class="token punctuation">.</span>className <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span> className <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						elem<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">toggleClass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value<span class="token punctuation">,</span> stateVal</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> value<span class="token punctuation">,</span> isBool <span class="token operator">=</span> <span class="token keyword">typeof</span> stateVal <span class="token operator">===</span> <span class="token string">"boolean"</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				self<span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> self<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stateVal<span class="token punctuation">)</span><span class="token punctuation">,</span> stateVal <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// toggle individual class names</span>
				<span class="token keyword">var</span> className<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					state <span class="token operator">=</span> stateVal<span class="token punctuation">,</span>
					classNames <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span> rspace <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>className <span class="token operator">=</span> classNames<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// check each className given, space seperated list</span>
					state <span class="token operator">=</span> isBool <span class="token operator">?</span> state <span class="token operator">:</span> <span class="token operator">!</span>self<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span> className <span class="token punctuation">)</span><span class="token punctuation">;</span>
					self<span class="token punctuation">[</span> state <span class="token operator">?</span> <span class="token string">"addClass"</span> <span class="token operator">:</span> <span class="token string">"removeClass"</span> <span class="token punctuation">]</span><span class="token punctuation">(</span> className <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"undefined"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"boolean"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// store className if set</span>
					jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"__className__"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// toggle whole className</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">||</span> value <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span> <span class="token string">""</span> <span class="token operator">:</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"__className__"</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">hasClass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> className <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> selector <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rclass<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> className <span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">val</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"option"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>specified <span class="token operator">?</span> elem<span class="token punctuation">.</span>value <span class="token operator">:</span> elem<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// We need to handle select boxes special</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"select"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> index <span class="token operator">=</span> elem<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">,</span>
						values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						options <span class="token operator">=</span> elem<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
						one <span class="token operator">=</span> elem<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"select-one"</span><span class="token punctuation">;</span>

					<span class="token comment">// Nothing was selected</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Loop through all the selected options</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> one <span class="token operator">?</span> index <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> max <span class="token operator">=</span> one <span class="token operator">?</span> index <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> options<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> max<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> option <span class="token operator">=</span> options<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span> option<span class="token punctuation">.</span>selected <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// Get the specifc value for the option</span>
							value <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token comment">// We don't need an array for one selects</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span> one <span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> value<span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// Multi-Selects return an array</span>
							values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">return</span> values<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Handle the case where in Webkit "" is returned instead of "on" if a value isn't specified</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> rradiocheck<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>type <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>checkOn <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">"on"</span> <span class="token operator">:</span> elem<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				

				<span class="token comment">// Everything else, we just grab the value</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rreturn<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> isFunction <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> val <span class="token operator">=</span> value<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> isFunction <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				val <span class="token operator">=</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> self<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Typecast each time if the value is a Function and the appended</span>
			<span class="token comment">// value is therefore different each time.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				val <span class="token operator">+=</span> <span class="token string">""</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> rradiocheck<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>checked <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span> self<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> val <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"select"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> values <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token string">"option"</span><span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>selected <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> values <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>values<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>selectedIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> val<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">attrFn</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">val</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
		
	<span class="token function-variable function">attr</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> pass</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// don't set attributes on text and comment nodes</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">8</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> pass <span class="token operator">&amp;&amp;</span> name <span class="token keyword">in</span> jQuery<span class="token punctuation">.</span>attrFn <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> notxml <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token comment">// Whether we are setting (or getting)</span>
			set <span class="token operator">=</span> value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

		<span class="token comment">// Try to normalize/fix the name</span>
		name <span class="token operator">=</span> notxml <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>props<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">||</span> name<span class="token punctuation">;</span>

		<span class="token comment">// Only do all the following if this is a node (faster for style)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// These attributes require special treatment</span>
			<span class="token keyword">var</span> special <span class="token operator">=</span> rspecialurl<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Safari mis-reports the default selected property of an option</span>
			<span class="token comment">// Accessing the parent's selectedIndex property fixes it</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"selected"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>optSelected <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> parent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					parent<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>
	
					<span class="token comment">// Make sure that it also works with optgroups, see #5701</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> parent<span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						parent<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// If applicable, access the attribute via the DOM 0 way</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> elem <span class="token operator">&amp;&amp;</span> notxml <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>special <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// We can't allow the type property to be changed (since it causes problems in IE)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"type"</span> <span class="token operator">&amp;&amp;</span> rtype<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> <span class="token string">"type property can't be changed"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					elem<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// browsers index elements by id/name on forms, give priority to attributes.</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"form"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">.</span>nodeValue<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set</span>
				<span class="token comment">// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"tabIndex"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> attributeNode <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span> <span class="token string">"tabIndex"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">return</span> attributeNode <span class="token operator">&amp;&amp;</span> attributeNode<span class="token punctuation">.</span>specified <span class="token operator">?</span>
						attributeNode<span class="token punctuation">.</span>value <span class="token operator">:</span>
						rfocusable<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName <span class="token punctuation">)</span> <span class="token operator">||</span> rclickable<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>href <span class="token operator">?</span>
							<span class="token number">0</span> <span class="token operator">:</span>
							<span class="token keyword">undefined</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> elem<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>style <span class="token operator">&amp;&amp;</span> notxml <span class="token operator">&amp;&amp;</span> name <span class="token operator">===</span> <span class="token string">"style"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> value<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// convert the value to a string (all browsers do this but IE) see #1070</span>
				elem<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> name<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token operator">+</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> attr <span class="token operator">=</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>hrefNormalized <span class="token operator">&amp;&amp;</span> notxml <span class="token operator">&amp;&amp;</span> special <span class="token operator">?</span>
					<span class="token comment">// Some attributes require a special call on IE</span>
					elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span> name<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token operator">:</span>
					elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Non-existent attributes return null, we normalize to undefined</span>
			<span class="token keyword">return</span> attr <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> attr<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// elem is actually elem.style ... set the style</span>
		<span class="token comment">// Using attr for specific style information is now deprecated. Use style instead.</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rnamespaces <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(.*)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token function-variable function">fcleanup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">nm</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> nm<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\w\s\.\|`]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">ch</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"\\"</span> <span class="token operator">+</span> ch<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/*
 * A number of helper functions used for managing events.
 * Many of the ideas behind this code originated from
 * Dean Edwards' addEvent library.
 */</span>
jQuery<span class="token punctuation">.</span>event <span class="token operator">=</span> <span class="token punctuation">{</span>

	<span class="token comment">// Bind an event to an element</span>
	<span class="token comment">// Original by Dean Edwards</span>
	<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> types<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">8</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// For whatever reason, IE has trouble passing the window object</span>
		<span class="token comment">// around, causing it to be cloned in the process</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>setInterval <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span> elem <span class="token operator">!==</span> window <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>frameElement <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem <span class="token operator">=</span> window<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> handleObjIn<span class="token punctuation">,</span> handleObj<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> handler<span class="token punctuation">.</span>handler <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			handleObjIn <span class="token operator">=</span> handler<span class="token punctuation">;</span>
			handler <span class="token operator">=</span> handleObjIn<span class="token punctuation">.</span>handler<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Make sure that the function being executed has a unique ID</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>handler<span class="token punctuation">.</span>guid <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			handler<span class="token punctuation">.</span>guid <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Init the element's event structure</span>
		<span class="token keyword">var</span> elemData <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// If no elemData is found then we must be trying to bind to one of the</span>
		<span class="token comment">// banned noData elements</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elemData <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> events <span class="token operator">=</span> elemData<span class="token punctuation">.</span>events <span class="token operator">=</span> elemData<span class="token punctuation">.</span>events <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			eventHandle <span class="token operator">=</span> elemData<span class="token punctuation">.</span>handle<span class="token punctuation">,</span> eventHandle<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>eventHandle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elemData<span class="token punctuation">.</span>handle <span class="token operator">=</span> <span class="token function-variable function">eventHandle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Handle the second event of a trigger and when</span>
				<span class="token comment">// an event is called after a page has unloaded</span>
				<span class="token keyword">return</span> <span class="token keyword">typeof</span> jQuery <span class="token operator">!==</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered <span class="token operator">?</span>
					jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> eventHandle<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> arguments <span class="token punctuation">)</span> <span class="token operator">:</span>
					<span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Add elem as a property of the handle function</span>
		<span class="token comment">// This is to prevent a memory leak with non-native events in IE.</span>
		eventHandle<span class="token punctuation">.</span>elem <span class="token operator">=</span> elem<span class="token punctuation">;</span>

		<span class="token comment">// Handle multiple events separated by a space</span>
		<span class="token comment">// jQuery(...).bind("mouseover mouseout", fn);</span>
		types <span class="token operator">=</span> types<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> type<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> namespaces<span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>type <span class="token operator">=</span> types<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			handleObj <span class="token operator">=</span> handleObjIn <span class="token operator">?</span>
				jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> handleObjIn<span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token punctuation">{</span> <span class="token literal-property property">handler</span><span class="token operator">:</span> handler<span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> data <span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Namespaced event handlers</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				namespaces <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> namespaces<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				handleObj<span class="token punctuation">.</span>namespace <span class="token operator">=</span> namespaces<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				namespaces <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				handleObj<span class="token punctuation">.</span>namespace <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			handleObj<span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
			handleObj<span class="token punctuation">.</span>guid <span class="token operator">=</span> handler<span class="token punctuation">.</span>guid<span class="token punctuation">;</span>

			<span class="token comment">// Get the current list of functions bound to this event</span>
			<span class="token keyword">var</span> handlers <span class="token operator">=</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">,</span>
				special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Init the event handler queue</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>handlers <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				handlers <span class="token operator">=</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Check for a special event handler</span>
				<span class="token comment">// Only use addEventListener/attachEvent if the special</span>
				<span class="token comment">// events handler returns false</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>special<span class="token punctuation">.</span>setup <span class="token operator">||</span> special<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> data<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> eventHandle <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Bind the global event handler to the element</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>addEventListener <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> eventHandle<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>attachEvent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						elem<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span> <span class="token string">"on"</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> eventHandle <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			
			<span class="token keyword">if</span> <span class="token punctuation">(</span> special<span class="token punctuation">.</span>add <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
				special<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> handleObj <span class="token punctuation">)</span><span class="token punctuation">;</span> 

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>handleObj<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>guid <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					handleObj<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>guid <span class="token operator">=</span> handler<span class="token punctuation">.</span>guid<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Add the function to the element's handler list</span>
			handlers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> handleObj <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Keep track of which events have been used, for global triggering</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>global<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Nullify elem to prevent memory leaks in IE</span>
		elem <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Detach an event or set of events from an element</span>
	<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> types<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> pos</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// don't do events on text and comment nodes</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">8</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> ret<span class="token punctuation">,</span> type<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> all<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> namespace<span class="token punctuation">,</span> special<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handleObj<span class="token punctuation">,</span> origType<span class="token punctuation">,</span>
			elemData <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">,</span>
			events <span class="token operator">=</span> elemData <span class="token operator">&amp;&amp;</span> elemData<span class="token punctuation">.</span>events<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elemData <span class="token operator">||</span> <span class="token operator">!</span>events <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// types is actually an event object here</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> types <span class="token operator">&amp;&amp;</span> types<span class="token punctuation">.</span>type <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			handler <span class="token operator">=</span> types<span class="token punctuation">.</span>handler<span class="token punctuation">;</span>
			types <span class="token operator">=</span> types<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Unbind all events for the element</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>types <span class="token operator">||</span> <span class="token keyword">typeof</span> types <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> types<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"."</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			types <span class="token operator">=</span> types <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> type <span class="token keyword">in</span> events <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token operator">+</span> types <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Handle multiple events separated by a space</span>
		<span class="token comment">// jQuery(...).unbind("mouseover mouseout", fn);</span>
		types <span class="token operator">=</span> types<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>type <span class="token operator">=</span> types<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			origType <span class="token operator">=</span> type<span class="token punctuation">;</span>
			handleObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			all <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
			namespaces <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>all <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Namespaced event handlers</span>
				namespaces <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> namespaces<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				namespace <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"(^|\\.)"</span> <span class="token operator">+</span> 
					jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> namespaces<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fcleanup <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"\\.(?:.*\\.)?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"(\\.|$)"</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>

			eventType <span class="token operator">=</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>eventType <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>handler <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> eventType<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					handleObj <span class="token operator">=</span> eventType<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> all <span class="token operator">||</span> namespace<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> handleObj<span class="token punctuation">.</span>namespace <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> origType<span class="token punctuation">,</span> handleObj<span class="token punctuation">.</span>handler<span class="token punctuation">,</span> j <span class="token punctuation">)</span><span class="token punctuation">;</span>
						eventType<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span> j<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> pos <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> eventType<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				handleObj <span class="token operator">=</span> eventType<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> handler<span class="token punctuation">.</span>guid <span class="token operator">===</span> handleObj<span class="token punctuation">.</span>guid <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// remove the given handler for the given type</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> all <span class="token operator">||</span> namespace<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> handleObj<span class="token punctuation">.</span>namespace <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> pos <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							eventType<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span> j<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span> special<span class="token punctuation">.</span>remove <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							special<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> handleObj <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> pos <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// remove generic event handler if no more handlers exist</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> eventType<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> pos <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> eventType<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>special<span class="token punctuation">.</span>teardown <span class="token operator">||</span> special<span class="token punctuation">.</span><span class="token function">teardown</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> namespaces <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">removeEvent</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> elemData<span class="token punctuation">.</span>handle <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				ret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token keyword">delete</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Remove the expando if it's no longer used</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span> events <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> handle <span class="token operator">=</span> elemData<span class="token punctuation">.</span>handle<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> handle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				handle<span class="token punctuation">.</span>elem <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">delete</span> elemData<span class="token punctuation">.</span>events<span class="token punctuation">;</span>
			<span class="token keyword">delete</span> elemData<span class="token punctuation">.</span>handle<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span> elemData <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// bubbling is internal</span>
	<span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> event<span class="token punctuation">,</span> data<span class="token punctuation">,</span> elem <span class="token comment">/*, bubbling */</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Event object or event type</span>
		<span class="token keyword">var</span> type <span class="token operator">=</span> event<span class="token punctuation">.</span>type <span class="token operator">||</span> event<span class="token punctuation">,</span>
			bubbling <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>bubbling <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			event <span class="token operator">=</span> <span class="token keyword">typeof</span> event <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">?</span>
				<span class="token comment">// jQuery.Event object</span>
				event<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">?</span> event <span class="token operator">:</span>
				<span class="token comment">// Object literal</span>
				jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">Event</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">,</span> event <span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token comment">// Just the event type (string)</span>
				jQuery<span class="token punctuation">.</span><span class="token function">Event</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"!"</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				event<span class="token punctuation">.</span>type <span class="token operator">=</span> type <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				event<span class="token punctuation">.</span>exclusive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Handle a global trigger</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Don't bubble custom events when global (to avoid too much overhead)</span>
				event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Only trigger if we've ever bound an event for it</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>global<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> event<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">.</span>elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Handle triggering a single element</span>

			<span class="token comment">// don't do events on text and comment nodes</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">8</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Clean up in case it is reused</span>
			event<span class="token punctuation">.</span>result <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			event<span class="token punctuation">.</span>target <span class="token operator">=</span> elem<span class="token punctuation">;</span>

			<span class="token comment">// Clone the incoming data, if any</span>
			data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
			data<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span> event <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		event<span class="token punctuation">.</span>currentTarget <span class="token operator">=</span> elem<span class="token punctuation">;</span>

		<span class="token comment">// Trigger the event, it is assumed that "handle" is a function</span>
		<span class="token keyword">var</span> handle <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"handle"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> handle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode <span class="token operator">||</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">;</span>

		<span class="token comment">// Trigger an inline bound script</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token punctuation">(</span>elem <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>noData<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">[</span> <span class="token string">"on"</span> <span class="token operator">+</span> type <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">[</span> <span class="token string">"on"</span> <span class="token operator">+</span> type <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> data <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					event<span class="token punctuation">.</span>result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

		<span class="token comment">// prevent IE from throwing an error for some elements with some event types, see #3533</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> parent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> event<span class="token punctuation">,</span> data<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span><span class="token function">isDefaultPrevented</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">,</span> old<span class="token punctuation">,</span>
				isClick <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">===</span> <span class="token string">"click"</span><span class="token punctuation">,</span>
				special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token operator">!</span>special<span class="token punctuation">.</span>_default <span class="token operator">||</span> special<span class="token punctuation">.</span><span class="token function">_default</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> event <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> 
				<span class="token operator">!</span>isClick <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>noData<span class="token punctuation">[</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> target<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// Make sure that we don't accidentally re-trigger the onFOO events</span>
						old <span class="token operator">=</span> target<span class="token punctuation">[</span> <span class="token string">"on"</span> <span class="token operator">+</span> type <span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span> old <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							target<span class="token punctuation">[</span> <span class="token string">"on"</span> <span class="token operator">+</span> type <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
						target<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

				<span class="token comment">// prevent IE from throwing an error for some elements with some event types, see #3533</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> old <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					target<span class="token punctuation">[</span> <span class="token string">"on"</span> <span class="token operator">+</span> type <span class="token punctuation">]</span> <span class="token operator">=</span> old<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">handle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> all<span class="token punctuation">,</span> handlers<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> namespace<span class="token punctuation">,</span> events<span class="token punctuation">;</span>

		event <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">fix</span><span class="token punctuation">(</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event <span class="token punctuation">)</span><span class="token punctuation">;</span>
		event<span class="token punctuation">.</span>currentTarget <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

		<span class="token comment">// Namespaced event handlers</span>
		all <span class="token operator">=</span> event<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>exclusive<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>all <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			namespaces <span class="token operator">=</span> event<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			event<span class="token punctuation">.</span>type <span class="token operator">=</span> namespaces<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			namespace <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"(^|\\.)"</span> <span class="token operator">+</span> namespaces<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"\\.(?:.*\\.)?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"(\\.|$)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> events <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"events"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> handlers <span class="token operator">=</span> events<span class="token punctuation">[</span> event<span class="token punctuation">.</span>type <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> events <span class="token operator">&amp;&amp;</span> handlers <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Clone the handlers to prevent manipulation</span>
			handlers <span class="token operator">=</span> handlers<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> handlers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> handleObj <span class="token operator">=</span> handlers<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Filter the functions by class</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> all <span class="token operator">||</span> namespace<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> handleObj<span class="token punctuation">.</span>namespace <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Pass in a reference to the handler function itself</span>
					<span class="token comment">// So that we can later remove it</span>
					event<span class="token punctuation">.</span>handler <span class="token operator">=</span> handleObj<span class="token punctuation">.</span>handler<span class="token punctuation">;</span>
					event<span class="token punctuation">.</span>data <span class="token operator">=</span> handleObj<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
					event<span class="token punctuation">.</span>handleObj <span class="token operator">=</span> handleObj<span class="token punctuation">;</span>
	
					<span class="token keyword">var</span> ret <span class="token operator">=</span> handleObj<span class="token punctuation">.</span><span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						event<span class="token punctuation">.</span>result <span class="token operator">=</span> ret<span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span><span class="token function">isImmediatePropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> event<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token string">"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which"</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

	<span class="token function-variable function">fix</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> event<span class="token punctuation">[</span> expando <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> event<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// store a copy of the original event object</span>
		<span class="token comment">// and "clone" to set read-only properties</span>
		<span class="token keyword">var</span> originalEvent <span class="token operator">=</span> event<span class="token punctuation">;</span>
		event <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Event</span><span class="token punctuation">(</span> originalEvent <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>length<span class="token punctuation">,</span> prop<span class="token punctuation">;</span> i<span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			prop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">[</span> <span class="token operator">--</span>i <span class="token punctuation">]</span><span class="token punctuation">;</span>
			event<span class="token punctuation">[</span> prop <span class="token punctuation">]</span> <span class="token operator">=</span> originalEvent<span class="token punctuation">[</span> prop <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Fix target property, if necessary</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>target <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			event<span class="token punctuation">.</span>target <span class="token operator">=</span> event<span class="token punctuation">.</span>srcElement <span class="token operator">||</span> document<span class="token punctuation">;</span> <span class="token comment">// Fixes #1925 where srcElement might not be defined either</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// check if target is a textnode (safari)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			event<span class="token punctuation">.</span>target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Add relatedTarget, if necessary</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>relatedTarget <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>fromElement <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			event<span class="token punctuation">.</span>relatedTarget <span class="token operator">=</span> event<span class="token punctuation">.</span>fromElement <span class="token operator">===</span> event<span class="token punctuation">.</span>target <span class="token operator">?</span> event<span class="token punctuation">.</span>toElement <span class="token operator">:</span> event<span class="token punctuation">.</span>fromElement<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Calculate pageX/Y if missing and clientX/Y available</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>pageX <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>clientX <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
			event<span class="token punctuation">.</span>pageX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token punctuation">(</span>doc <span class="token operator">&amp;&amp;</span> doc<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>doc <span class="token operator">&amp;&amp;</span> doc<span class="token punctuation">.</span>clientLeft <span class="token operator">||</span> body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>clientLeft <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			event<span class="token punctuation">.</span>pageY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token punctuation">(</span>doc <span class="token operator">&amp;&amp;</span> doc<span class="token punctuation">.</span>scrollTop  <span class="token operator">||</span> body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>scrollTop  <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>doc <span class="token operator">&amp;&amp;</span> doc<span class="token punctuation">.</span>clientTop  <span class="token operator">||</span> body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>clientTop  <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Add which for key events</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>which <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>charCode <span class="token operator">||</span> event<span class="token punctuation">.</span>charCode <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> event<span class="token punctuation">.</span>charCode <span class="token operator">:</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			event<span class="token punctuation">.</span>which <span class="token operator">=</span> event<span class="token punctuation">.</span>charCode <span class="token operator">||</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Add metaKey to non-Mac browsers (use ctrl for PC's and Meta for Macs)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>metaKey <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>ctrlKey <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			event<span class="token punctuation">.</span>metaKey <span class="token operator">=</span> event<span class="token punctuation">.</span>ctrlKey<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Add which for click: 1 === left; 2 === middle; 3 === right</span>
		<span class="token comment">// Note: button is not normalized, so don't use it</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>which <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>button <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			event<span class="token punctuation">.</span>which <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>button <span class="token operator">&amp;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>button <span class="token operator">&amp;</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token number">3</span> <span class="token operator">:</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>button <span class="token operator">&amp;</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> event<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Deprecated, use jQuery.guid instead</span>
	<span class="token literal-property property">guid</span><span class="token operator">:</span> <span class="token number">1E8</span><span class="token punctuation">,</span>

	<span class="token comment">// Deprecated, use jQuery.proxy instead</span>
	<span class="token literal-property property">proxy</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>proxy<span class="token punctuation">,</span>

	<span class="token literal-property property">special</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">ready</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token comment">// Make sure the ready event is setup</span>
			<span class="token literal-property property">setup</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>bindReady<span class="token punctuation">,</span>
			<span class="token literal-property property">teardown</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>noop
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">live</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">handleObj</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> handleObj<span class="token punctuation">.</span>origType<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> handleObj<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">handler</span><span class="token operator">:</span> liveHandler<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">handleObj</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> remove <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					type <span class="token operator">=</span> handleObj<span class="token punctuation">.</span>origType<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rnamespaces<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"events"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>live <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>origType<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rnamespaces<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						remove <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> remove <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> handleObj<span class="token punctuation">.</span>origType<span class="token punctuation">,</span> liveHandler <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">beforeunload</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> eventHandle</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// We only want to do this special case on windows</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>setInterval <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>onbeforeunload <span class="token operator">=</span> eventHandle<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">namespaces<span class="token punctuation">,</span> eventHandle</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onbeforeunload <span class="token operator">===</span> eventHandle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>onbeforeunload <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> removeEvent <span class="token operator">=</span> document<span class="token punctuation">.</span>removeEventListener <span class="token operator">?</span>
	<span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handle</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		elem<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> handle<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token operator">:</span> 
	<span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handle</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		elem<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span> <span class="token string">"on"</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> handle <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function-variable function">Event</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">src</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Allow instantiation without the 'new' keyword</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>preventDefault <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span> src <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Event object</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> src <span class="token operator">&amp;&amp;</span> src<span class="token punctuation">.</span>type <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent <span class="token operator">=</span> src<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> src<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
	<span class="token comment">// Event type</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> src<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// timeStamp is buggy for some events on Firefox(#3843)</span>
	<span class="token comment">// So we won't rely on the native value</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>timeStamp <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Mark it as fixed</span>
	<span class="token keyword">this</span><span class="token punctuation">[</span> expando <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">returnFalse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">returnTrue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding</span>
<span class="token comment">// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html</span>
jQuery<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">preventDefault</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>isDefaultPrevented <span class="token operator">=</span> returnTrue<span class="token punctuation">;</span>

		<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>e <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">// if preventDefault exists run it on the original event</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> e<span class="token punctuation">.</span>preventDefault <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// otherwise set the returnValue property of the original event to false (IE)</span>
		e<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">stopPropagation</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>isPropagationStopped <span class="token operator">=</span> returnTrue<span class="token punctuation">;</span>

		<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>e <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// if stopPropagation exists run it on the original event</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> e<span class="token punctuation">.</span>stopPropagation <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// otherwise set the cancelBubble property of the original event to true (IE)</span>
		e<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">stopImmediatePropagation</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>isImmediatePropagationStopped <span class="token operator">=</span> returnTrue<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">isDefaultPrevented</span><span class="token operator">:</span> returnFalse<span class="token punctuation">,</span>
	<span class="token literal-property property">isPropagationStopped</span><span class="token operator">:</span> returnFalse<span class="token punctuation">,</span>
	<span class="token literal-property property">isImmediatePropagationStopped</span><span class="token operator">:</span> returnFalse
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Checks if an event happened on an element within another element</span>
<span class="token comment">// Used in jQuery.event.special.mouseenter and mouseleave handlers</span>
<span class="token keyword">var</span> <span class="token function-variable function">withinElement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Check if mouse(over|out) are still within the same parent element</span>
	<span class="token keyword">var</span> parent <span class="token operator">=</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">;</span>

	<span class="token comment">// Firefox sometimes assigns relatedTarget a XUL element</span>
	<span class="token comment">// which we cannot access the parentNode property of</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token comment">// Traverse up the tree</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> parent <span class="token operator">&amp;&amp;</span> parent <span class="token operator">!==</span> <span class="token keyword">this</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> parent <span class="token operator">!==</span> <span class="token keyword">this</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// set the correct event type</span>
			event<span class="token punctuation">.</span>type <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

			<span class="token comment">// handle event if we actually just moused on to a non sub-element</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token comment">// assuming we've left the element since we most likely mousedover a xul element</span>
	<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// In case of event delegation, we only need to rename the event.type,</span>
<span class="token comment">// liveHandler will take care of the rest.</span>
<span class="token function-variable function">delegate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	event<span class="token punctuation">.</span>type <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Create mouseenter and mouseleave events</span>
jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">mouseenter</span><span class="token operator">:</span> <span class="token string">"mouseover"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">mouseleave</span><span class="token operator">:</span> <span class="token string">"mouseout"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">orig<span class="token punctuation">,</span> fix</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span> orig <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> fix<span class="token punctuation">,</span> data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>selector <span class="token operator">?</span> delegate <span class="token operator">:</span> withinElement<span class="token punctuation">,</span> orig <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> fix<span class="token punctuation">,</span> data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>selector <span class="token operator">?</span> delegate <span class="token operator">:</span> withinElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// submit delegation</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>submitBubbles <span class="token punctuation">)</span> <span class="token punctuation">{</span>

	jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">.</span>submit <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data<span class="token punctuation">,</span> namespaces</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"form"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"click.specialSubmit"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> elem <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">,</span> type <span class="token operator">=</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">"submit"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"image"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"submit"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"keypress.specialSubmit"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> elem <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">,</span> type <span class="token operator">=</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">"text"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"password"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">13</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"submit"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">namespaces</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">".specialSubmit"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">// change delegation, happens here so we have bind.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>changeBubbles <span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> formElems <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">textarea|input|select</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>

	changeFilters<span class="token punctuation">,</span>

	<span class="token function-variable function">getVal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> type <span class="token operator">=</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">,</span> val <span class="token operator">=</span> elem<span class="token punctuation">.</span>value<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"radio"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"checkbox"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			val <span class="token operator">=</span> elem<span class="token punctuation">.</span>checked<span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"select-multiple"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			val <span class="token operator">=</span> elem<span class="token punctuation">.</span>selectedIndex <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span>
				jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> elem<span class="token punctuation">.</span>selected<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token string">""</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"select"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			val <span class="token operator">=</span> elem<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> val<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">testChange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">testChange</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elem <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">,</span> data<span class="token punctuation">,</span> val<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>formElems<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName <span class="token punctuation">)</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>readOnly <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"_change_data"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		val <span class="token operator">=</span> <span class="token function">getVal</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// the current data will be also retrieved by beforeactivate</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> e<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">"focusout"</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">"radio"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"_change_data"</span><span class="token punctuation">,</span> val <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> val <span class="token operator">===</span> data <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> val <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"change"</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> e<span class="token punctuation">,</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">.</span>change <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">focusout</span><span class="token operator">:</span> testChange<span class="token punctuation">,</span> 

			<span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">,</span> type <span class="token operator">=</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"radio"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"checkbox"</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"select"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token function">testChange</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Change has to be called before submit</span>
			<span class="token comment">// Keydown will be called before keypress, which is used in submit-event delegation</span>
			<span class="token function-variable function">keydown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">,</span> type <span class="token operator">=</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">13</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"textarea"</span><span class="token punctuation">)</span> <span class="token operator">||</span>
					<span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">32</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">"checkbox"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"radio"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
					type <span class="token operator">===</span> <span class="token string">"select-multiple"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token function">testChange</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Beforeactivate happens also before the previous element is blurred</span>
			<span class="token comment">// with this event you can't trigger a change event, but you can store</span>
			<span class="token comment">// information/focus[in] is not needed anymore</span>
			<span class="token function-variable function">beforeactivate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
				jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"_change_data"</span><span class="token punctuation">,</span> <span class="token function">getVal</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data<span class="token punctuation">,</span> namespaces</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"file"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> type <span class="token keyword">in</span> changeFilters <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> type <span class="token operator">+</span> <span class="token string">".specialChange"</span><span class="token punctuation">,</span> changeFilters<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> formElems<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeName <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">namespaces</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">".specialChange"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> formElems<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeName <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	changeFilters <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">.</span>change<span class="token punctuation">.</span>filters<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> args</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
	<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> args <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Create "bubbling" focus and blur events</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>addEventListener <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">focus</span><span class="token operator">:</span> <span class="token string">"focusin"</span><span class="token punctuation">,</span> <span class="token literal-property property">blur</span><span class="token operator">:</span> <span class="token string">"focusout"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">orig<span class="token punctuation">,</span> fix</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span> fix <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span> orig<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> 
			<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span> orig<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">function</span> <span class="token function">handler</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
			e <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">fix</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
			e<span class="token punctuation">.</span>type <span class="token operator">=</span> fix<span class="token punctuation">;</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"bind"</span><span class="token punctuation">,</span> <span class="token string">"one"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Handle object literals</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> key <span class="token keyword">in</span> type <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> data<span class="token punctuation">,</span> type<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fn <span class="token operator">=</span> data<span class="token punctuation">;</span>
			data <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> handler <span class="token operator">=</span> name <span class="token operator">===</span> <span class="token string">"one"</span> <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span> fn<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span> event<span class="token punctuation">,</span> handler <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> fn<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"unload"</span> <span class="token operator">&amp;&amp;</span> name <span class="token operator">!==</span> <span class="token string">"one"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">unbind</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Handle object literals</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>type<span class="token punctuation">.</span>preventDefault <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> key <span class="token keyword">in</span> type <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> type<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">delegate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector<span class="token punctuation">,</span> types<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">live</span><span class="token punctuation">(</span> types<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">undelegate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector<span class="token punctuation">,</span> types<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span> <span class="token string">"live"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">die</span><span class="token punctuation">(</span> types<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">triggerHandler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> event <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Event</span><span class="token punctuation">(</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>
			event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> event<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> event<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Save reference to arguments for access in closure</span>
		<span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

		<span class="token comment">// link all the functions, so any of them can unbind this click handler</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span> fn<span class="token punctuation">,</span> args<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span> fn<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Figure out which function to execute</span>
			<span class="token keyword">var</span> lastToggle <span class="token operator">=</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"lastToggle"</span> <span class="token operator">+</span> fn<span class="token punctuation">.</span>guid <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token operator">%</span> i<span class="token punctuation">;</span>
			jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"lastToggle"</span> <span class="token operator">+</span> fn<span class="token punctuation">.</span>guid<span class="token punctuation">,</span> lastToggle <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Make sure that clicks stop</span>
			event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// and execute the function</span>
			<span class="token keyword">return</span> args<span class="token punctuation">[</span> lastToggle <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">hover</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fnOver<span class="token punctuation">,</span> fnOut</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">mouseenter</span><span class="token punctuation">(</span> fnOver <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mouseleave</span><span class="token punctuation">(</span> fnOut <span class="token operator">||</span> fnOver <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> liveMap <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">focus</span><span class="token operator">:</span> <span class="token string">"focusin"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">blur</span><span class="token operator">:</span> <span class="token string">"focusout"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">mouseenter</span><span class="token operator">:</span> <span class="token string">"mouseover"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">mouseleave</span><span class="token operator">:</span> <span class="token string">"mouseout"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"live"</span><span class="token punctuation">,</span> <span class="token string">"die"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> types<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> origSelector <span class="token comment">/* Internal Use Only */</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> type<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> match<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> preType<span class="token punctuation">,</span>
			selector <span class="token operator">=</span> origSelector <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selector<span class="token punctuation">,</span>
			context <span class="token operator">=</span> origSelector <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fn <span class="token operator">=</span> data<span class="token punctuation">;</span>
			data <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		types <span class="token operator">=</span> <span class="token punctuation">(</span>types <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>type <span class="token operator">=</span> types<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			match <span class="token operator">=</span> rnamespaces<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>
			namespaces <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> match <span class="token punctuation">)</span>  <span class="token punctuation">{</span>
				namespaces <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> rnamespaces<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"hover"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				types<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token string">"mouseenter"</span> <span class="token operator">+</span> namespaces<span class="token punctuation">,</span> <span class="token string">"mouseleave"</span> <span class="token operator">+</span> namespaces <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			preType <span class="token operator">=</span> type<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"focus"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"blur"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				types<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> liveMap<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">+</span> namespaces <span class="token punctuation">)</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> type <span class="token operator">+</span> namespaces<span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				type <span class="token operator">=</span> <span class="token punctuation">(</span>liveMap<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">||</span> type<span class="token punctuation">)</span> <span class="token operator">+</span> namespaces<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"live"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// bind live handler</span>
				context<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">liveConvert</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> selector <span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span> <span class="token literal-property property">selector</span><span class="token operator">:</span> selector<span class="token punctuation">,</span> <span class="token literal-property property">handler</span><span class="token operator">:</span> fn<span class="token punctuation">,</span> <span class="token literal-property property">origType</span><span class="token operator">:</span> type<span class="token punctuation">,</span> <span class="token literal-property property">origHandler</span><span class="token operator">:</span> fn<span class="token punctuation">,</span> <span class="token literal-property property">preType</span><span class="token operator">:</span> preType <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token comment">// unbind live handler</span>
				context<span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span> <span class="token function">liveConvert</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> selector <span class="token punctuation">)</span><span class="token punctuation">,</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">liveHandler</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> stop<span class="token punctuation">,</span> elems <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> selectors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> args <span class="token operator">=</span> arguments<span class="token punctuation">,</span>
		related<span class="token punctuation">,</span> match<span class="token punctuation">,</span> handleObj<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> l<span class="token punctuation">,</span> data<span class="token punctuation">,</span>
		events <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"events"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Make sure we avoid non-left-click bubbling in Firefox (#3861)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>liveFired <span class="token operator">===</span> <span class="token keyword">this</span> <span class="token operator">||</span> <span class="token operator">!</span>events <span class="token operator">||</span> <span class="token operator">!</span>events<span class="token punctuation">.</span>live <span class="token operator">||</span> event<span class="token punctuation">.</span>button <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"click"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	event<span class="token punctuation">.</span>liveFired <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> live <span class="token operator">=</span> events<span class="token punctuation">.</span>live<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> live<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		handleObj <span class="token operator">=</span> live<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> handleObj<span class="token punctuation">.</span>origType<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> rnamespaces<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span> <span class="token operator">===</span> event<span class="token punctuation">.</span>type <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			selectors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> handleObj<span class="token punctuation">.</span>selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			live<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span> j<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	match <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> event<span class="token punctuation">.</span>target <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span> selectors<span class="token punctuation">,</span> event<span class="token punctuation">.</span>currentTarget <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> match<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> live<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			handleObj <span class="token operator">=</span> live<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>selector <span class="token operator">===</span> handleObj<span class="token punctuation">.</span>selector <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elem <span class="token operator">=</span> match<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>elem<span class="token punctuation">;</span>
				related <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

				<span class="token comment">// Those two events require additional checking</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> handleObj<span class="token punctuation">.</span>preType <span class="token operator">===</span> <span class="token string">"mouseenter"</span> <span class="token operator">||</span> handleObj<span class="token punctuation">.</span>preType <span class="token operator">===</span> <span class="token string">"mouseleave"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					related <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> event<span class="token punctuation">.</span>relatedTarget <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span> handleObj<span class="token punctuation">.</span>selector <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>related <span class="token operator">||</span> related <span class="token operator">!==</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					elems<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">elem</span><span class="token operator">:</span> elem<span class="token punctuation">,</span> <span class="token literal-property property">handleObj</span><span class="token operator">:</span> handleObj <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		match <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		event<span class="token punctuation">.</span>currentTarget <span class="token operator">=</span> match<span class="token punctuation">.</span>elem<span class="token punctuation">;</span>
		event<span class="token punctuation">.</span>data <span class="token operator">=</span> match<span class="token punctuation">.</span>handleObj<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
		event<span class="token punctuation">.</span>handleObj <span class="token operator">=</span> match<span class="token punctuation">.</span>handleObj<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">.</span>handleObj<span class="token punctuation">.</span><span class="token function">origHandler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> match<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> args <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> stop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">liveConvert</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token string">"live."</span> <span class="token operator">+</span> <span class="token punctuation">(</span>type <span class="token operator">&amp;&amp;</span> type <span class="token operator">!==</span> <span class="token string">"*"</span> <span class="token operator">?</span> type <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> selector<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"`"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> </span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token string">"blur focus focusin focusout load resize scroll unload click dblclick "</span> <span class="token operator">+</span>
	<span class="token string">"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "</span> <span class="token operator">+</span>
	<span class="token string">"change select submit keydown keypress keyup error"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// Handle event binding</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> fn <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span> name<span class="token punctuation">,</span> fn <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>attrFn <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>attrFn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Prevent memory leaks in IE</span>
<span class="token comment">// Window isn't included so as not to unbind existing unload events</span>
<span class="token comment">// More info:</span>
<span class="token comment">//  - http://isaacschlueter.com/2006/10/msie-memory-leaks/</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> window<span class="token punctuation">.</span>attachEvent <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>window<span class="token punctuation">.</span>addEventListener <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	window<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">"onunload"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> id <span class="token keyword">in</span> jQuery<span class="token punctuation">.</span>cache <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">.</span>handle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Try/Catch is to handle iframes being unloaded, see #4280</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">.</span>handle<span class="token punctuation">.</span>elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*!
 * Sizzle CSS Selector Engine - v1.0
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token keyword">var</span> chunker <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
	done <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
	toString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">,</span>
	hasDuplicate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	baseHasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token comment">// Here we check if the JavaScript engine is using some sort of</span>
<span class="token comment">// optimization where it does not always call our comparision</span>
<span class="token comment">// function. If that is the case, discard the hasDuplicate value.</span>
<span class="token comment">//   Thus far that includes Google Chrome.</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	baseHasDuplicate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">Sizzle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context<span class="token punctuation">,</span> results<span class="token punctuation">,</span> seed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	results <span class="token operator">=</span> results <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> origContext <span class="token operator">=</span> context <span class="token operator">=</span> context <span class="token operator">||</span> document<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">9</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>selector <span class="token operator">||</span> <span class="token keyword">typeof</span> selector <span class="token operator">!==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> results<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> parts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> m<span class="token punctuation">,</span> set<span class="token punctuation">,</span> checkSet<span class="token punctuation">,</span> extra<span class="token punctuation">,</span> prune <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> contextXML <span class="token operator">=</span> <span class="token function">isXML</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">,</span>
		soFar <span class="token operator">=</span> selector<span class="token punctuation">;</span>
	
	<span class="token comment">// Reset the position of the chunker regexp (start from head)</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>chunker<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m <span class="token operator">=</span> chunker<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>soFar<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		soFar <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		
		parts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			extra <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> parts<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> origPOS<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> parts<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			set <span class="token operator">=</span> <span class="token function">posProcess</span><span class="token punctuation">(</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> context <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			set <span class="token operator">=</span> Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">?</span>
				<span class="token punctuation">[</span> context <span class="token punctuation">]</span> <span class="token operator">:</span>
				<span class="token function">Sizzle</span><span class="token punctuation">(</span> parts<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> context <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span> parts<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				selector <span class="token operator">=</span> parts<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span> selector <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					selector <span class="token operator">+=</span> parts<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				
				set <span class="token operator">=</span> <span class="token function">posProcess</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> set <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">// Take a shortcut and set the context if the root selector is an ID</span>
		<span class="token comment">// (but not if it'll be faster if the inner selector is an ID)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>seed <span class="token operator">&amp;&amp;</span> parts<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>contextXML <span class="token operator">&amp;&amp;</span>
				Expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">ID</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>Expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">ID</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>parts<span class="token punctuation">[</span>parts<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ret <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> parts<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> context<span class="token punctuation">,</span> contextXML <span class="token punctuation">)</span><span class="token punctuation">;</span>
			context <span class="token operator">=</span> ret<span class="token punctuation">.</span>expr <span class="token operator">?</span> Sizzle<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> ret<span class="token punctuation">.</span>expr<span class="token punctuation">,</span> ret<span class="token punctuation">.</span>set <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> ret<span class="token punctuation">.</span>set<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> context <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ret <span class="token operator">=</span> seed <span class="token operator">?</span>
				<span class="token punctuation">{</span> <span class="token literal-property property">expr</span><span class="token operator">:</span> parts<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">set</span><span class="token operator">:</span> <span class="token function">makeArray</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">:</span>
				Sizzle<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> parts<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parts<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"~"</span> <span class="token operator">||</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"+"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>parentNode <span class="token operator">?</span> context<span class="token punctuation">.</span>parentNode <span class="token operator">:</span> context<span class="token punctuation">,</span> contextXML <span class="token punctuation">)</span><span class="token punctuation">;</span>
			set <span class="token operator">=</span> ret<span class="token punctuation">.</span>expr <span class="token operator">?</span> Sizzle<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> ret<span class="token punctuation">.</span>expr<span class="token punctuation">,</span> ret<span class="token punctuation">.</span>set <span class="token punctuation">)</span> <span class="token operator">:</span> ret<span class="token punctuation">.</span>set<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> parts<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				checkSet <span class="token operator">=</span> <span class="token function">makeArray</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				prune <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span> parts<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> cur <span class="token operator">=</span> parts<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pop <span class="token operator">=</span> cur<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span> cur <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					cur <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					pop <span class="token operator">=</span> parts<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> pop <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					pop <span class="token operator">=</span> context<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span> cur <span class="token punctuation">]</span><span class="token punctuation">(</span> checkSet<span class="token punctuation">,</span> pop<span class="token punctuation">,</span> contextXML <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			checkSet <span class="token operator">=</span> parts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>checkSet <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		checkSet <span class="token operator">=</span> set<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>checkSet <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Sizzle<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> cur <span class="token operator">||</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>checkSet<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"[object Array]"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>prune <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> results<span class="token punctuation">,</span> checkSet <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> context <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">||</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">contains</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token keyword">set</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token keyword">set</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token function">makeArray</span><span class="token punctuation">(</span> checkSet<span class="token punctuation">,</span> results <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> extra <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">Sizzle</span><span class="token punctuation">(</span> extra<span class="token punctuation">,</span> origContext<span class="token punctuation">,</span> results<span class="token punctuation">,</span> seed <span class="token punctuation">)</span><span class="token punctuation">;</span>
		Sizzle<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span> results <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> results<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Sizzle<span class="token punctuation">.</span><span class="token function-variable function">uniqueSort</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">results</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> sortOrder <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		hasDuplicate <span class="token operator">=</span> baseHasDuplicate<span class="token punctuation">;</span>
		results<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortOrder<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> hasDuplicate <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> results<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> results<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					results<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> results<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Sizzle<span class="token punctuation">.</span><span class="token function-variable function">matches</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">expr<span class="token punctuation">,</span> <span class="token keyword">set</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">Sizzle</span><span class="token punctuation">(</span>expr<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> set<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Sizzle<span class="token punctuation">.</span><span class="token function-variable function">find</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">expr<span class="token punctuation">,</span> context<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> set<span class="token punctuation">,</span> match<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>expr <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> Expr<span class="token punctuation">.</span>order<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> type <span class="token operator">=</span> Expr<span class="token punctuation">.</span>order<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> match<span class="token punctuation">;</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>match <span class="token operator">=</span> Expr<span class="token punctuation">.</span>leftMatch<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> expr <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> left <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			match<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> left<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span> left<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"\\"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				set <span class="token operator">=</span> Expr<span class="token punctuation">.</span>find<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">(</span> match<span class="token punctuation">,</span> context<span class="token punctuation">,</span> isXML <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					expr <span class="token operator">=</span> expr<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>set <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		set <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">set</span><span class="token operator">:</span> set<span class="token punctuation">,</span> <span class="token literal-property property">expr</span><span class="token operator">:</span> expr<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Sizzle<span class="token punctuation">.</span><span class="token function-variable function">filter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">expr<span class="token punctuation">,</span> set<span class="token punctuation">,</span> inplace<span class="token punctuation">,</span> not</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> old <span class="token operator">=</span> expr<span class="token punctuation">,</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> curLoop <span class="token operator">=</span> set<span class="token punctuation">,</span> match<span class="token punctuation">,</span> anyFound<span class="token punctuation">,</span>
		isXMLFilter <span class="token operator">=</span> set <span class="token operator">&amp;&amp;</span> <span class="token keyword">set</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isXML</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span> expr <span class="token operator">&amp;&amp;</span> set<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> type <span class="token keyword">in</span> Expr<span class="token punctuation">.</span>filter <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>match <span class="token operator">=</span> Expr<span class="token punctuation">.</span>leftMatch<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> expr <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> filter <span class="token operator">=</span> Expr<span class="token punctuation">.</span>filter<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">,</span> found<span class="token punctuation">,</span> item<span class="token punctuation">,</span> left <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				anyFound <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

				match<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> left<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span> left<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"\\"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">continue</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> curLoop <span class="token operator">===</span> result <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> Expr<span class="token punctuation">.</span>preFilter<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					match <span class="token operator">=</span> Expr<span class="token punctuation">.</span>preFilter<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">(</span> match<span class="token punctuation">,</span> curLoop<span class="token punctuation">,</span> inplace<span class="token punctuation">,</span> result<span class="token punctuation">,</span> not<span class="token punctuation">,</span> isXMLFilter <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>match <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						anyFound <span class="token operator">=</span> found <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> match <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">continue</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> match <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>item <span class="token operator">=</span> curLoop<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> item <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							found <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span> item<span class="token punctuation">,</span> match<span class="token punctuation">,</span> i<span class="token punctuation">,</span> curLoop <span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">var</span> pass <span class="token operator">=</span> not <span class="token operator">^</span> <span class="token operator">!</span><span class="token operator">!</span>found<span class="token punctuation">;</span>

							<span class="token keyword">if</span> <span class="token punctuation">(</span> inplace <span class="token operator">&amp;&amp;</span> found <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span> pass <span class="token punctuation">)</span> <span class="token punctuation">{</span>
									anyFound <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
									curLoop<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> pass <span class="token punctuation">)</span> <span class="token punctuation">{</span>
								result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> item <span class="token punctuation">)</span><span class="token punctuation">;</span>
								anyFound <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> found <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>inplace <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						curLoop <span class="token operator">=</span> result<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					expr <span class="token operator">=</span> expr<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>anyFound <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Improper expression</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> expr <span class="token operator">===</span> old <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> anyFound <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				Sizzle<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> expr <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		old <span class="token operator">=</span> expr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> curLoop<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Sizzle<span class="token punctuation">.</span><span class="token function-variable function">error</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">msg</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">throw</span> <span class="token string">"Syntax error, unrecognized expression: "</span> <span class="token operator">+</span> msg<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Expr <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>selectors <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">order</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"ID"</span><span class="token punctuation">,</span> <span class="token string">"NAME"</span><span class="token punctuation">,</span> <span class="token string">"TAG"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token literal-property property">match</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token constant">ID</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">#((?:[\w\u00c0-\uFFFF-]|\\.)+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token constant">CLASS</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.((?:[\w\u00c0-\uFFFF-]|\\.)+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token constant">NAME</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token constant">ATTR</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token constant">TAG</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token constant">CHILD</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token constant">POS</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token constant">PSEUDO</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?</span><span class="token regex-delimiter">/</span></span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">leftMatch</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">attrMap</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">"class"</span><span class="token operator">:</span> <span class="token string">"className"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"for"</span><span class="token operator">:</span> <span class="token string">"htmlFor"</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">attrHandle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">href</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">relative</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">"+"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">checkSet<span class="token punctuation">,</span> part</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> isPartStr <span class="token operator">=</span> <span class="token keyword">typeof</span> part <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
				isTag <span class="token operator">=</span> isPartStr <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\W</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span><span class="token punctuation">,</span>
				isPartStrNotTag <span class="token operator">=</span> isPartStr <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isTag<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> isTag <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				part <span class="token operator">=</span> part<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> checkSet<span class="token punctuation">.</span>length<span class="token punctuation">,</span> elem<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>previousSibling<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

					checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> isPartStrNotTag <span class="token operator">||</span> elem <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> part <span class="token operator">?</span>
						elem <span class="token operator">||</span> <span class="token boolean">false</span> <span class="token operator">:</span>
						elem <span class="token operator">===</span> part<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> isPartStrNotTag <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				Sizzle<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> part<span class="token punctuation">,</span> checkSet<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">">"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">checkSet<span class="token punctuation">,</span> part</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> isPartStr <span class="token operator">=</span> <span class="token keyword">typeof</span> part <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> isPartStr <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\W</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				part <span class="token operator">=</span> part<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> checkSet<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> elem <span class="token operator">=</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
						checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> parent<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> part <span class="token operator">?</span> parent <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> checkSet<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> elem <span class="token operator">=</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> isPartStr <span class="token operator">?</span>
							elem<span class="token punctuation">.</span>parentNode <span class="token operator">:</span>
							elem<span class="token punctuation">.</span>parentNode <span class="token operator">===</span> part<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> isPartStr <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					Sizzle<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> part<span class="token punctuation">,</span> checkSet<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">""</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">checkSet<span class="token punctuation">,</span> part<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> doneName <span class="token operator">=</span> done<span class="token operator">++</span><span class="token punctuation">,</span> checkFn <span class="token operator">=</span> dirCheck<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> part <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\W</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> nodeCheck <span class="token operator">=</span> part <span class="token operator">=</span> part<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				checkFn <span class="token operator">=</span> dirNodeCheck<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token function">checkFn</span><span class="token punctuation">(</span><span class="token string">"parentNode"</span><span class="token punctuation">,</span> part<span class="token punctuation">,</span> doneName<span class="token punctuation">,</span> checkSet<span class="token punctuation">,</span> nodeCheck<span class="token punctuation">,</span> isXML<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">"~"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">checkSet<span class="token punctuation">,</span> part<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> doneName <span class="token operator">=</span> done<span class="token operator">++</span><span class="token punctuation">,</span> checkFn <span class="token operator">=</span> dirCheck<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> part <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\W</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> nodeCheck <span class="token operator">=</span> part <span class="token operator">=</span> part<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				checkFn <span class="token operator">=</span> dirNodeCheck<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token function">checkFn</span><span class="token punctuation">(</span><span class="token string">"previousSibling"</span><span class="token punctuation">,</span> part<span class="token punctuation">,</span> doneName<span class="token punctuation">,</span> checkSet<span class="token punctuation">,</span> nodeCheck<span class="token punctuation">,</span> isXML<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">find</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">ID</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> context<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementById <span class="token operator">!==</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isXML <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> m <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> m <span class="token operator">?</span> <span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">NAME</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementsByName <span class="token operator">!==</span> <span class="token string">"undefined"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> results <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> results<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token operator">===</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> ret<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> ret<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">TAG</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">preFilter</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">CLASS</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> curLoop<span class="token punctuation">,</span> inplace<span class="token punctuation">,</span> result<span class="token punctuation">,</span> not<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			match <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> isXML <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> match<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> elem<span class="token punctuation">;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> curLoop<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> not <span class="token operator">^</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>className <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> elem<span class="token punctuation">.</span>className <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\t\n]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>inplace <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> inplace <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						curLoop<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">ID</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">TAG</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> curLoop</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">CHILD</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"nth"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// parse equations like 'even', 'odd', '5', '2n', '3n+2', '4n-1', '-n+6'</span>
				<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(-?)(\d*)n((?:\+|-)?\d*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>
					match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"even"</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"2n"</span> <span class="token operator">||</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"odd"</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"2n+1"</span> <span class="token operator">||</span>
					<span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\D</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"0n+"</span> <span class="token operator">+</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// calculate the numbers (first)n+(last) including if they are negative</span>
				match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>test<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>test<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">;</span>
				match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> test<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// TODO: Move to normal caching system</span>
			match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> done<span class="token operator">++</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">ATTR</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> curLoop<span class="token punctuation">,</span> inplace<span class="token punctuation">,</span> result<span class="token punctuation">,</span> not<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> name <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>isXML <span class="token operator">&amp;&amp;</span> Expr<span class="token punctuation">.</span>attrMap<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Expr<span class="token punctuation">.</span>attrMap<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"~="</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				match<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> match<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">PSEUDO</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> curLoop<span class="token punctuation">,</span> inplace<span class="token punctuation">,</span> result<span class="token punctuation">,</span> not</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"not"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// If we're dealing with a complex expression, or a simple one</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> chunker<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Sizzle</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> curLoop<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> ret <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> curLoop<span class="token punctuation">,</span> inplace<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token operator">^</span> not<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>inplace <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> result<span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">POS</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">||</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">CHILD</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token keyword">return</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">POS</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			match<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">enabled</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>disabled <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">"hidden"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">disabled</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>disabled <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">checked</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>checked <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">selected</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// Accessing this property makes selected-by-default</span>
			<span class="token comment">// options in Safari work properly</span>
			elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>selected <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">parent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">empty</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">has</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token function">Sizzle</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">header</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">h\d</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">text</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"text"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">radio</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"radio"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">checkbox</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"checkbox"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">file</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"file"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">password</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"password"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">submit</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"submit"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">image</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"image"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"reset"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">button</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"button"</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>type <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"button"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">input</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">input|select|textarea|button</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">setFilters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">first</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">last</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> match<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> i <span class="token operator">===</span> array<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">even</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">odd</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">lt</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> i <span class="token operator">&lt;</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">gt</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> i <span class="token operator">></span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">nth</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">===</span> i<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">eq</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">===</span> i<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">PSEUDO</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> match<span class="token punctuation">,</span> i<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> name <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> filter <span class="token operator">=</span> Expr<span class="token punctuation">.</span>filters<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> filter <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> match<span class="token punctuation">,</span> array <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"contains"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>textContent <span class="token operator">||</span> elem<span class="token punctuation">.</span>innerText <span class="token operator">||</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">[</span> elem <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"not"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> not <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> not<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> not<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				Sizzle<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> <span class="token string">"Syntax error, unrecognized expression: "</span> <span class="token operator">+</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">CHILD</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> type <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> node <span class="token operator">=</span> elem<span class="token punctuation">;</span>
			<span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">case</span> <span class="token string">'only'</span><span class="token operator">:</span>
				<span class="token keyword">case</span> <span class="token string">'first'</span><span class="token operator">:</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>node <span class="token operator">=</span> node<span class="token punctuation">.</span>previousSibling<span class="token punctuation">)</span> <span class="token punctuation">)</span>	 <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
							<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"first"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
						<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
					<span class="token punctuation">}</span>
					node <span class="token operator">=</span> elem<span class="token punctuation">;</span>
				<span class="token keyword">case</span> <span class="token string">'last'</span><span class="token operator">:</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>node <span class="token operator">=</span> node<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span> <span class="token punctuation">)</span>	 <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
							<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token keyword">case</span> <span class="token string">'nth'</span><span class="token operator">:</span>
					<span class="token keyword">var</span> first <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> last <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> first <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> last <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					
					<span class="token keyword">var</span> doneName <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
	
					<span class="token keyword">if</span> <span class="token punctuation">(</span> parent <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>parent<span class="token punctuation">.</span>sizcache <span class="token operator">!==</span> doneName <span class="token operator">||</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>nodeIndex<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span> node <span class="token operator">=</span> parent<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span> node<span class="token punctuation">;</span> node <span class="token operator">=</span> node<span class="token punctuation">.</span>nextSibling <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
								node<span class="token punctuation">.</span>nodeIndex <span class="token operator">=</span> <span class="token operator">++</span>count<span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span> 
						parent<span class="token punctuation">.</span>sizcache <span class="token operator">=</span> doneName<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					
					<span class="token keyword">var</span> diff <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeIndex <span class="token operator">-</span> last<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> first <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> diff <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token punctuation">(</span> diff <span class="token operator">%</span> first <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> diff <span class="token operator">/</span> first <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">ID</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token operator">===</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">TAG</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span>match <span class="token operator">===</span> <span class="token string">"*"</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">CLASS</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>className <span class="token operator">||</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> match <span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">ATTR</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> name <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				result <span class="token operator">=</span> Expr<span class="token punctuation">.</span>attrHandle<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">?</span>
					Expr<span class="token punctuation">.</span>attrHandle<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token operator">:</span>
					elem<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span>
						elem<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">:</span>
						elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">,</span>
				value <span class="token operator">=</span> result <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">,</span>
				type <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				check <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> result <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span>
				type <span class="token operator">===</span> <span class="token string">"!="</span> <span class="token operator">:</span>
				type <span class="token operator">===</span> <span class="token string">"="</span> <span class="token operator">?</span>
				value <span class="token operator">===</span> check <span class="token operator">:</span>
				type <span class="token operator">===</span> <span class="token string">"*="</span> <span class="token operator">?</span>
				value<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">:</span>
				type <span class="token operator">===</span> <span class="token string">"~="</span> <span class="token operator">?</span>
				<span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">:</span>
				<span class="token operator">!</span>check <span class="token operator">?</span>
				value <span class="token operator">&amp;&amp;</span> result <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">:</span>
				type <span class="token operator">===</span> <span class="token string">"!="</span> <span class="token operator">?</span>
				value <span class="token operator">!==</span> check <span class="token operator">:</span>
				type <span class="token operator">===</span> <span class="token string">"^="</span> <span class="token operator">?</span>
				value<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">:</span>
				type <span class="token operator">===</span> <span class="token string">"$="</span> <span class="token operator">?</span>
				value<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">-</span> check<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">===</span> check <span class="token operator">:</span>
				type <span class="token operator">===</span> <span class="token string">"|="</span> <span class="token operator">?</span>
				value <span class="token operator">===</span> check <span class="token operator">||</span> value<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> check<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> check <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">:</span>
				<span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">POS</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> match<span class="token punctuation">,</span> i<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> name <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> filter <span class="token operator">=</span> Expr<span class="token punctuation">.</span>setFilters<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> filter <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> match<span class="token punctuation">,</span> array <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> origPOS <span class="token operator">=</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">POS</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> type <span class="token keyword">in</span> Expr<span class="token punctuation">.</span>match <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Expr<span class="token punctuation">.</span>match<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">.</span>source <span class="token operator">+</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?![^\[]*\])(?![^\(]*\))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source <span class="token punctuation">)</span><span class="token punctuation">;</span>
	Expr<span class="token punctuation">.</span>leftMatch<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^(?:.|\r|\n)*?)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source <span class="token operator">+</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\(\d+)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">all<span class="token punctuation">,</span> num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">"\\"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">makeArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	array <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> array<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> results <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> results<span class="token punctuation">,</span> array <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> results<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">return</span> array<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Perform a simple check to determine if the browser is capable of</span>
<span class="token comment">// converting a NodeList to an array using builtin methods.</span>
<span class="token comment">// Also verifies that the returned array holds DOM nodes</span>
<span class="token comment">// (which is not the case in the Blackberry browser)</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
	<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>childNodes<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span>

<span class="token comment">// Provide a fallback method if it does not work</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function-variable function">makeArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> results <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"[object Array]"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> array <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> array<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> sortOrder<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>compareDocumentPosition <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">sortOrder</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">a<span class="token punctuation">,</span> b</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>a<span class="token punctuation">.</span>compareDocumentPosition <span class="token operator">||</span> <span class="token operator">!</span>b<span class="token punctuation">.</span>compareDocumentPosition <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token operator">==</span> b <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> a<span class="token punctuation">.</span>compareDocumentPosition <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> ret <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> a <span class="token operator">===</span> b <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token string">"sourceIndex"</span> <span class="token keyword">in</span> document<span class="token punctuation">.</span>documentElement <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">sortOrder</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">a<span class="token punctuation">,</span> b</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>a<span class="token punctuation">.</span>sourceIndex <span class="token operator">||</span> <span class="token operator">!</span>b<span class="token punctuation">.</span>sourceIndex <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token operator">==</span> b <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> a<span class="token punctuation">.</span>sourceIndex <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> ret <span class="token operator">=</span> a<span class="token punctuation">.</span>sourceIndex <span class="token operator">-</span> b<span class="token punctuation">.</span>sourceIndex<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>createRange <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">sortOrder</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">a<span class="token punctuation">,</span> b</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>a<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> <span class="token operator">!</span>b<span class="token punctuation">.</span>ownerDocument <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token operator">==</span> b <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> a<span class="token punctuation">.</span>ownerDocument <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> aRange <span class="token operator">=</span> a<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bRange <span class="token operator">=</span> b<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		aRange<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		aRange<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		bRange<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		bRange<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> aRange<span class="token punctuation">.</span><span class="token function">compareBoundaryPoints</span><span class="token punctuation">(</span>Range<span class="token punctuation">.</span><span class="token constant">START_TO_END</span><span class="token punctuation">,</span> bRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Utility function for retreiving the text value of an array of DOM nodes</span>
<span class="token keyword">function</span> <span class="token function">getText</span><span class="token punctuation">(</span> <span class="token parameter">elems</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> elem<span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		elem <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Get the text from text nodes and CDATA nodes</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">+=</span> elem<span class="token punctuation">.</span>nodeValue<span class="token punctuation">;</span>

		<span class="token comment">// Traverse everything else, except comment nodes</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">8</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">+=</span> <span class="token function">getText</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>childNodes <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Check to see if the browser returns elements by name when</span>
<span class="token comment">// querying by getElementById (and provide a workaround)</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// We're going to inject a fake input element with a specified name</span>
	<span class="token keyword">var</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		id <span class="token operator">=</span> <span class="token string">"script"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	form<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"&lt;a name='"</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">"'/>"</span><span class="token punctuation">;</span>

	<span class="token comment">// Inject it into the root element, check its status, and remove it quickly</span>
	<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
	root<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> form<span class="token punctuation">,</span> root<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// The workaround has to do additional checks after a getElementById</span>
	<span class="token comment">// Which slows things down for other browsers (hence the branching)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> id <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Expr<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function-variable function">ID</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> context<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementById <span class="token operator">!==</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isXML <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> m <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> m <span class="token operator">?</span> m<span class="token punctuation">.</span>id <span class="token operator">===</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> m<span class="token punctuation">.</span>getAttributeNode <span class="token operator">!==</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>nodeValue <span class="token operator">===</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		Expr<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function-variable function">ID</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">typeof</span> elem<span class="token punctuation">.</span>getAttributeNode <span class="token operator">!==</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>nodeValue <span class="token operator">===</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	root<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> form <span class="token punctuation">)</span><span class="token punctuation">;</span>
	root <span class="token operator">=</span> form <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// release memory in IE</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// Check to see if the browser returns only elements</span>
	<span class="token comment">// when doing getElementsByTagName("*")</span>

	<span class="token comment">// Create a fake element</span>
	<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Make sure no comments are found</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> div<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Expr<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function-variable function">TAG</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> results <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Filter out possible comments</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"*"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						tmp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				results <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> results<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Check to see if an attribute returns normalized href attributes</span>
	div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"&lt;a href='#'>&lt;/a>"</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> div<span class="token punctuation">.</span>firstChild <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> div<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>getAttribute <span class="token operator">!==</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span>
			div<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"#"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Expr<span class="token punctuation">.</span>attrHandle<span class="token punctuation">.</span><span class="token function-variable function">href</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	div <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// release memory in IE</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>querySelectorAll <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> oldSizzle <span class="token operator">=</span> Sizzle<span class="token punctuation">,</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"&lt;p class='TEST'>&lt;/p>"</span><span class="token punctuation">;</span>

		<span class="token comment">// Safari can't handle uppercase or unicode characters when</span>
		<span class="token comment">// in quirks mode.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> div<span class="token punctuation">.</span>querySelectorAll <span class="token operator">&amp;&amp;</span> div<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".TEST"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	
		<span class="token function-variable function">Sizzle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">query<span class="token punctuation">,</span> context<span class="token punctuation">,</span> extra<span class="token punctuation">,</span> seed</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			context <span class="token operator">=</span> context <span class="token operator">||</span> document<span class="token punctuation">;</span>

			<span class="token comment">// Only use querySelectorAll on non-XML documents</span>
			<span class="token comment">// (ID selectors don't work in non-HTML documents)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>seed <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isXML</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token function">makeArray</span><span class="token punctuation">(</span> context<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">,</span> extra <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		
			<span class="token keyword">return</span> <span class="token function">oldSizzle</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> context<span class="token punctuation">,</span> extra<span class="token punctuation">,</span> seed<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> prop <span class="token keyword">in</span> oldSizzle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			Sizzle<span class="token punctuation">[</span> prop <span class="token punctuation">]</span> <span class="token operator">=</span> oldSizzle<span class="token punctuation">[</span> prop <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		div <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// release memory in IE</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"&lt;div class='test e'>&lt;/div>&lt;div class='test'>&lt;/div>"</span><span class="token punctuation">;</span>

	<span class="token comment">// Opera can't find a second classname (in 9.6)</span>
	<span class="token comment">// Also, make sure that getElementsByClassName actually exists</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>div<span class="token punctuation">.</span>getElementsByClassName <span class="token operator">||</span> div<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Safari caches class attributes, doesn't catch changes (in 3.2)</span>
	div<span class="token punctuation">.</span>lastChild<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"e"</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> div<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	Expr<span class="token punctuation">.</span>order<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"CLASS"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Expr<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function-variable function">CLASS</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> context<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementsByClassName <span class="token operator">!==</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isXML <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	div <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// release memory in IE</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">dirNodeCheck</span><span class="token punctuation">(</span> <span class="token parameter">dir<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> doneName<span class="token punctuation">,</span> checkSet<span class="token punctuation">,</span> nodeCheck<span class="token punctuation">,</span> isXML</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> checkSet<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elem <span class="token operator">=</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> match <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>sizcache <span class="token operator">===</span> doneName <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					match <span class="token operator">=</span> checkSet<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>sizset<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isXML <span class="token punctuation">)</span><span class="token punctuation">{</span>
					elem<span class="token punctuation">.</span>sizcache <span class="token operator">=</span> doneName<span class="token punctuation">;</span>
					elem<span class="token punctuation">.</span>sizset <span class="token operator">=</span> i<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> cur <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					match <span class="token operator">=</span> elem<span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">dirCheck</span><span class="token punctuation">(</span> <span class="token parameter">dir<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> doneName<span class="token punctuation">,</span> checkSet<span class="token punctuation">,</span> nodeCheck<span class="token punctuation">,</span> isXML</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> checkSet<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elem <span class="token operator">=</span> checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> match <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>sizcache <span class="token operator">===</span> doneName <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					match <span class="token operator">=</span> checkSet<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>sizset<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>isXML <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						elem<span class="token punctuation">.</span>sizcache <span class="token operator">=</span> doneName<span class="token punctuation">;</span>
						elem<span class="token punctuation">.</span>sizset <span class="token operator">=</span> i<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> cur <span class="token operator">!==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token operator">===</span> cur <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							match <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> Sizzle<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> cur<span class="token punctuation">,</span> <span class="token punctuation">[</span>elem<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						match <span class="token operator">=</span> elem<span class="token punctuation">;</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			checkSet<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> contains <span class="token operator">=</span> document<span class="token punctuation">.</span>compareDocumentPosition <span class="token operator">?</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> a <span class="token operator">!==</span> b <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>contains <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">isXML</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// documentElement is verified for cases where it doesn't yet exist</span>
	<span class="token comment">// (such as loading iframes in IE - #4833) </span>
	<span class="token keyword">var</span> documentElement <span class="token operator">=</span> <span class="token punctuation">(</span>elem <span class="token operator">?</span> elem<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> elem <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
	<span class="token keyword">return</span> documentElement <span class="token operator">?</span> documentElement<span class="token punctuation">.</span>nodeName <span class="token operator">!==</span> <span class="token string">"HTML"</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">posProcess</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> tmpSet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> later <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> match<span class="token punctuation">,</span>
		root <span class="token operator">=</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">?</span> <span class="token punctuation">[</span>context<span class="token punctuation">]</span> <span class="token operator">:</span> context<span class="token punctuation">;</span>

	<span class="token comment">// Position selectors must be done after the filter</span>
	<span class="token comment">// And so must :not(positional) so we move all PSEUDOs to the end</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>match <span class="token operator">=</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">PSEUDO</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		later <span class="token operator">+=</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		selector <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> Expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">PSEUDO</span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	selector <span class="token operator">=</span> Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>selector<span class="token punctuation">]</span> <span class="token operator">?</span> selector <span class="token operator">+</span> <span class="token string">"*"</span> <span class="token operator">:</span> selector<span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> root<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">Sizzle</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> root<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> tmpSet <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> Sizzle<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> later<span class="token punctuation">,</span> tmpSet <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// EXPOSE</span>
jQuery<span class="token punctuation">.</span>find <span class="token operator">=</span> Sizzle<span class="token punctuation">;</span>
jQuery<span class="token punctuation">.</span>expr <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>selectors<span class="token punctuation">;</span>
jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">[</span><span class="token string">":"</span><span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>filters<span class="token punctuation">;</span>
jQuery<span class="token punctuation">.</span>unique <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>uniqueSort<span class="token punctuation">;</span>
jQuery<span class="token punctuation">.</span>text <span class="token operator">=</span> getText<span class="token punctuation">;</span>
jQuery<span class="token punctuation">.</span>isXMLDoc <span class="token operator">=</span> isXML<span class="token punctuation">;</span>
jQuery<span class="token punctuation">.</span>contains <span class="token operator">=</span> contains<span class="token punctuation">;</span>

<span class="token keyword">return</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span>Sizzle <span class="token operator">=</span> Sizzle<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> runtil <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Until$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rparentsprev <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:parents|prevUntil|prevAll)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token comment">// Note: This RegExp should be improved, or likely pulled from Sizzle</span>
	rmultiselector <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">,</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	slice <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">;</span>

<span class="token comment">// Implement the identical functionality for filter and not</span>
<span class="token keyword">var</span> <span class="token function-variable function">winnow</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elements<span class="token punctuation">,</span> qualifier<span class="token punctuation">,</span> keep</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> qualifier <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token function">qualifier</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> elem <span class="token punctuation">)</span> <span class="token operator">===</span> keep<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> qualifier<span class="token punctuation">.</span>nodeType <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span>elem <span class="token operator">===</span> qualifier<span class="token punctuation">)</span> <span class="token operator">===</span> keep<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> qualifier <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> filtered <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> isSimple<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> qualifier <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>qualifier<span class="token punctuation">,</span> filtered<span class="token punctuation">,</span> <span class="token operator">!</span>keep<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			qualifier <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> qualifier<span class="token punctuation">,</span> filtered <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> qualifier <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> keep<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">find</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"find"</span><span class="token punctuation">,</span> selector <span class="token punctuation">)</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			length <span class="token operator">=</span> ret<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
			jQuery<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> i <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Make sure that the results are unique</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> n <span class="token operator">=</span> length<span class="token punctuation">;</span> n <span class="token operator">&lt;</span> ret<span class="token punctuation">.</span>length<span class="token punctuation">;</span> n<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> r<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> ret<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">===</span> ret<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							ret<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">has</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">target</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> targets <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> target <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> targets<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> targets<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">not</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token function">winnow</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> selector<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"not"</span><span class="token punctuation">,</span> selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token function">winnow</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> selector<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"filter"</span><span class="token punctuation">,</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">is</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>selector <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">closest</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selectors<span class="token punctuation">,</span> context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span> selectors <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> match<span class="token punctuation">,</span> matches <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> selector<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> cur <span class="token operator">&amp;&amp;</span> selectors<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> selectors<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					selector <span class="token operator">=</span> selectors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>matches<span class="token punctuation">[</span>selector<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						matches<span class="token punctuation">[</span>selector<span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">POS</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token operator">?</span> 
							<span class="token function">jQuery</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> context <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token punctuation">)</span> <span class="token operator">:</span>
							selector<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">while</span> <span class="token punctuation">(</span> cur <span class="token operator">&amp;&amp;</span> cur<span class="token punctuation">.</span>ownerDocument <span class="token operator">&amp;&amp;</span> cur <span class="token operator">!==</span> context <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> selector <span class="token keyword">in</span> matches <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						match <span class="token operator">=</span> matches<span class="token punctuation">[</span>selector<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">.</span>jquery <span class="token operator">?</span> match<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">selector</span><span class="token operator">:</span> selector<span class="token punctuation">,</span> <span class="token literal-property property">elem</span><span class="token operator">:</span> cur <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">delete</span> matches<span class="token punctuation">[</span>selector<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> pos <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span><span class="token constant">POS</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> selectors <span class="token punctuation">)</span> <span class="token operator">?</span> 
			<span class="token function">jQuery</span><span class="token punctuation">(</span> selectors<span class="token punctuation">,</span> context <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> cur</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span> cur <span class="token operator">&amp;&amp;</span> cur<span class="token punctuation">.</span>ownerDocument <span class="token operator">&amp;&amp;</span> cur <span class="token operator">!==</span> context <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> pos <span class="token operator">?</span> pos<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>selectors<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> cur<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token comment">// Determine the position of an element within</span>
	<span class="token comment">// the matched set of elements</span>
	<span class="token function-variable function">index</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token operator">||</span> <span class="token keyword">typeof</span> elem <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token comment">// If it receives a string, the selector is used</span>
				<span class="token comment">// If it receives nothing, the siblings are used</span>
				elem <span class="token operator">?</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// Locate the position of the desired element</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>
			<span class="token comment">// If it receives a jQuery object, the first element is used</span>
			elem<span class="token punctuation">.</span>jquery <span class="token operator">?</span> elem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> elem<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector<span class="token punctuation">,</span> context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> set <span class="token operator">=</span> <span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">?</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> context <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token punctuation">)</span> <span class="token operator">:</span>
				jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">,</span>
			all <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> set <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token function">isDisconnected</span><span class="token punctuation">(</span> <span class="token keyword">set</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isDisconnected</span><span class="token punctuation">(</span> all<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">?</span>
			<span class="token literal-property property">all</span> <span class="token operator">:</span>
			jQuery<span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span> all <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">andSelf</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prevObject <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A painfully simple check to see if an element is disconnected</span>
<span class="token comment">// from a document (should be improved, where feasible).</span>
<span class="token keyword">function</span> <span class="token function">isDisconnected</span><span class="token punctuation">(</span> <span class="token parameter">node</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">!</span>node <span class="token operator">||</span> <span class="token operator">!</span>node<span class="token punctuation">.</span>parentNode <span class="token operator">||</span> node<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">11</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">parent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
		<span class="token keyword">return</span> parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">11</span> <span class="token operator">?</span> parent <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">parents</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"parentNode"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">parentsUntil</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> until</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"parentNode"</span><span class="token punctuation">,</span> until <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"nextSibling"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">prev</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"previousSibling"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">nextAll</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"nextSibling"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">prevAll</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"previousSibling"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">nextUntil</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> until</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"nextSibling"</span><span class="token punctuation">,</span> until <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">prevUntil</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> until</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"previousSibling"</span><span class="token punctuation">,</span> until <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">siblings</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">sibling</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">children</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">sibling</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">contents</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"iframe"</span> <span class="token punctuation">)</span> <span class="token operator">?</span>
			elem<span class="token punctuation">.</span>contentDocument <span class="token operator">||</span> elem<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>document <span class="token operator">:</span>
			jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>childNodes <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">until<span class="token punctuation">,</span> selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> until <span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>runtil<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			selector <span class="token operator">=</span> until<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> selector <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span> ret <span class="token punctuation">)</span> <span class="token operator">:</span> ret<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">||</span> rmultiselector<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> rparentsprev<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">expr<span class="token punctuation">,</span> elems<span class="token punctuation">,</span> not</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> not <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			expr <span class="token operator">=</span> <span class="token string">":not("</span> <span class="token operator">+</span> expr <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>expr<span class="token punctuation">,</span> elems<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">dir</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> until</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> matched <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> cur <span class="token operator">&amp;&amp;</span> cur<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">9</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>until <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> cur<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">jQuery</span><span class="token punctuation">(</span> cur <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span> until <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> cur<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				matched<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> cur <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			cur <span class="token operator">=</span> cur<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> matched<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">nth</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">cur<span class="token punctuation">,</span> result<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		result <span class="token operator">=</span> result <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> cur<span class="token punctuation">;</span> cur <span class="token operator">=</span> cur<span class="token punctuation">[</span>dir<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> cur<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">++</span>num <span class="token operator">===</span> result <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> cur<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">sibling</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">n<span class="token punctuation">,</span> elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> n<span class="token punctuation">;</span> n <span class="token operator">=</span> n<span class="token punctuation">.</span>nextSibling <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> n<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">!==</span> elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> n <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rinlinejQuery <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> jQuery\d+="(?:\d+|null)"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
	rleadingWhitespace <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rxhtmlTag <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(&lt;([\w:]+)[^>]*?)\/></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
	rselfClosing <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:area|br|col|embed|hr|img|input|link|meta|param)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rtagName <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;([\w:]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rtbody <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;tbody</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rhtml <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;|&amp;#?\w+;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rnocache <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script|&lt;object|&lt;embed|&lt;option|&lt;style</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rchecked <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">checked\s*(?:[^=]|=\s*.checked.)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>  <span class="token comment">// checked="checked" or checked (html5)</span>
	<span class="token function-variable function">fcloseTag</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">all<span class="token punctuation">,</span> front<span class="token punctuation">,</span> tag</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> rselfClosing<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> tag <span class="token punctuation">)</span> <span class="token operator">?</span>
			<span class="token literal-property property">all</span> <span class="token operator">:</span>
			front <span class="token operator">+</span> <span class="token string">">&lt;/"</span> <span class="token operator">+</span> tag <span class="token operator">+</span> <span class="token string">">"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	wrapMap <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">option</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"&lt;select multiple='multiple'>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/select>"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"&lt;fieldset>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/fieldset>"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">thead</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"&lt;table>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/table>"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">tr</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"&lt;table>&lt;tbody>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/tbody>&lt;/table>"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">td</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"&lt;table>&lt;tbody>&lt;tr>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/tr>&lt;/tbody>&lt;/table>"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">col</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"&lt;table>&lt;tbody>&lt;/tbody>&lt;colgroup>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/colgroup>&lt;/table>"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">area</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"&lt;map>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/map>"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">_default</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

wrapMap<span class="token punctuation">.</span>optgroup <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>option<span class="token punctuation">;</span>
wrapMap<span class="token punctuation">.</span>tbody <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>tfoot <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>colgroup <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>caption <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>thead<span class="token punctuation">;</span>
wrapMap<span class="token punctuation">.</span>th <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>td<span class="token punctuation">;</span>

<span class="token comment">// IE can't serialize &lt;link> and &lt;script> tags normally</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>htmlSerialize <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	wrapMap<span class="token punctuation">.</span>_default <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"div&lt;div>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/div>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">text</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">text</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				self<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span> <span class="token function">text</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> self<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> text <span class="token operator">!==</span> <span class="token string">"object"</span> <span class="token operator">&amp;&amp;</span> text <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span> text <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">wrapAll</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">html</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> html <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span> <span class="token function">html</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// The elements to wrap the target around</span>
			<span class="token keyword">var</span> wrap <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> html<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				wrap<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			wrap<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

				<span class="token keyword">while</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>firstChild <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">wrapInner</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">html</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> html <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapInner</span><span class="token punctuation">(</span> <span class="token function">html</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> contents <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> contents<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				contents<span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span> html <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				self<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> html <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">wrap</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">html</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span> html <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">unwrap</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"body"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>childNodes <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">append</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">prepend</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">before</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> arguments<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> set <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			set<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> set<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> set<span class="token punctuation">,</span> <span class="token string">"before"</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">after</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextSibling <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> arguments<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> set <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"after"</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
			set<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> set<span class="token punctuation">,</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> set<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token comment">// keepData is for internal use only--do not document</span>
	<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector<span class="token punctuation">,</span> keepData</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> elem<span class="token punctuation">;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>selector <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token punctuation">[</span> elem <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>keepData <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					jQuery<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> elem <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					 elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">empty</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> elem<span class="token punctuation">;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Remove element nodes and prevent memory leaks</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Remove any remaining nodes</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elem<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">clone</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">events</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Do the clone</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>noCloneEvent <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// IE copies events bound via attachEvent when</span>
				<span class="token comment">// using cloneNode. Calling detachEvent on the</span>
				<span class="token comment">// clone will also remove the events from the orignal</span>
				<span class="token comment">// In order to get around this, we use innerHTML.</span>
				<span class="token comment">// Unfortunately, this means some modifications to</span>
				<span class="token comment">// attributes in IE that are actually only stored</span>
				<span class="token comment">// as properties will not be copied (such as the</span>
				<span class="token comment">// the name attribute on an input).</span>
				<span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>outerHTML<span class="token punctuation">,</span> ownerDocument <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>html <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> div <span class="token operator">=</span> ownerDocument<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					html <span class="token operator">=</span> div<span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span><span class="token punctuation">[</span>html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rinlinejQuery<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
					<span class="token comment">// Handle the case in IE 8 where action=/test/> self-closes a tag</span>
					<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">=([^="'>\s]+\/)></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'="$1">'</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rleadingWhitespace<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ownerDocument<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Copy the events from the original to the clone</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> events <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">cloneCopyEvent</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">cloneCopyEvent</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Return the cloned set</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">html</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rinlinejQuery<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token keyword">null</span><span class="token punctuation">;</span>

		<span class="token comment">// See if we can take a shortcut and just use innerHTML</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>rnocache<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
			<span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>leadingWhitespace <span class="token operator">||</span> <span class="token operator">!</span>rleadingWhitespace<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
			<span class="token operator">!</span>wrapMap<span class="token punctuation">[</span> <span class="token punctuation">(</span>rtagName<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

			value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rxhtmlTag<span class="token punctuation">,</span> fcloseTag<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Remove element nodes and prevent memory leaks</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> value<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

			<span class="token comment">// If using innerHTML throws an exception, use the fallback method</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> old <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				self<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> old <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">replaceWith</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Make sure that the elements are removed from the DOM before they are inserted</span>
			<span class="token comment">// this can help fix replacing a parent with child elements</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> old <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					self<span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> old <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				value <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> next <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextSibling<span class="token punctuation">,</span> parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>

				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> next <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> value<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"replaceWith"</span><span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">detach</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">domManip</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">args<span class="token punctuation">,</span> table<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> results<span class="token punctuation">,</span> first<span class="token punctuation">,</span> value <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> scripts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fragment<span class="token punctuation">,</span> parent<span class="token punctuation">;</span>

		<span class="token comment">// We can't cloneNode fragments that contain checked, in WebKit</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>checkClone <span class="token operator">&amp;&amp;</span> arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> rchecked<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span> args<span class="token punctuation">,</span> table<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> table <span class="token operator">?</span> self<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				self<span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span> args<span class="token punctuation">,</span> table<span class="token punctuation">,</span> callback <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			parent <span class="token operator">=</span> value <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>

			<span class="token comment">// If we're in a fragment, just use that instead of building a new one</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>parentNode <span class="token operator">&amp;&amp;</span> parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">11</span> <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				results <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">fragment</span><span class="token operator">:</span> parent <span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				results <span class="token operator">=</span> <span class="token function">buildFragment</span><span class="token punctuation">(</span> args<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> scripts <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			fragment <span class="token operator">=</span> results<span class="token punctuation">.</span>fragment<span class="token punctuation">;</span>
			
			<span class="token keyword">if</span> <span class="token punctuation">(</span> fragment<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				first <span class="token operator">=</span> fragment <span class="token operator">=</span> fragment<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				first <span class="token operator">=</span> fragment<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> first <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				table <span class="token operator">=</span> table <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> first<span class="token punctuation">,</span> <span class="token string">"tr"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
						table <span class="token operator">?</span>
							<span class="token function">root</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> first<span class="token punctuation">)</span> <span class="token operator">:</span>
							<span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
						i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">||</span> results<span class="token punctuation">.</span>cacheable <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span>  <span class="token operator">?</span>
							fragment<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">:</span>
							fragment
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> scripts<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> scripts<span class="token punctuation">,</span> evalScript <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

		<span class="token keyword">function</span> <span class="token function">root</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> cur</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"table"</span><span class="token punctuation">)</span> <span class="token operator">?</span>
				<span class="token punctuation">(</span>elem<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"tbody"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span>
				elem<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"tbody"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span>
				elem<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">cloneCopyEvent</span><span class="token punctuation">(</span><span class="token parameter">orig<span class="token punctuation">,</span> ret</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	ret<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeName <span class="token operator">!==</span> <span class="token punctuation">(</span>orig<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> orig<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> oldData <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> orig<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> curData <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> oldData <span class="token punctuation">)</span><span class="token punctuation">,</span> events <span class="token operator">=</span> oldData <span class="token operator">&amp;&amp;</span> oldData<span class="token punctuation">.</span>events<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> events <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">delete</span> curData<span class="token punctuation">.</span>handle<span class="token punctuation">;</span>
			curData<span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> type <span class="token keyword">in</span> events <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> handler <span class="token keyword">in</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">[</span> handler <span class="token punctuation">]</span><span class="token punctuation">,</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">[</span> handler <span class="token punctuation">]</span><span class="token punctuation">.</span>data <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">buildFragment</span><span class="token punctuation">(</span> <span class="token parameter">args<span class="token punctuation">,</span> nodes<span class="token punctuation">,</span> scripts</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> fragment<span class="token punctuation">,</span> cacheable<span class="token punctuation">,</span> cacheresults<span class="token punctuation">,</span>
		doc <span class="token operator">=</span> <span class="token punctuation">(</span>nodes <span class="token operator">&amp;&amp;</span> nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> document<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Only cache "small" (1/2 KB) strings that are associated with the main document</span>
	<span class="token comment">// Cloning options loses the selected state, so don't cache them</span>
	<span class="token comment">// IE 6 doesn't like it when you put &lt;object> or &lt;embed> elements in a fragment</span>
	<span class="token comment">// Also, WebKit does not clone 'checked' attributes on cloneNode, so don't cache</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> args<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">512</span> <span class="token operator">&amp;&amp;</span> doc <span class="token operator">===</span> document <span class="token operator">&amp;&amp;</span>
		<span class="token operator">!</span>rnocache<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>checkClone <span class="token operator">||</span> <span class="token operator">!</span>rchecked<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

		cacheable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		cacheresults <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fragments<span class="token punctuation">[</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> cacheresults <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> cacheresults <span class="token operator">!==</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				fragment <span class="token operator">=</span> cacheresults<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>fragment <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fragment <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		jQuery<span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span> args<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> fragment<span class="token punctuation">,</span> scripts <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> cacheable <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>fragments<span class="token punctuation">[</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">=</span> cacheresults <span class="token operator">?</span> fragment <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">fragment</span><span class="token operator">:</span> fragment<span class="token punctuation">,</span> <span class="token literal-property property">cacheable</span><span class="token operator">:</span> cacheable <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span>fragments <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">appendTo</span><span class="token operator">:</span> <span class="token string">"append"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">prependTo</span><span class="token operator">:</span> <span class="token string">"prepend"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">insertBefore</span><span class="token operator">:</span> <span class="token string">"before"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">insertAfter</span><span class="token operator">:</span> <span class="token string">"after"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">replaceAll</span><span class="token operator">:</span> <span class="token string">"replaceWith"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name<span class="token punctuation">,</span> original</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> insert <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">,</span>
			parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">11</span> <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> insert<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			insert<span class="token punctuation">[</span> original <span class="token punctuation">]</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> insert<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elems <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> original <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>insert<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> elems <span class="token punctuation">)</span><span class="token punctuation">;</span>
				ret <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span> elems <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> name<span class="token punctuation">,</span> insert<span class="token punctuation">.</span>selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">clean</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems<span class="token punctuation">,</span> context<span class="token punctuation">,</span> fragment<span class="token punctuation">,</span> scripts</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		context <span class="token operator">=</span> context <span class="token operator">||</span> document<span class="token punctuation">;</span>

		<span class="token comment">// !context.createElement fails in IE with an error but returns typeof 'object'</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> context<span class="token punctuation">.</span>createElement <span class="token operator">===</span> <span class="token string">"undefined"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			context <span class="token operator">=</span> context<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> context<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> document<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> elem<span class="token punctuation">;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> elem <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elem <span class="token operator">+=</span> <span class="token string">""</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Convert html string into DOM nodes</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> elem <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>rhtml<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elem <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> elem <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Fix "XHTML"-style tags in all browsers</span>
				elem <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rxhtmlTag<span class="token punctuation">,</span> fcloseTag<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Trim whitespace, otherwise indexOf won't work as expected</span>
				<span class="token keyword">var</span> tag <span class="token operator">=</span> <span class="token punctuation">(</span>rtagName<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					wrap <span class="token operator">=</span> wrapMap<span class="token punctuation">[</span> tag <span class="token punctuation">]</span> <span class="token operator">||</span> wrapMap<span class="token punctuation">.</span>_default<span class="token punctuation">,</span>
					depth <span class="token operator">=</span> wrap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					div <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Go to html and back, then peel off extra wrappers</span>
				div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> wrap<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> elem <span class="token operator">+</span> wrap<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Move to the right depth</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span> depth<span class="token operator">--</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					div <span class="token operator">=</span> div<span class="token punctuation">.</span>lastChild<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Remove IE's autoinserted &lt;tbody> from table fragments</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>tbody <span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// String was a &lt;table>, *may* have spurious &lt;tbody></span>
					<span class="token keyword">var</span> hasBody <span class="token operator">=</span> rtbody<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span>
						tbody <span class="token operator">=</span> tag <span class="token operator">===</span> <span class="token string">"table"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>hasBody <span class="token operator">?</span>
							div<span class="token punctuation">.</span>firstChild <span class="token operator">&amp;&amp;</span> div<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>childNodes <span class="token operator">:</span>

							<span class="token comment">// String was a bare &lt;thead> or &lt;tfoot></span>
							wrap<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"&lt;table>"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>hasBody <span class="token operator">?</span>
								div<span class="token punctuation">.</span>childNodes <span class="token operator">:</span>
								<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> tbody<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token operator">--</span>j <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> tbody<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"tbody"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>tbody<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							tbody<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> tbody<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

				<span class="token punctuation">}</span>

				<span class="token comment">// IE completely kills leading whitespace when innerHTML is used</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>leadingWhitespace <span class="token operator">&amp;&amp;</span> rleadingWhitespace<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					div<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> context<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span> rleadingWhitespace<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> div<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				elem <span class="token operator">=</span> div<span class="token punctuation">.</span>childNodes<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> fragment <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> scripts <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"script"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">||</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"text/javascript"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					scripts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode <span class="token operator">?</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">:</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						ret<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> <span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">cleanData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> data<span class="token punctuation">,</span> id<span class="token punctuation">,</span> cache <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">,</span>
			special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">,</span>
			deleteExpando <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>deleteExpando<span class="token punctuation">;</span>
		
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> elem<span class="token punctuation">;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			id <span class="token operator">=</span> elem<span class="token punctuation">[</span> jQuery<span class="token punctuation">.</span>expando <span class="token punctuation">]</span><span class="token punctuation">;</span>
			
			<span class="token keyword">if</span> <span class="token punctuation">(</span> id <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				data <span class="token operator">=</span> cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">;</span>
				
				<span class="token keyword">if</span> <span class="token punctuation">(</span> data<span class="token punctuation">.</span>events <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> type <span class="token keyword">in</span> data<span class="token punctuation">.</span>events <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> special<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							<span class="token function">removeEvent</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> data<span class="token punctuation">.</span>handle <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				
				<span class="token keyword">if</span> <span class="token punctuation">(</span> deleteExpando <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">delete</span> elem<span class="token punctuation">[</span> jQuery<span class="token punctuation">.</span>expando <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>removeAttribute <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					elem<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>expando <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				
				<span class="token keyword">delete</span> cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// exclude the following css properties to add px</span>
<span class="token keyword">var</span> rexclude <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">z-?index|font-?weight|opacity|zoom|line-?height</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	ralpha <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">alpha\([^)]*\)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	ropacity <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">opacity=([^)]*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rfloat <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">float</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rdashAlpha <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-([a-z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">ig</span></span><span class="token punctuation">,</span>
	rupper <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([A-Z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
	rnumpx <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^-?\d+(?:px)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rnum <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^-?\d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

	cssShow <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"absolute"</span><span class="token punctuation">,</span> <span class="token literal-property property">visibility</span><span class="token operator">:</span> <span class="token string">"hidden"</span><span class="token punctuation">,</span> <span class="token literal-property property">display</span><span class="token operator">:</span><span class="token string">"block"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	cssWidth <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">"Left"</span><span class="token punctuation">,</span> <span class="token string">"Right"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
	cssHeight <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">"Top"</span><span class="token punctuation">,</span> <span class="token string">"Bottom"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token comment">// cache check for defaultView.getComputedStyle</span>
	getComputedStyle <span class="token operator">=</span> document<span class="token punctuation">.</span>defaultView <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>defaultView<span class="token punctuation">.</span>getComputedStyle<span class="token punctuation">,</span>
	<span class="token comment">// normalize float css property</span>
	styleFloat <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>cssFloat <span class="token operator">?</span> <span class="token string">"cssFloat"</span> <span class="token operator">:</span> <span class="token string">"styleFloat"</span><span class="token punctuation">,</span>
	<span class="token function-variable function">fcamelCase</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">all<span class="token punctuation">,</span> letter</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> letter<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">css</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>rexclude<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			value <span class="token operator">+=</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">style</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// don't set styles on text and comment nodes</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">8</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// ignore negative width and height values #1599</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">"width"</span> <span class="token operator">||</span> name <span class="token operator">===</span> <span class="token string">"height"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			value <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> style <span class="token operator">=</span> elem<span class="token punctuation">.</span>style <span class="token operator">||</span> elem<span class="token punctuation">,</span> set <span class="token operator">=</span> value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

		<span class="token comment">// IE uses filters for opacity</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>opacity <span class="token operator">&amp;&amp;</span> name <span class="token operator">===</span> <span class="token string">"opacity"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// IE has trouble with opacity if it does not have layout</span>
				<span class="token comment">// Force it by setting the zoom level</span>
				style<span class="token punctuation">.</span>zoom <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

				<span class="token comment">// Set the alpha filter to set the opacity</span>
				<span class="token keyword">var</span> opacity <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span> value<span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span> <span class="token operator">===</span> <span class="token string">"NaN"</span> <span class="token operator">?</span> <span class="token string">""</span> <span class="token operator">:</span> <span class="token string">"alpha(opacity="</span> <span class="token operator">+</span> value <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> filter <span class="token operator">=</span> style<span class="token punctuation">.</span>filter <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"filter"</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">;</span>
				style<span class="token punctuation">.</span>filter <span class="token operator">=</span> ralpha<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span> <span class="token operator">?</span> filter<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>ralpha<span class="token punctuation">,</span> opacity<span class="token punctuation">)</span> <span class="token operator">:</span> opacity<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> style<span class="token punctuation">.</span>filter <span class="token operator">&amp;&amp;</span> style<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"opacity="</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span>
				<span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span> ropacity<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token operator">:</span>
				<span class="token string">""</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Make sure we're using the right name for getting the float value</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> rfloat<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			name <span class="token operator">=</span> styleFloat<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rdashAlpha<span class="token punctuation">,</span> fcamelCase<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> style<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">css</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> force<span class="token punctuation">,</span> extra</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"width"</span> <span class="token operator">||</span> name <span class="token operator">===</span> <span class="token string">"height"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> val<span class="token punctuation">,</span> props <span class="token operator">=</span> cssShow<span class="token punctuation">,</span> which <span class="token operator">=</span> name <span class="token operator">===</span> <span class="token string">"width"</span> <span class="token operator">?</span> cssWidth <span class="token operator">:</span> cssHeight<span class="token punctuation">;</span>

			<span class="token keyword">function</span> <span class="token function">getWH</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				val <span class="token operator">=</span> name <span class="token operator">===</span> <span class="token string">"width"</span> <span class="token operator">?</span> elem<span class="token punctuation">.</span>offsetWidth <span class="token operator">:</span> elem<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> extra <span class="token operator">===</span> <span class="token string">"border"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> which<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>extra <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						val <span class="token operator">-=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"padding"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> extra <span class="token operator">===</span> <span class="token string">"margin"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						val <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"margin"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						val <span class="token operator">-=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"border"</span> <span class="token operator">+</span> <span class="token keyword">this</span> <span class="token operator">+</span> <span class="token string">"Width"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>offsetWidth <span class="token operator">!==</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">getWH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> props<span class="token punctuation">,</span> getWH <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> force <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">curCSS</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> force</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret<span class="token punctuation">,</span> style <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">,</span> filter<span class="token punctuation">;</span>

		<span class="token comment">// IE uses filters for opacity</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>opacity <span class="token operator">&amp;&amp;</span> name <span class="token operator">===</span> <span class="token string">"opacity"</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>currentStyle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> ropacity<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">.</span>filter <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">?</span>
				<span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span> <span class="token operator">:</span>
				<span class="token string">""</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> ret <span class="token operator">===</span> <span class="token string">""</span> <span class="token operator">?</span>
				<span class="token string-property property">"1"</span> <span class="token operator">:</span>
				ret<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Make sure we're using the right name for getting the float value</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> rfloat<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			name <span class="token operator">=</span> styleFloat<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>force <span class="token operator">&amp;&amp;</span> style <span class="token operator">&amp;&amp;</span> style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> style<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> getComputedStyle <span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Only "float" is needed here</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> rfloat<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				name <span class="token operator">=</span> <span class="token string">"float"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> rupper<span class="token punctuation">,</span> <span class="token string">"-$1"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> defaultView <span class="token operator">=</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>defaultView<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>defaultView <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> computedStyle <span class="token operator">=</span> defaultView<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> computedStyle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				ret <span class="token operator">=</span> computedStyle<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// We should always get a number back from opacity</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">===</span> <span class="token string">"opacity"</span> <span class="token operator">&amp;&amp;</span> ret <span class="token operator">===</span> <span class="token string">""</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				ret <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>currentStyle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> camelCase <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rdashAlpha<span class="token punctuation">,</span> fcamelCase<span class="token punctuation">)</span><span class="token punctuation">;</span>

			ret <span class="token operator">=</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span> camelCase <span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// From the awesome hack by Dean Edwards</span>
			<span class="token comment">// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291</span>

			<span class="token comment">// If we're not dealing with a regular pixel number</span>
			<span class="token comment">// but a number that has a weird ending, we need to convert it to pixels</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>rnumpx<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> ret <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> rnum<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> ret <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Remember the original values</span>
				<span class="token keyword">var</span> left <span class="token operator">=</span> style<span class="token punctuation">.</span>left<span class="token punctuation">,</span> rsLeft <span class="token operator">=</span> elem<span class="token punctuation">.</span>runtimeStyle<span class="token punctuation">.</span>left<span class="token punctuation">;</span>

				<span class="token comment">// Put in the new values to get a computed value out</span>
				elem<span class="token punctuation">.</span>runtimeStyle<span class="token punctuation">.</span>left <span class="token operator">=</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
				style<span class="token punctuation">.</span>left <span class="token operator">=</span> camelCase <span class="token operator">===</span> <span class="token string">"fontSize"</span> <span class="token operator">?</span> <span class="token string">"1em"</span> <span class="token operator">:</span> <span class="token punctuation">(</span>ret <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				ret <span class="token operator">=</span> style<span class="token punctuation">.</span>pixelLeft <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>

				<span class="token comment">// Revert the changed values</span>
				style<span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
				elem<span class="token punctuation">.</span>runtimeStyle<span class="token punctuation">.</span>left <span class="token operator">=</span> rsLeft<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// A method for quickly swapping in/out CSS properties to get correct calculations</span>
	<span class="token function-variable function">swap</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> old <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Remember the old values, and insert the new ones</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> name <span class="token keyword">in</span> options <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			old<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
			elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> options<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Revert the old values</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> name <span class="token keyword">in</span> options <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> old<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>expr <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>filters <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function-variable function">hidden</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> width <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">,</span> height <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">,</span>
			skip <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"tr"</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> width <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> height <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>skip <span class="token operator">?</span>
			<span class="token boolean">true</span> <span class="token operator">:</span>
			width <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> height <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>skip <span class="token operator">?</span>
				<span class="token boolean">false</span> <span class="token operator">:</span>
				jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"display"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"none"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function-variable function">visible</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">hidden</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> jsc <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	rscript <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script(.|\s)*?\/script></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span>
	rselectTextarea <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">select|textarea</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	rinput <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	jsre <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">=\?(&amp;|$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rquery <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rts <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\?|&amp;)_=.*?(&amp;|$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rurl <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(\w+:)?\/\/([^\/?#]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	r20 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">%20</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>

	<span class="token comment">// Keep a copy of the old load method</span>
	_load <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>load<span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">load</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> url <span class="token operator">!==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">_load</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> url <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Don't do a request if no elements are being requested</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> off <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> off <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> selector <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>off<span class="token punctuation">,</span> url<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
			url <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> off<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Default to a GET request</span>
		<span class="token keyword">var</span> type <span class="token operator">=</span> <span class="token string">"GET"</span><span class="token punctuation">;</span>

		<span class="token comment">// If the second parameter was provided</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> params <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// If it's a function</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> params <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// We assume that it's the callback</span>
				callback <span class="token operator">=</span> params<span class="token punctuation">;</span>
				params <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

			<span class="token comment">// Otherwise, build a param string</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> params <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				params <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span> params<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span>traditional <span class="token punctuation">)</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> <span class="token string">"POST"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

		<span class="token comment">// Request the remote document</span>
		jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">"html"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span> params<span class="token punctuation">,</span>
			<span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">res<span class="token punctuation">,</span> status</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// If successful, inject the HTML into all the matched elements</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> status <span class="token operator">===</span> <span class="token string">"success"</span> <span class="token operator">||</span> status <span class="token operator">===</span> <span class="token string">"notmodified"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// See if a selector was specified</span>
					self<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span> selector <span class="token operator">?</span>
						<span class="token comment">// Create a dummy div to hold the results</span>
						<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">"&lt;div />"</span><span class="token punctuation">)</span>
							<span class="token comment">// inject the contents of the document in, removing the scripts</span>
							<span class="token comment">// to avoid any 'Permission Denied' errors in IE</span>
							<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>responseText<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rscript<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

							<span class="token comment">// Locate the specified elements</span>
							<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">:</span>

						<span class="token comment">// If not, just inject the full result</span>
						res<span class="token punctuation">.</span>responseText <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> callback <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					self<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> callback<span class="token punctuation">,</span> <span class="token punctuation">[</span>res<span class="token punctuation">.</span>responseText<span class="token punctuation">,</span> status<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">serialize</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">serializeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">serializeArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elements <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>disabled <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checked <span class="token operator">||</span> rselectTextarea<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">||</span>
					rinput<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> val <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span>
				<span class="token keyword">null</span> <span class="token operator">:</span>
				jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">?</span>
					jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> val<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">val<span class="token punctuation">,</span> i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> elem<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> val <span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span>
					<span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> elem<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> val <span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Attach a bunch of functions for handling common AJAX events</span>
jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token string">"ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend"</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> o</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">f</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

	<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// shift arguments if data argument was omited</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			type <span class="token operator">=</span> type <span class="token operator">||</span> callback<span class="token punctuation">;</span>
			callback <span class="token operator">=</span> data<span class="token punctuation">;</span>
			data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
			<span class="token literal-property property">success</span><span class="token operator">:</span> callback<span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> type
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">getScript</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">getJSON</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">"json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">post</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// shift arguments if data argument was omited</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			type <span class="token operator">=</span> type <span class="token operator">||</span> callback<span class="token punctuation">;</span>
			callback <span class="token operator">=</span> data<span class="token punctuation">;</span>
			data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
			<span class="token literal-property property">success</span><span class="token operator">:</span> callback<span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> type
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">ajaxSetup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">settings</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">,</span> settings <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">ajaxSettings</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">url</span><span class="token operator">:</span> location<span class="token punctuation">.</span>href<span class="token punctuation">,</span>
		<span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">processData</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">/*
		timeout: 0,
		data: null,
		username: null,
		password: null,
		traditional: false,
		*/</span>
		<span class="token comment">// Create the request object; Microsoft failed to properly</span>
		<span class="token comment">// implement the XMLHttpRequest in IE7 (can't request local files),</span>
		<span class="token comment">// so we use the ActiveXObject when it is available</span>
		<span class="token comment">// This function can be overriden by calling jQuery.ajaxSetup</span>
		<span class="token literal-property property">xhr</span><span class="token operator">:</span> window<span class="token punctuation">.</span>XMLHttpRequest <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol <span class="token operator">!==</span> <span class="token string">"file:"</span> <span class="token operator">||</span> <span class="token operator">!</span>window<span class="token punctuation">.</span>ActiveXObject<span class="token punctuation">)</span> <span class="token operator">?</span>
			<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token operator">:</span>
			<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">accepts</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">xml</span><span class="token operator">:</span> <span class="token string">"application/xml, text/xml"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">"text/html"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">"text/javascript, application/javascript"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token string">"application/json, text/javascript"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"text/plain"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">_default</span><span class="token operator">:</span> <span class="token string">"*/*"</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Last-Modified header cache for next request</span>
	<span class="token literal-property property">lastModified</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">etag</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">ajax</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">origSettings</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> s <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">,</span> origSettings<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">var</span> jsonp<span class="token punctuation">,</span> status<span class="token punctuation">,</span> data<span class="token punctuation">,</span>
			callbackContext <span class="token operator">=</span> origSettings <span class="token operator">&amp;&amp;</span> origSettings<span class="token punctuation">.</span>context <span class="token operator">||</span> s<span class="token punctuation">,</span>
			type <span class="token operator">=</span> s<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// convert data if not already a string</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>processData <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> s<span class="token punctuation">.</span>data <span class="token operator">!==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span>data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span> s<span class="token punctuation">.</span>data<span class="token punctuation">,</span> s<span class="token punctuation">.</span>traditional <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Handle JSONP Parameter Callbacks</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>dataType <span class="token operator">===</span> <span class="token string">"jsonp"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"GET"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jsre<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> s<span class="token punctuation">.</span>url <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					s<span class="token punctuation">.</span>url <span class="token operator">+=</span> <span class="token punctuation">(</span>rquery<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> s<span class="token punctuation">.</span>url <span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>jsonp <span class="token operator">||</span> <span class="token string">"callback"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"=?"</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>s<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token operator">!</span>jsre<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">?</span> s<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>jsonp <span class="token operator">||</span> <span class="token string">"callback"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"=?"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			s<span class="token punctuation">.</span>dataType <span class="token operator">=</span> <span class="token string">"json"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Build temporary JSONP function</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>dataType <span class="token operator">===</span> <span class="token string">"json"</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> jsre<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token operator">||</span> jsre<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jsonp <span class="token operator">=</span> s<span class="token punctuation">.</span>jsonpCallback <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token string">"jsonp"</span> <span class="token operator">+</span> jsc<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Replace the =? sequence both in the query string and the data</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>data <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>jsre<span class="token punctuation">,</span> <span class="token string">"="</span> <span class="token operator">+</span> jsonp <span class="token operator">+</span> <span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			s<span class="token punctuation">.</span>url <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>jsre<span class="token punctuation">,</span> <span class="token string">"="</span> <span class="token operator">+</span> jsonp <span class="token operator">+</span> <span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// We need to make sure</span>
			<span class="token comment">// that a JSONP style response is executed properly</span>
			s<span class="token punctuation">.</span>dataType <span class="token operator">=</span> <span class="token string">"script"</span><span class="token punctuation">;</span>

			<span class="token comment">// Handle JSONP-style loading</span>
			window<span class="token punctuation">[</span> jsonp <span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">[</span> jsonp <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">tmp</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				data <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
				<span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// Garbage collect</span>
				window<span class="token punctuation">[</span> jsonp <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token keyword">delete</span> window<span class="token punctuation">[</span> jsonp <span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> head <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> script <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>dataType <span class="token operator">===</span> <span class="token string">"script"</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>cache <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>cache <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">===</span> <span class="token string">"GET"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ts <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// try replacing _= if it is there</span>
			<span class="token keyword">var</span> ret <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rts<span class="token punctuation">,</span> <span class="token string">"$1_="</span> <span class="token operator">+</span> ts <span class="token operator">+</span> <span class="token string">"$2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// if nothing was replaced, add timestamp to the end</span>
			s<span class="token punctuation">.</span>url <span class="token operator">=</span> ret <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ret <span class="token operator">===</span> s<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>rquery<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_="</span> <span class="token operator">+</span> ts <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// If data is available, append data to url for get requests</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> type <span class="token operator">===</span> <span class="token string">"GET"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span>url <span class="token operator">+=</span> <span class="token punctuation">(</span>rquery<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> s<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Watch for a new set of requests</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> jQuery<span class="token punctuation">.</span>active<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxStart"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Matches an absolute URL, and saves the domain</span>
		<span class="token keyword">var</span> parts <span class="token operator">=</span> rurl<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> s<span class="token punctuation">.</span>url <span class="token punctuation">)</span><span class="token punctuation">,</span>
			remote <span class="token operator">=</span> parts <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> location<span class="token punctuation">.</span>protocol <span class="token operator">||</span> parts<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">!==</span> location<span class="token punctuation">.</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// If we're requesting a remote document</span>
		<span class="token comment">// and trying to load JSON or Script with a GET</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>dataType <span class="token operator">===</span> <span class="token string">"script"</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">===</span> <span class="token string">"GET"</span> <span class="token operator">&amp;&amp;</span> remote <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
			<span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			script<span class="token punctuation">.</span>src <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>scriptCharset <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				script<span class="token punctuation">.</span>charset <span class="token operator">=</span> s<span class="token punctuation">.</span>scriptCharset<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Handle Script loading</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jsonp <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

				<span class="token comment">// Attach handlers for all browsers</span>
				script<span class="token punctuation">.</span>onload <span class="token operator">=</span> script<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>done <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">||</span>
							<span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">"loaded"</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
						<span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Handle memory leak in IE</span>
						script<span class="token punctuation">.</span>onload <span class="token operator">=</span> script<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> head <span class="token operator">&amp;&amp;</span> script<span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> script <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Use insertBefore instead of appendChild  to circumvent an IE6 bug.</span>
			<span class="token comment">// This arises when a base node is used (#2709 and #4378).</span>
			head<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> script<span class="token punctuation">,</span> head<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// We handle everything using the script element injection</span>
			<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> requestDone <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

		<span class="token comment">// Create the request object</span>
		<span class="token keyword">var</span> xhr <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">xhr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>xhr <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Open the socket</span>
		<span class="token comment">// Passing null username, generates a login popup on Opera (#2865)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>username <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> s<span class="token punctuation">.</span>url<span class="token punctuation">,</span> s<span class="token punctuation">.</span>async<span class="token punctuation">,</span> s<span class="token punctuation">.</span>username<span class="token punctuation">,</span> s<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> s<span class="token punctuation">.</span>url<span class="token punctuation">,</span> s<span class="token punctuation">.</span>async<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Need an extra try/catch for cross domain requests in Firefox 3</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// Set the correct header, if data is being sent</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>data <span class="token operator">||</span> origSettings <span class="token operator">&amp;&amp;</span> origSettings<span class="token punctuation">.</span>contentType <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>ifModified <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>s<span class="token punctuation">.</span>url<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"If-Modified-Since"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>s<span class="token punctuation">.</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>s<span class="token punctuation">.</span>url<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"If-None-Match"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>s<span class="token punctuation">.</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Set header so the called script knows that it's an XMLHttpRequest</span>
			<span class="token comment">// Only send the header if it's not a remote XHR</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>remote <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"X-Requested-With"</span><span class="token punctuation">,</span> <span class="token string">"XMLHttpRequest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Set the Accepts header for the server, depending on the dataType</span>
			xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Accept"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>dataType <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span> s<span class="token punctuation">.</span>dataType <span class="token punctuation">]</span> <span class="token operator">?</span>
				s<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span> s<span class="token punctuation">.</span>dataType <span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">", */*"</span> <span class="token operator">:</span>
				s<span class="token punctuation">.</span>accepts<span class="token punctuation">.</span>_default <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

		<span class="token comment">// Allow custom headers/mimetypes and early abort</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>beforeSend <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">beforeSend</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>callbackContext<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Handle the global AJAX counter</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> <span class="token operator">--</span>jQuery<span class="token punctuation">.</span>active <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxStop"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// close opended socket</span>
			xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"ajaxSend"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Wait for a response to come back</span>
		<span class="token keyword">var</span> onreadystatechange <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">isTimeout</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// The request was aborted</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>xhr <span class="token operator">||</span> xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> isTimeout <span class="token operator">===</span> <span class="token string">"abort"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Opera doesn't call onreadystatechange before this point</span>
				<span class="token comment">// so we simulate the call</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>requestDone <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				requestDone <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> xhr <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					xhr<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>noop<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

			<span class="token comment">// The transfer is complete and the data is available, or the request timed out</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>requestDone <span class="token operator">&amp;&amp;</span> xhr <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">||</span> isTimeout <span class="token operator">===</span> <span class="token string">"timeout"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				requestDone <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				xhr<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>noop<span class="token punctuation">;</span>

				status <span class="token operator">=</span> isTimeout <span class="token operator">===</span> <span class="token string">"timeout"</span> <span class="token operator">?</span>
					<span class="token string-property property">"timeout"</span> <span class="token operator">:</span>
					<span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">httpSuccess</span><span class="token punctuation">(</span> xhr <span class="token punctuation">)</span> <span class="token operator">?</span>
						<span class="token string-property property">"error"</span> <span class="token operator">:</span>
						s<span class="token punctuation">.</span>ifModified <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">httpNotModified</span><span class="token punctuation">(</span> xhr<span class="token punctuation">,</span> s<span class="token punctuation">.</span>url <span class="token punctuation">)</span> <span class="token operator">?</span>
							<span class="token string-property property">"notmodified"</span> <span class="token operator">:</span>
							<span class="token string">"success"</span><span class="token punctuation">;</span>

				<span class="token keyword">var</span> errMsg<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> status <span class="token operator">===</span> <span class="token string">"success"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Watch for, and catch, XML document parse errors</span>
					<span class="token keyword">try</span> <span class="token punctuation">{</span>
						<span class="token comment">// process the data (runs the xml through httpData regardless of callback)</span>
						data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">httpData</span><span class="token punctuation">(</span> xhr<span class="token punctuation">,</span> s<span class="token punctuation">.</span>dataType<span class="token punctuation">,</span> s <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						status <span class="token operator">=</span> <span class="token string">"parsererror"</span><span class="token punctuation">;</span>
						errMsg <span class="token operator">=</span> err<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Make sure that the request was successful or notmodified</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> status <span class="token operator">===</span> <span class="token string">"success"</span> <span class="token operator">||</span> status <span class="token operator">===</span> <span class="token string">"notmodified"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// JSONP handles its own success callback</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jsonp <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">handleError</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> errMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Fire the complete handlers</span>
				<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> isTimeout <span class="token operator">===</span> <span class="token string">"timeout"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Stop memory leaks</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>async <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Override the abort handler, if we can (IE doesn't allow it, but that's OK)</span>
		<span class="token comment">// Opera doesn't fire onreadystatechange at all on abort</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> oldAbort <span class="token operator">=</span> xhr<span class="token punctuation">.</span>abort<span class="token punctuation">;</span>
			xhr<span class="token punctuation">.</span><span class="token function-variable function">abort</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> xhr <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">oldAbort</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> xhr <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token function">onreadystatechange</span><span class="token punctuation">(</span> <span class="token string">"abort"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

		<span class="token comment">// Timeout checker</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>async <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>timeout <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Check to see if the request is still happening</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> xhr <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>requestDone <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">onreadystatechange</span><span class="token punctuation">(</span> <span class="token string">"timeout"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Send the data</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"POST"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"PUT"</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">"DELETE"</span> <span class="token operator">?</span> s<span class="token punctuation">.</span>data <span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">handleError</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// Fire the complete handlers</span>
			<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// firefox 1.5 doesn't fire statechange for sync requests</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>s<span class="token punctuation">.</span>async <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">onreadystatechange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// If a local callback was specified, fire it and pass it the data</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>success <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> callbackContext<span class="token punctuation">,</span> data<span class="token punctuation">,</span> status<span class="token punctuation">,</span> xhr <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Fire the global callback</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxSuccess"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">function</span> <span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Process result</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>complete <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> callbackContext<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// The request was completed</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxComplete"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Handle the global AJAX counter</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> <span class="token operator">--</span>jQuery<span class="token punctuation">.</span>active <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxStop"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">function</span> <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">(</span>s<span class="token punctuation">.</span>context <span class="token operator">?</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>context<span class="token punctuation">)</span> <span class="token operator">:</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// return XMLHttpRequest to allow aborting the request etc.</span>
		<span class="token keyword">return</span> xhr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">handleError</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">s<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// If a local callback was specified, fire it</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>error <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> s<span class="token punctuation">.</span>context <span class="token operator">||</span> s<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Fire the global callback</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">(</span>s<span class="token punctuation">.</span>context <span class="token operator">?</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>context<span class="token punctuation">)</span> <span class="token operator">:</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxError"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Counter for holding the number of active queries</span>
	<span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

	<span class="token comment">// Determines if an XMLHttpRequest was successful or not</span>
	<span class="token function-variable function">httpSuccess</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">xhr</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450</span>
			<span class="token keyword">return</span> <span class="token operator">!</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&amp;&amp;</span> location<span class="token punctuation">.</span>protocol <span class="token operator">===</span> <span class="token string">"file:"</span> <span class="token operator">||</span>
				<span class="token comment">// Opera returns 0 when status is 304</span>
				<span class="token punctuation">(</span> xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span> <span class="token punctuation">)</span> <span class="token operator">||</span>
				xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">1223</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Determines if an XMLHttpRequest returns NotModified</span>
	<span class="token function-variable function">httpNotModified</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">xhr<span class="token punctuation">,</span> url</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> lastModified <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"Last-Modified"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			etag <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"Etag"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> lastModified <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>url<span class="token punctuation">]</span> <span class="token operator">=</span> lastModified<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> etag <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>url<span class="token punctuation">]</span> <span class="token operator">=</span> etag<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Opera returns 0 when status is 304</span>
		<span class="token keyword">return</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">httpData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">xhr<span class="token punctuation">,</span> type<span class="token punctuation">,</span> s</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ct <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"content-type"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">,</span>
			xml <span class="token operator">=</span> type <span class="token operator">===</span> <span class="token string">"xml"</span> <span class="token operator">||</span> <span class="token operator">!</span>type <span class="token operator">&amp;&amp;</span> ct<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"xml"</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			data <span class="token operator">=</span> xml <span class="token operator">?</span> xhr<span class="token punctuation">.</span>responseXML <span class="token operator">:</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> xml <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">"parsererror"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> <span class="token string">"parsererror"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Allow a pre-filtering function to sanitize the response</span>
		<span class="token comment">// s is checked to keep backwards compatibility</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>dataFilter <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			data <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">dataFilter</span><span class="token punctuation">(</span> data<span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// The filter can actually parse the response</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Get the JavaScript object, if JSON is used.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"json"</span> <span class="token operator">||</span> <span class="token operator">!</span>type <span class="token operator">&amp;&amp;</span> ct<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"json"</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">parseJSON</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// If the type is "script", eval it in global context</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">"script"</span> <span class="token operator">||</span> <span class="token operator">!</span>type <span class="token operator">&amp;&amp;</span> ct<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"javascript"</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">globalEval</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Serialize an array of form elements or a set of</span>
	<span class="token comment">// key/values into a query string</span>
	<span class="token function-variable function">param</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">a<span class="token punctuation">,</span> traditional</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		
		<span class="token comment">// Set traditional to true for jQuery &lt;= 1.3.2 behavior.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> traditional <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			traditional <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span>traditional<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">// If an array was passed in, assume that it is an array of form elements.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">||</span> a<span class="token punctuation">.</span>jquery <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Serialize the form elements</span>
			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// If traditional, encode the "old" way (the way 1.3.2 or older</span>
			<span class="token comment">// did it), otherwise encode params recursively.</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> prefix <span class="token keyword">in</span> a <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">buildParams</span><span class="token punctuation">(</span> prefix<span class="token punctuation">,</span> a<span class="token punctuation">[</span>prefix<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Return the resulting serialization</span>
		<span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>r20<span class="token punctuation">,</span> <span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">function</span> <span class="token function">buildParams</span><span class="token punctuation">(</span> <span class="token parameter">prefix<span class="token punctuation">,</span> obj</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Serialize array item.</span>
				jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> obj<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> v</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> traditional <span class="token operator">||</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[\]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> prefix <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// Treat each array item as a scalar.</span>
						<span class="token function">add</span><span class="token punctuation">(</span> prefix<span class="token punctuation">,</span> v <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">// If array item is non-scalar (array or object), encode its</span>
						<span class="token comment">// numeric index to resolve deserialization ambiguity issues.</span>
						<span class="token comment">// Note that rack (as of 1.0.0) can't currently deserialize</span>
						<span class="token comment">// nested arrays properly, and attempting to do so may cause</span>
						<span class="token comment">// a server error. Possible fixes are to modify rack's</span>
						<span class="token comment">// deserialization algorithm or to provide an option or flag</span>
						<span class="token comment">// to force array serialization to be shallow.</span>
						<span class="token function">buildParams</span><span class="token punctuation">(</span> prefix <span class="token operator">+</span> <span class="token string">"["</span> <span class="token operator">+</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> v <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">?</span> i <span class="token operator">:</span> <span class="token string">""</span> <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">,</span> v <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>traditional <span class="token operator">&amp;&amp;</span> obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Serialize object item.</span>
				jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> obj<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">k<span class="token punctuation">,</span> v</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">buildParams</span><span class="token punctuation">(</span> prefix <span class="token operator">+</span> <span class="token string">"["</span> <span class="token operator">+</span> k <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">,</span> v <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token comment">// Serialize scalar item.</span>
				<span class="token function">add</span><span class="token punctuation">(</span> prefix<span class="token punctuation">,</span> obj <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span> <span class="token parameter">key<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// If value is a function, invoke it and return its value</span>
			value <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> value<span class="token punctuation">;</span>
			s<span class="token punctuation">[</span> s<span class="token punctuation">.</span>length <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> elemdisplay <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	rfxtypes <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">toggle|show|hide</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	rfxnum <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([+-]=)?([\d+-.]+)(.*)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	timerId<span class="token punctuation">,</span>
	fxAttrs <span class="token operator">=</span> <span class="token punctuation">[</span>
		<span class="token comment">// height animations</span>
		<span class="token punctuation">[</span> <span class="token string">"height"</span><span class="token punctuation">,</span> <span class="token string">"marginTop"</span><span class="token punctuation">,</span> <span class="token string">"marginBottom"</span><span class="token punctuation">,</span> <span class="token string">"paddingTop"</span><span class="token punctuation">,</span> <span class="token string">"paddingBottom"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token comment">// width animations</span>
		<span class="token punctuation">[</span> <span class="token string">"width"</span><span class="token punctuation">,</span> <span class="token string">"marginLeft"</span><span class="token punctuation">,</span> <span class="token string">"marginRight"</span><span class="token punctuation">,</span> <span class="token string">"paddingLeft"</span><span class="token punctuation">,</span> <span class="token string">"paddingRight"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token comment">// opacity animations</span>
		<span class="token punctuation">[</span> <span class="token string">"opacity"</span> <span class="token punctuation">]</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">speed<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> speed <span class="token operator">||</span> speed <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span> <span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> old <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"olddisplay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> old <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"display"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"none"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> nodeName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">,</span> display<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> elemdisplay<span class="token punctuation">[</span> nodeName <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						display <span class="token operator">=</span> elemdisplay<span class="token punctuation">[</span> nodeName <span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">"&lt;"</span> <span class="token operator">+</span> nodeName <span class="token operator">+</span> <span class="token string">" />"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						display <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span> display <span class="token operator">===</span> <span class="token string">"none"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						elem<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						elemdisplay<span class="token punctuation">[</span> nodeName <span class="token punctuation">]</span> <span class="token operator">=</span> display<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"olddisplay"</span><span class="token punctuation">,</span> display<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Set the display of the elements in a second loop</span>
			<span class="token comment">// to avoid the constant reflow</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"olddisplay"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">speed<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> speed <span class="token operator">||</span> speed <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span> <span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">"hide"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> old <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"olddisplay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>old <span class="token operator">&amp;&amp;</span> old <span class="token operator">!==</span> <span class="token string">"none"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"olddisplay"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Set the display of the elements in a second loop</span>
			<span class="token comment">// to avoid the constant reflow</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Save the old toggle function</span>
	<span class="token literal-property property">_toggle</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>toggle<span class="token punctuation">,</span>

	<span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn<span class="token punctuation">,</span> fn2</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> bool <span class="token operator">=</span> <span class="token keyword">typeof</span> fn <span class="token operator">===</span> <span class="token string">"boolean"</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_toggle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> fn <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bool <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> state <span class="token operator">=</span> bool <span class="token operator">?</span> fn <span class="token operator">:</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">":hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">[</span> state <span class="token operator">?</span> <span class="token string">"show"</span> <span class="token operator">:</span> <span class="token string">"hide"</span> <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">"toggle"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> fn2<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">fadeTo</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">speed<span class="token punctuation">,</span> to<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">":hidden"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"opacity"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">opacity</span><span class="token operator">:</span> to<span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">animate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">prop<span class="token punctuation">,</span> speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> optall <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">speed</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span> prop <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> optall<span class="token punctuation">.</span>complete <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span> optall<span class="token punctuation">.</span>queue <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span> <span class="token string">"each"</span> <span class="token operator">:</span> <span class="token string">"queue"</span> <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> opt <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> optall<span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">,</span>
				hidden <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">":hidden"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> p <span class="token keyword">in</span> prop <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> name <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rdashAlpha<span class="token punctuation">,</span> fcamelCase<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> p <span class="token operator">!==</span> name <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					prop<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> prop<span class="token punctuation">[</span> p <span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">delete</span> prop<span class="token punctuation">[</span> p <span class="token punctuation">]</span><span class="token punctuation">;</span>
					p <span class="token operator">=</span> name<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> prop<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"hide"</span> <span class="token operator">&amp;&amp;</span> hidden <span class="token operator">||</span> prop<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"show"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>hidden <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> opt<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> p <span class="token operator">===</span> <span class="token string">"height"</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token string">"width"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>style <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Store display property</span>
					opt<span class="token punctuation">.</span>display <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Make sure that nothing sneaks out</span>
					opt<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span> prop<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Create (if needed) and add to specialEasing</span>
					<span class="token punctuation">(</span>opt<span class="token punctuation">.</span>specialEasing <span class="token operator">=</span> opt<span class="token punctuation">.</span>specialEasing <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> prop<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					prop<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> prop<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> opt<span class="token punctuation">.</span>overflow <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">"hidden"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			opt<span class="token punctuation">.</span>curAnim <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>

			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> prop<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name<span class="token punctuation">,</span> val</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>fx</span><span class="token punctuation">(</span> self<span class="token punctuation">,</span> opt<span class="token punctuation">,</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> rfxtypes<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					e<span class="token punctuation">[</span> val <span class="token operator">===</span> <span class="token string">"toggle"</span> <span class="token operator">?</span> hidden <span class="token operator">?</span> <span class="token string">"show"</span> <span class="token operator">:</span> <span class="token string">"hide"</span> <span class="token operator">:</span> val <span class="token punctuation">]</span><span class="token punctuation">(</span> prop <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> parts <span class="token operator">=</span> rfxnum<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span>
						start <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> parts <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> end <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> parts<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
							unit <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">"px"</span><span class="token punctuation">;</span>

						<span class="token comment">// We need to compute starting value</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> unit <span class="token operator">!==</span> <span class="token string">"px"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							self<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>end <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> unit<span class="token punctuation">;</span>
							start <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>end <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> e<span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> start<span class="token punctuation">;</span>
							self<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> start <span class="token operator">+</span> unit<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// If a +=/-= token was provided, we're doing a relative animation</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							end <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"-="</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> end<span class="token punctuation">)</span> <span class="token operator">+</span> start<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						e<span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> unit <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						e<span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> val<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// For JS strict compliance</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">clearQueue<span class="token punctuation">,</span> gotoEnd</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> timers <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> clearQueue <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// go in reverse order so anything added to the queue during the loop is ignored</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> timers<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> timers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>elem <span class="token operator">===</span> <span class="token keyword">this</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>gotoEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// force the next step to be the last</span>
						timers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					timers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// start the next in the queue if the last step wasn't forced</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>gotoEnd <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Generate shortcuts for custom animations</span>
jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">slideDown</span><span class="token operator">:</span> <span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">slideUp</span><span class="token operator">:</span> <span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">"hide"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">slideToggle</span><span class="token operator">:</span> <span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">"toggle"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">fadeIn</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">"show"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">fadeOut</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">"hide"</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name<span class="token punctuation">,</span> props</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">speed<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span> props<span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">speed</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> opt <span class="token operator">=</span> speed <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> speed <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">?</span> speed <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">complete</span><span class="token operator">:</span> fn <span class="token operator">||</span> <span class="token operator">!</span>fn <span class="token operator">&amp;&amp;</span> easing <span class="token operator">||</span>
				jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> speed <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> speed<span class="token punctuation">,</span>
			<span class="token literal-property property">duration</span><span class="token operator">:</span> speed<span class="token punctuation">,</span>
			<span class="token literal-property property">easing</span><span class="token operator">:</span> fn <span class="token operator">&amp;&amp;</span> easing <span class="token operator">||</span> easing <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>easing<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> easing
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		opt<span class="token punctuation">.</span>duration <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>off <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token keyword">typeof</span> opt<span class="token punctuation">.</span>duration <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token operator">?</span> opt<span class="token punctuation">.</span>duration <span class="token operator">:</span>
			jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">[</span>opt<span class="token punctuation">.</span>duration<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">.</span>_default<span class="token punctuation">;</span>

		<span class="token comment">// Queueing</span>
		opt<span class="token punctuation">.</span>old <span class="token operator">=</span> opt<span class="token punctuation">.</span>complete<span class="token punctuation">;</span>
		opt<span class="token punctuation">.</span><span class="token function-variable function">complete</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> opt<span class="token punctuation">.</span>queue <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> opt<span class="token punctuation">.</span>old <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				opt<span class="token punctuation">.</span><span class="token function">old</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> opt<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">easing</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">linear</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">p<span class="token punctuation">,</span> n<span class="token punctuation">,</span> firstNum<span class="token punctuation">,</span> diff</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> firstNum <span class="token operator">+</span> diff <span class="token operator">*</span> p<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">swing</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">p<span class="token punctuation">,</span> n<span class="token punctuation">,</span> firstNum<span class="token punctuation">,</span> diff</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>p<span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> diff <span class="token operator">+</span> firstNum<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">timers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token function-variable function">fx</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> prop</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>elem <span class="token operator">=</span> elem<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">=</span> prop<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>options<span class="token punctuation">.</span>orig <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			options<span class="token punctuation">.</span>orig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// Simple function for setting a style value</span>
	<span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>step <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>now<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token punctuation">.</span>_default<span class="token punctuation">)</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Set display property to block for height/width animations</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">===</span> <span class="token string">"height"</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">===</span> <span class="token string">"width"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Get the current size</span>
	<span class="token function-variable function">cur</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">force</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">[</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">,</span> force<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> r <span class="token operator">&amp;&amp;</span> r <span class="token operator">></span> <span class="token operator">-</span><span class="token number">10000</span> <span class="token operator">?</span> r <span class="token operator">:</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Start an animation from one number to another</span>
	<span class="token function-variable function">custom</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">from<span class="token punctuation">,</span> to<span class="token punctuation">,</span> unit</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> from<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> to<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>unit <span class="token operator">=</span> unit <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>unit <span class="token operator">||</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token keyword">function</span> <span class="token function">t</span><span class="token punctuation">(</span> <span class="token parameter">gotoEnd</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span>gotoEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		t<span class="token punctuation">.</span>elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>timerId <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>tick<span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Simple 'show' function</span>
	<span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Remember where we started, so that we can go back to it later</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>orig<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

		<span class="token comment">// Begin the animation</span>
		<span class="token comment">// Make sure that we start at a small width/height to avoid any</span>
		<span class="token comment">// flash of content</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">===</span> <span class="token string">"width"</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">===</span> <span class="token string">"height"</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Start by showing the element</span>
		<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Simple 'hide' function</span>
	<span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Remember where we started, so that we can go back to it later</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>orig<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hide <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

		<span class="token comment">// Begin the animation</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Each step of an animation</span>
	<span class="token function-variable function">step</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">gotoEnd</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> gotoEnd <span class="token operator">||</span> t <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>curAnim<span class="token punctuation">[</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>curAnim <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>curAnim<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> done <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>display <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Reset the overflow</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>overflow<span class="token punctuation">;</span>

					<span class="token comment">// Reset the display</span>
					<span class="token keyword">var</span> old <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token string">"olddisplay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> old <span class="token operator">?</span> old <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>display<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token string">"display"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"none"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Hide the element if the "hide" operation was done</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hide <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Reset the properties, if the item has been hidden or shown</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hide <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>show <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> p <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>curAnim <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> p<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>orig<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Execute the complete function</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> n <span class="token operator">=</span> t <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> n <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration<span class="token punctuation">;</span>

			<span class="token comment">// Perform the easing function, defaults to swing</span>
			<span class="token keyword">var</span> specialEasing <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>specialEasing <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>specialEasing<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> defaultEasing <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>easing <span class="token operator">||</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>easing<span class="token punctuation">.</span>swing <span class="token operator">?</span> <span class="token string">"swing"</span> <span class="token operator">:</span> <span class="token string">"linear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>easing<span class="token punctuation">[</span>specialEasing <span class="token operator">||</span> defaultEasing<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Perform the next step of the animation</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">tick</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> timers <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> timers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>timers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				timers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>timers<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
		
	<span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">clearInterval</span><span class="token punctuation">(</span> timerId <span class="token punctuation">)</span><span class="token punctuation">;</span>
		timerId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token literal-property property">speeds</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">slow</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
 		<span class="token literal-property property">fast</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
 		<span class="token comment">// Default speed</span>
 		<span class="token literal-property property">_default</span><span class="token operator">:</span> <span class="token number">400</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">step</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">opacity</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fx</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>fx<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token string">"opacity"</span><span class="token punctuation">,</span> fx<span class="token punctuation">.</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">_default</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fx</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> fx<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style <span class="token operator">&amp;&amp;</span> fx<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> fx<span class="token punctuation">.</span>prop <span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				fx<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> fx<span class="token punctuation">.</span>prop <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>fx<span class="token punctuation">.</span>prop <span class="token operator">===</span> <span class="token string">"width"</span> <span class="token operator">||</span> fx<span class="token punctuation">.</span>prop <span class="token operator">===</span> <span class="token string">"height"</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> fx<span class="token punctuation">.</span>now<span class="token punctuation">)</span> <span class="token operator">:</span> fx<span class="token punctuation">.</span>now<span class="token punctuation">)</span> <span class="token operator">+</span> fx<span class="token punctuation">.</span>unit<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				fx<span class="token punctuation">.</span>elem<span class="token punctuation">[</span> fx<span class="token punctuation">.</span>prop <span class="token punctuation">]</span> <span class="token operator">=</span> fx<span class="token punctuation">.</span>now<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>expr <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>filters <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function-variable function">animated</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem <span class="token operator">===</span> fn<span class="token punctuation">.</span>elem<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">genFx</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> num</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> fxAttrs<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fxAttrs<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		obj<span class="token punctuation">[</span> <span class="token keyword">this</span> <span class="token punctuation">]</span> <span class="token operator">=</span> type<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token string">"getBoundingClientRect"</span> <span class="token keyword">in</span> document<span class="token punctuation">.</span>documentElement <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">offset</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">options</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> options <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span><span class="token function">setOffset</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">,</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token operator">||</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>ownerDocument <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token operator">===</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>body <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span><span class="token function">bodyOffset</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> box <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> doc <span class="token operator">=</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span> body <span class="token operator">=</span> doc<span class="token punctuation">.</span>body<span class="token punctuation">,</span> docElem <span class="token operator">=</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>
			clientTop <span class="token operator">=</span> docElem<span class="token punctuation">.</span>clientTop <span class="token operator">||</span> body<span class="token punctuation">.</span>clientTop <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span> clientLeft <span class="token operator">=</span> docElem<span class="token punctuation">.</span>clientLeft <span class="token operator">||</span> body<span class="token punctuation">.</span>clientLeft <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>
			top  <span class="token operator">=</span> box<span class="token punctuation">.</span>top  <span class="token operator">+</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>boxModel <span class="token operator">&amp;&amp;</span> docElem<span class="token punctuation">.</span>scrollTop  <span class="token operator">||</span> body<span class="token punctuation">.</span>scrollTop <span class="token punctuation">)</span> <span class="token operator">-</span> clientTop<span class="token punctuation">,</span>
			left <span class="token operator">=</span> box<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>pageXOffset <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>boxModel <span class="token operator">&amp;&amp;</span> docElem<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> body<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">)</span> <span class="token operator">-</span> clientLeft<span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> top<span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> left <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">offset</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">options</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> options <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span><span class="token function">setOffset</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">,</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token operator">||</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>ownerDocument <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token operator">===</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>body <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span><span class="token function">bodyOffset</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> offsetParent <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetParent<span class="token punctuation">,</span> prevOffsetParent <span class="token operator">=</span> elem<span class="token punctuation">,</span>
			doc <span class="token operator">=</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span> computedStyle<span class="token punctuation">,</span> docElem <span class="token operator">=</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>
			body <span class="token operator">=</span> doc<span class="token punctuation">.</span>body<span class="token punctuation">,</span> defaultView <span class="token operator">=</span> doc<span class="token punctuation">.</span>defaultView<span class="token punctuation">,</span>
			prevComputedStyle <span class="token operator">=</span> defaultView <span class="token operator">?</span> defaultView<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token operator">:</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">,</span>
			top <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetTop<span class="token punctuation">,</span> left <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem <span class="token operator">!==</span> body <span class="token operator">&amp;&amp;</span> elem <span class="token operator">!==</span> docElem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>supportsFixedPosition <span class="token operator">&amp;&amp;</span> prevComputedStyle<span class="token punctuation">.</span>position <span class="token operator">===</span> <span class="token string">"fixed"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			computedStyle <span class="token operator">=</span> defaultView <span class="token operator">?</span> defaultView<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">:</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">;</span>
			top  <span class="token operator">-=</span> elem<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
			left <span class="token operator">-=</span> elem<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token operator">===</span> offsetParent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				top  <span class="token operator">+=</span> elem<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
				left <span class="token operator">+=</span> elem<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>doesNotAddBorder <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>doesAddBorderForTableAndCells <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^t(able|d|h)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					top  <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> computedStyle<span class="token punctuation">.</span>borderTopWidth  <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
					left <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> computedStyle<span class="token punctuation">.</span>borderLeftWidth <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				prevOffsetParent <span class="token operator">=</span> offsetParent<span class="token punctuation">,</span> offsetParent <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>subtractsBorderForOverflowNotVisible <span class="token operator">&amp;&amp;</span> computedStyle<span class="token punctuation">.</span>overflow <span class="token operator">!==</span> <span class="token string">"visible"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				top  <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> computedStyle<span class="token punctuation">.</span>borderTopWidth  <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
				left <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> computedStyle<span class="token punctuation">.</span>borderLeftWidth <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			prevComputedStyle <span class="token operator">=</span> computedStyle<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> prevComputedStyle<span class="token punctuation">.</span>position <span class="token operator">===</span> <span class="token string">"relative"</span> <span class="token operator">||</span> prevComputedStyle<span class="token punctuation">.</span>position <span class="token operator">===</span> <span class="token string">"static"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			top  <span class="token operator">+=</span> body<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
			left <span class="token operator">+=</span> body<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>supportsFixedPosition <span class="token operator">&amp;&amp;</span> prevComputedStyle<span class="token punctuation">.</span>position <span class="token operator">===</span> <span class="token string">"fixed"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			top  <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span> docElem<span class="token punctuation">.</span>scrollTop<span class="token punctuation">,</span> body<span class="token punctuation">.</span>scrollTop <span class="token punctuation">)</span><span class="token punctuation">;</span>
			left <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span> docElem<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">,</span> body<span class="token punctuation">.</span>scrollLeft <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> top<span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> left <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span>offset <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">initialize</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> innerDiv<span class="token punctuation">,</span> checkDiv<span class="token punctuation">,</span> table<span class="token punctuation">,</span> td<span class="token punctuation">,</span> bodyMarginTop <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token string">"marginTop"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>
			html <span class="token operator">=</span> <span class="token string">"&lt;div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'>&lt;div>&lt;/div>&lt;/div>&lt;table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'>&lt;tr>&lt;td>&lt;/td>&lt;/tr>&lt;/table>"</span><span class="token punctuation">;</span>

		jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span> container<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"absolute"</span><span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">"1px"</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"1px"</span><span class="token punctuation">,</span> <span class="token literal-property property">visibility</span><span class="token operator">:</span> <span class="token string">"hidden"</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		container<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">;</span>
		body<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> container<span class="token punctuation">,</span> body<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
		innerDiv <span class="token operator">=</span> container<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
		checkDiv <span class="token operator">=</span> innerDiv<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
		td <span class="token operator">=</span> innerDiv<span class="token punctuation">.</span>nextSibling<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>doesNotAddBorder <span class="token operator">=</span> <span class="token punctuation">(</span>checkDiv<span class="token punctuation">.</span>offsetTop <span class="token operator">!==</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>doesAddBorderForTableAndCells <span class="token operator">=</span> <span class="token punctuation">(</span>td<span class="token punctuation">.</span>offsetTop <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		checkDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">"fixed"</span><span class="token punctuation">,</span> checkDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">"20px"</span><span class="token punctuation">;</span>
		<span class="token comment">// safari subtracts parent border width here which is 5px</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>supportsFixedPosition <span class="token operator">=</span> <span class="token punctuation">(</span>checkDiv<span class="token punctuation">.</span>offsetTop <span class="token operator">===</span> <span class="token number">20</span> <span class="token operator">||</span> checkDiv<span class="token punctuation">.</span>offsetTop <span class="token operator">===</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		checkDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> checkDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

		innerDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">"hidden"</span><span class="token punctuation">,</span> innerDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">"relative"</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subtractsBorderForOverflowNotVisible <span class="token operator">=</span> <span class="token punctuation">(</span>checkDiv<span class="token punctuation">.</span>offsetTop <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>doesNotIncludeMarginInBodyOffset <span class="token operator">=</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>offsetTop <span class="token operator">!==</span> bodyMarginTop<span class="token punctuation">)</span><span class="token punctuation">;</span>

		body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> container <span class="token punctuation">)</span><span class="token punctuation">;</span>
		body <span class="token operator">=</span> container <span class="token operator">=</span> innerDiv <span class="token operator">=</span> checkDiv <span class="token operator">=</span> table <span class="token operator">=</span> td <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>initialize <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>noop<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">bodyOffset</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">body</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> top <span class="token operator">=</span> body<span class="token punctuation">.</span>offsetTop<span class="token punctuation">,</span> left <span class="token operator">=</span> body<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>

		jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>doesNotIncludeMarginInBodyOffset <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			top  <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token string">"marginTop"</span><span class="token punctuation">,</span>  <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
			left <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token string">"marginLeft"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> top<span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> left <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token function-variable function">setOffset</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// set position first, in-case top/left are set even on static elem</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">static</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"position"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">"relative"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">var</span> curElem   <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">,</span>
			curOffset <span class="token operator">=</span> curElem<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			curTop    <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"top"</span><span class="token punctuation">,</span>  <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>
			curLeft   <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> options <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			options <span class="token operator">=</span> <span class="token function">options</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> curOffset <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">top</span><span class="token operator">:</span>  <span class="token punctuation">(</span>options<span class="token punctuation">.</span>top  <span class="token operator">-</span> curOffset<span class="token punctuation">.</span>top<span class="token punctuation">)</span>  <span class="token operator">+</span> curTop<span class="token punctuation">,</span>
			<span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>left <span class="token operator">-</span> curOffset<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> curLeft
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token string">"using"</span> <span class="token keyword">in</span> options <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			options<span class="token punctuation">.</span><span class="token function">using</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> props <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			curElem<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span> props <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">position</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token comment">// Get *real* offsetParent</span>
		offsetParent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token comment">// Get correct offsets</span>
		offset       <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		parentOffset <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^body|html$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">:</span> offsetParent<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Subtract element margins</span>
		<span class="token comment">// note: when an element has margin: auto the offsetLeft and marginLeft</span>
		<span class="token comment">// are the same in Safari causing offset.left to incorrectly be 0</span>
		offset<span class="token punctuation">.</span>top  <span class="token operator">-=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"marginTop"</span><span class="token punctuation">,</span>  <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
		offset<span class="token punctuation">.</span>left <span class="token operator">-=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"marginLeft"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token comment">// Add offsetParent borders</span>
		parentOffset<span class="token punctuation">.</span>top  <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"borderTopWidth"</span><span class="token punctuation">,</span>  <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
		parentOffset<span class="token punctuation">.</span>left <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"borderLeftWidth"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token comment">// Subtract the two offsets</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">top</span><span class="token operator">:</span>  offset<span class="token punctuation">.</span>top  <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>top<span class="token punctuation">,</span>
			<span class="token literal-property property">left</span><span class="token operator">:</span> offset<span class="token punctuation">.</span>left <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>left
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">offsetParent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> offsetParent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetParent <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span> offsetParent <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^body|html$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">,</span> <span class="token string">"position"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"static"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				offsetParent <span class="token operator">=</span> offsetParent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> offsetParent<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// Create scrollLeft and scrollTop methods</span>
jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token string">"Left"</span><span class="token punctuation">,</span> <span class="token string">"Top"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> method <span class="token operator">=</span> <span class="token string">"scroll"</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> method <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> win<span class="token punctuation">;</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> val <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Set the scroll offset</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				win <span class="token operator">=</span> <span class="token function">getWindow</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> win <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					win<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>
						<span class="token operator">!</span>i <span class="token operator">?</span> val <span class="token operator">:</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>win<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						 i <span class="token operator">?</span> val <span class="token operator">:</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>win<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">[</span> method <span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			win <span class="token operator">=</span> <span class="token function">getWindow</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Return the scroll offset</span>
			<span class="token keyword">return</span> win <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">"pageXOffset"</span> <span class="token keyword">in</span> win<span class="token punctuation">)</span> <span class="token operator">?</span> win<span class="token punctuation">[</span> i <span class="token operator">?</span> <span class="token string">"pageYOffset"</span> <span class="token operator">:</span> <span class="token string">"pageXOffset"</span> <span class="token punctuation">]</span> <span class="token operator">:</span>
				jQuery<span class="token punctuation">.</span>support<span class="token punctuation">.</span>boxModel <span class="token operator">&amp;&amp;</span> win<span class="token punctuation">.</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span> method <span class="token punctuation">]</span> <span class="token operator">||</span>
					win<span class="token punctuation">.</span>document<span class="token punctuation">.</span>body<span class="token punctuation">[</span> method <span class="token punctuation">]</span> <span class="token operator">:</span>
				elem<span class="token punctuation">[</span> method <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getWindow</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">"scrollTo"</span> <span class="token keyword">in</span> elem <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>document<span class="token punctuation">)</span> <span class="token operator">?</span>
		<span class="token literal-property property">elem</span> <span class="token operator">:</span>
		elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span> <span class="token operator">?</span>
			elem<span class="token punctuation">.</span>defaultView <span class="token operator">||</span> elem<span class="token punctuation">.</span>parentWindow <span class="token operator">:</span>
			<span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Create innerHeight, innerWidth, outerHeight and outerWidth methods</span>
jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">"Height"</span><span class="token punctuation">,</span> <span class="token string">"Width"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> type <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// innerHeight and innerWidth</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span><span class="token string">"inner"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span>
			jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">"padding"</span> <span class="token punctuation">)</span> <span class="token operator">:</span>
			<span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// outerHeight and outerWidth</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span><span class="token string">"outer"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">margin</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span>
			jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> margin <span class="token operator">?</span> <span class="token string">"margin"</span> <span class="token operator">:</span> <span class="token string">"border"</span> <span class="token punctuation">)</span> <span class="token operator">:</span>
			<span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">size</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Get window width or height</span>
		<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> size <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> size <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				self<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">(</span> <span class="token function">size</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> self<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">"scrollTo"</span> <span class="token keyword">in</span> elem <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>document<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token comment">// does it walk and quack like a window?</span>
			<span class="token comment">// Everyone else use document.documentElement or document.body depending on Quirks vs Standards mode</span>
			elem<span class="token punctuation">.</span>document<span class="token punctuation">.</span>compatMode <span class="token operator">===</span> <span class="token string">"CSS1Compat"</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span> <span class="token string">"client"</span> <span class="token operator">+</span> name <span class="token punctuation">]</span> <span class="token operator">||</span>
			elem<span class="token punctuation">.</span>document<span class="token punctuation">.</span>body<span class="token punctuation">[</span> <span class="token string">"client"</span> <span class="token operator">+</span> name <span class="token punctuation">]</span> <span class="token operator">:</span>

			<span class="token comment">// Get document width or height</span>
			<span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token comment">// is it a document</span>
				<span class="token comment">// Either scroll[Width/Height] or offset[Width/Height], whichever is greater</span>
				Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>
					elem<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span><span class="token string">"client"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span>
					elem<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token string">"scroll"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> elem<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span><span class="token string">"scroll"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span>
					elem<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token string">"offset"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> elem<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span><span class="token string">"offset"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span>
				<span class="token punctuation">)</span> <span class="token operator">:</span>

				<span class="token comment">// Get or set width or height on the element</span>
				size <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
					<span class="token comment">// Get width or height on the element</span>
					jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token punctuation">)</span> <span class="token operator">:</span>

					<span class="token comment">// Set the width or height on the element (default to pixels if value is unitless)</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> <span class="token keyword">typeof</span> size <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">?</span> size <span class="token operator">:</span> size <span class="token operator">+</span> <span class="token string">"px"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Expose jQuery to the global object</span>
window<span class="token punctuation">.</span>jQuery <span class="token operator">=</span> window<span class="token punctuation">.</span>$ <span class="token operator">=</span> jQuery<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
    </div>
  

  <div class="attachment-download flex-column flex-center">
    <h3>Download in other formats:</h3>
    <a class="attachment-download-link" download="" href="/bugs.jqueryui.com/raw-attachment/ticket/5829/jquery-1.4.2.js">Original Format</a>
  </div>
</h1></div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2023
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/bugs.jqueryui.com/pagefind/pagefind-ui.js" type="text/javascript"></script>
    <script>
      window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({
          element: "#search",
          showImages: false,
          translations: {
            placeholder: 'Search tickets',
            zero_results: 'No matches found.'
          }
        })
      })
    </script>
  </body>
</html>
