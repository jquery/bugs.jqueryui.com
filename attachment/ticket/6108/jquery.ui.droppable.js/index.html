<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">jquery.ui.droppable.js on Ticket #6108 – Attachment – jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/E43-5SJe5X.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          


<div class="flex-column attachment">
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/ticket/6108">Back to Ticket #6108</a>
      </li>
    </ul>
  </nav>

  <h1>
    <a href="/ticket/6108">Ticket #6108</a>: jquery.ui.droppable.js
  
  <hr>

  <div class="attachment-info">
    <h6>File jquery.ui.droppable.js, 10.3 KB (added by cmathis430, September 24, 2010 05:59PM UTC)</h6>
    
      <p>This file is a patched version of droppable to enable a droppable to accept itself</p>
    
  </div>

  
    <div class="attachment-preview">
      
      <pre class="language-js" tabindex="0"><code class="language-js"><span class="token comment">/*
 * jQuery UI Droppable 1.8.2
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

$<span class="token punctuation">.</span><span class="token function">widget</span><span class="token punctuation">(</span><span class="token string">"ui.droppable"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">widgetEventPrefix</span><span class="token operator">:</span> <span class="token string">"drop"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">accept</span><span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">acceptsSelf</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>
		<span class="token literal-property property">activeClass</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">addClasses</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">hoverClass</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">tolerance</span><span class="token operator">:</span> <span class="token string">'intersect'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">_create</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span> accept <span class="token operator">=</span> o<span class="token punctuation">.</span>accept<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>isover <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isout <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>accept <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>accept<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function-variable function">accept</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> d<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>accept<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">//Store the droppable's proportions</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>proportions <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetWidth<span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight <span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Add the reference and positions to the manager</span>
		$<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>droppables<span class="token punctuation">[</span>o<span class="token punctuation">.</span>scope<span class="token punctuation">]</span> <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>droppables<span class="token punctuation">[</span>o<span class="token punctuation">.</span>scope<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		$<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>droppables<span class="token punctuation">[</span>o<span class="token punctuation">.</span>scope<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">(</span>o<span class="token punctuation">.</span>addClasses <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"ui-droppable"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">destroy</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> drop <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>droppables<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>scope<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> drop<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> drop<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">this</span> <span class="token punctuation">)</span>
				drop<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>element
			<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"ui-droppable ui-droppable-disabled"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span><span class="token string">"droppable"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token string">".droppable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">_setOption</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token string">'accept'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>accept <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function-variable function">value</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> d<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		$<span class="token punctuation">.</span><span class="token class-name">Widget</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">_setOption</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">_activate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> draggable <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>activeClass<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>activeClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">(</span>draggable <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_trigger</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ui</span><span class="token punctuation">(</span>draggable<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">_deactivate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> draggable <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>activeClass<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>activeClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">(</span>draggable <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_trigger</span><span class="token punctuation">(</span><span class="token string">'deactivate'</span><span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ui</span><span class="token punctuation">(</span>draggable<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">_over</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> draggable <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptsSelf<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>draggable <span class="token operator">||</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> draggable<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// Bail if draggable and droppable are same element</span>
		<span class="token punctuation">}</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> draggable<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hoverClass<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hoverClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_trigger</span><span class="token punctuation">(</span><span class="token string">'over'</span><span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ui</span><span class="token punctuation">(</span>draggable<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">_out</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> draggable <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptsSelf<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>draggable <span class="token operator">||</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> draggable<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// Bail if draggable and droppable are same element</span>
		<span class="token punctuation">}</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> draggable<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hoverClass<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hoverClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_trigger</span><span class="token punctuation">(</span><span class="token string">'out'</span><span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ui</span><span class="token punctuation">(</span>draggable<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">_drop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span>custom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> draggable <span class="token operator">=</span> custom <span class="token operator">||</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptsSelf<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>draggable <span class="token operator">||</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> draggable<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// Bail if draggable and droppable are same element</span>
		<span class="token punctuation">}</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>

		<span class="token keyword">var</span> childrenIntersection <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">":data(droppable)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token string">".ui-draggable-dragging"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> inst <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'droppable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>
				inst<span class="token punctuation">.</span>options<span class="token punctuation">.</span>greedy
				<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>inst<span class="token punctuation">.</span>options<span class="token punctuation">.</span>disabled
				<span class="token operator">&amp;&amp;</span> inst<span class="token punctuation">.</span>options<span class="token punctuation">.</span>scope <span class="token operator">==</span> draggable<span class="token punctuation">.</span>options<span class="token punctuation">.</span>scope
				<span class="token operator">&amp;&amp;</span> inst<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> draggable<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token operator">&amp;&amp;</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">intersect</span><span class="token punctuation">(</span>draggable<span class="token punctuation">,</span> $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>inst<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">offset</span><span class="token operator">:</span> inst<span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> inst<span class="token punctuation">.</span>options<span class="token punctuation">.</span>tolerance<span class="token punctuation">)</span>
			<span class="token punctuation">)</span> <span class="token punctuation">{</span> childrenIntersection <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>childrenIntersection<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> draggable<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>activeClass<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>activeClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hoverClass<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hoverClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_trigger</span><span class="token punctuation">(</span><span class="token string">'drop'</span><span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ui</span><span class="token punctuation">(</span>draggable<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">ui</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">draggable</span><span class="token operator">:</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> c<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token literal-property property">helper</span><span class="token operator">:</span> c<span class="token punctuation">.</span>helper<span class="token punctuation">,</span>
			<span class="token literal-property property">position</span><span class="token operator">:</span> c<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
			<span class="token literal-property property">offset</span><span class="token operator">:</span> c<span class="token punctuation">.</span>positionAbs
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>droppable<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">"1.8.2"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function-variable function">intersect</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">draggable<span class="token punctuation">,</span> droppable<span class="token punctuation">,</span> toleranceMode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>droppable<span class="token punctuation">.</span>offset<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> x1 <span class="token operator">=</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>positionAbs <span class="token operator">||</span> draggable<span class="token punctuation">.</span>position<span class="token punctuation">.</span>absolute<span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">,</span> x2 <span class="token operator">=</span> x1 <span class="token operator">+</span> draggable<span class="token punctuation">.</span>helperProportions<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
		y1 <span class="token operator">=</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>positionAbs <span class="token operator">||</span> draggable<span class="token punctuation">.</span>position<span class="token punctuation">.</span>absolute<span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span> y2 <span class="token operator">=</span> y1 <span class="token operator">+</span> draggable<span class="token punctuation">.</span>helperProportions<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
	<span class="token keyword">var</span> l <span class="token operator">=</span> droppable<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>left<span class="token punctuation">,</span> r <span class="token operator">=</span> l <span class="token operator">+</span> droppable<span class="token punctuation">.</span>proportions<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
		t <span class="token operator">=</span> droppable<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>top<span class="token punctuation">,</span> b <span class="token operator">=</span> t <span class="token operator">+</span> droppable<span class="token punctuation">.</span>proportions<span class="token punctuation">.</span>height<span class="token punctuation">;</span>

	<span class="token keyword">switch</span> <span class="token punctuation">(</span>toleranceMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token string">'fit'</span><span class="token operator">:</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;</span> x1 <span class="token operator">&amp;&amp;</span> x2 <span class="token operator">&lt;</span> r
				<span class="token operator">&amp;&amp;</span> t <span class="token operator">&lt;</span> y1 <span class="token operator">&amp;&amp;</span> y2 <span class="token operator">&lt;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string">'intersect'</span><span class="token operator">:</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;</span> x1 <span class="token operator">+</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>helperProportions<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// Right Half</span>
				<span class="token operator">&amp;&amp;</span> x2 <span class="token operator">-</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>helperProportions<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> r <span class="token comment">// Left Half</span>
				<span class="token operator">&amp;&amp;</span> t <span class="token operator">&lt;</span> y1 <span class="token operator">+</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>helperProportions<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// Bottom Half</span>
				<span class="token operator">&amp;&amp;</span> y2 <span class="token operator">-</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>helperProportions<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Top Half</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string">'pointer'</span><span class="token operator">:</span>
			<span class="token keyword">var</span> draggableLeft <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>positionAbs <span class="token operator">||</span> draggable<span class="token punctuation">.</span>position<span class="token punctuation">.</span>absolute<span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>clickOffset <span class="token operator">||</span> draggable<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>click<span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span>
				draggableTop <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>positionAbs <span class="token operator">||</span> draggable<span class="token punctuation">.</span>position<span class="token punctuation">.</span>absolute<span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>clickOffset <span class="token operator">||</span> draggable<span class="token punctuation">.</span>offset<span class="token punctuation">.</span>click<span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">,</span>
				isOver <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">isOver</span><span class="token punctuation">(</span>draggableTop<span class="token punctuation">,</span> draggableLeft<span class="token punctuation">,</span> t<span class="token punctuation">,</span> l<span class="token punctuation">,</span> droppable<span class="token punctuation">.</span>proportions<span class="token punctuation">.</span>height<span class="token punctuation">,</span> droppable<span class="token punctuation">.</span>proportions<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> isOver<span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string">'touch'</span><span class="token operator">:</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span>
					<span class="token punctuation">(</span>y1 <span class="token operator">>=</span> t <span class="token operator">&amp;&amp;</span> y1 <span class="token operator">&lt;=</span> b<span class="token punctuation">)</span> <span class="token operator">||</span>	<span class="token comment">// Top edge touching</span>
					<span class="token punctuation">(</span>y2 <span class="token operator">>=</span> t <span class="token operator">&amp;&amp;</span> y2 <span class="token operator">&lt;=</span> b<span class="token punctuation">)</span> <span class="token operator">||</span>	<span class="token comment">// Bottom edge touching</span>
					<span class="token punctuation">(</span>y1 <span class="token operator">&lt;</span> t <span class="token operator">&amp;&amp;</span> y2 <span class="token operator">></span> b<span class="token punctuation">)</span>		<span class="token comment">// Surrounded vertically</span>
				<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
					<span class="token punctuation">(</span>x1 <span class="token operator">>=</span> l <span class="token operator">&amp;&amp;</span> x1 <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token operator">||</span>	<span class="token comment">// Left edge touching</span>
					<span class="token punctuation">(</span>x2 <span class="token operator">>=</span> l <span class="token operator">&amp;&amp;</span> x2 <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token operator">||</span>	<span class="token comment">// Right edge touching</span>
					<span class="token punctuation">(</span>x1 <span class="token operator">&lt;</span> l <span class="token operator">&amp;&amp;</span> x2 <span class="token operator">></span> r<span class="token punctuation">)</span>		<span class="token comment">// Surrounded horizontally</span>
				<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/*
	This manager tracks offsets of draggables and droppables
*/</span>
$<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
	<span class="token literal-property property">droppables</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'default'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">prepareOffsets</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> m <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>droppables<span class="token punctuation">[</span>t<span class="token punctuation">.</span>options<span class="token punctuation">.</span>scope<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> type <span class="token operator">=</span> event <span class="token operator">?</span> event<span class="token punctuation">.</span>type <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// workaround for #2317</span>
		<span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> t<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">":data(droppable)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token literal-property property">droppablesLoop</span><span class="token operator">:</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>disabled <span class="token operator">||</span> <span class="token punctuation">(</span>t <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> t<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>	<span class="token comment">//No disabled and non-accepted</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>acceptsSelf<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>proportions<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">continue</span> droppablesLoop<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//Filter out elements in the current dragged item</span>
			<span class="token punctuation">}</span> <span class="token comment">// This line was added to patch droppable to be able to accept itself {http://dev.jqueryui.com/ticket/6108}</span>
			m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span> 									<span class="token comment">//If the element is not visible, continue</span>

			m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>offset <span class="token operator">=</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>proportions <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetWidth<span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight <span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span><span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">"mousedown"</span><span class="token punctuation">)</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">_activate</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Activate the droppable if used directly from draggables</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">drop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">draggable<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> dropped <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		$<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>droppables<span class="token punctuation">[</span>draggable<span class="token punctuation">.</span>options<span class="token punctuation">.</span>scope<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>disabled <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">&amp;&amp;</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">intersect</span><span class="token punctuation">(</span>draggable<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>tolerance<span class="token punctuation">)</span><span class="token punctuation">)</span>
				dropped <span class="token operator">=</span> dropped <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_drop</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>disabled <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>currentItem <span class="token operator">||</span> draggable<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>isout <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isover <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_deactivate</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> dropped<span class="token punctuation">;</span>

	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">drag</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">draggable<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">//If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>draggable<span class="token punctuation">.</span>options<span class="token punctuation">.</span>refreshPositions<span class="token punctuation">)</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span><span class="token function">prepareOffsets</span><span class="token punctuation">(</span>draggable<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//Run through all droppables and check their positions based on specific tolerance options</span>
		$<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ddmanager<span class="token punctuation">.</span>droppables<span class="token punctuation">[</span>draggable<span class="token punctuation">.</span>options<span class="token punctuation">.</span>scope<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>disabled <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greedyChild <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> intersects <span class="token operator">=</span> $<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">intersect</span><span class="token punctuation">(</span>draggable<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>tolerance<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token operator">!</span>intersects <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isover <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'isout'</span> <span class="token operator">:</span> <span class="token punctuation">(</span>intersects <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isover <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'isover'</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>c<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> parentInstance<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>greedy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">parents</span><span class="token punctuation">(</span><span class="token string">':data(droppable):eq(0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					parentInstance <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>parent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'droppable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					parentInstance<span class="token punctuation">.</span>greedyChild <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token string">'isover'</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// we just moved into a greedy child</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>parentInstance <span class="token operator">&amp;&amp;</span> c <span class="token operator">==</span> <span class="token string">'isover'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				parentInstance<span class="token punctuation">[</span><span class="token string">'isover'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				parentInstance<span class="token punctuation">[</span><span class="token string">'isout'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
				parentInstance<span class="token punctuation">.</span><span class="token function">_out</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>parentInstance<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">this</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token punctuation">[</span>c <span class="token operator">==</span> <span class="token string">'isout'</span> <span class="token operator">?</span> <span class="token string">'isover'</span> <span class="token operator">:</span> <span class="token string">'isout'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">[</span>c <span class="token operator">==</span> <span class="token string">"isover"</span> <span class="token operator">?</span> <span class="token string">"_over"</span> <span class="token operator">:</span> <span class="token string">"_out"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// we just moved out of a greedy child</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>parentInstance <span class="token operator">&amp;&amp;</span> c <span class="token operator">==</span> <span class="token string">'isout'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				parentInstance<span class="token punctuation">[</span><span class="token string">'isout'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				parentInstance<span class="token punctuation">[</span><span class="token string">'isover'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
				parentInstance<span class="token punctuation">.</span><span class="token function">_over</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>parentInstance<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
    </div>
  

  <div class="attachment-download flex-column flex-center">
    <h3>Download in other formats:</h3>
    <a class="attachment-download-link" download="" href="/raw-attachment/ticket/6108/jquery.ui.droppable.js">Original Format</a>
  </div>
</h1></div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
