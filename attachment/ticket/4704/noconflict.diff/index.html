<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">noconflict.diff on Ticket #4704 – Attachment – jQuery UI - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jqueryui.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/E43-5SJe5X.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery UI issues have moved to <a href="https://github.com/jquery/jquery-ui/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. <br>Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery UI Bugs Home">
            <img src="/img/logo.svg" width="253" alt="jQuery UI">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus" class="flex-column">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery UI sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui active">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery UI navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jqueryui.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://jqueryui.com/demos/">
                    Demos &amp; Documentation
                  </a>
                </li>
                <li class="jq-themes">
                  <a href="https://jqueryui.com/themeroller/">
                    Themes
                  </a>
                </li>
                <li class="jq-development">
                  <a href="https://jqueryui.com/development/">
                    Development
                  </a>
                </li>
                <li class="jq-support">
                  <a href="https://jqueryui.com/support/">
                    Support
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main id="skip" class="flex-column white-box">
        <h2 class="visually-hidden">Search and Top Navigation</h2>
        <div class="flex-row flex-end-center">
          <div id="search"></div>
        </div>
        <nav id="jq-topnav" class="flex-column flex-start-center">
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="flex-column">
          


<div class="flex-column attachment">
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/ticket/4704">Back to Ticket #4704</a>
      </li>
    </ul>
  </nav>

  <h1>
    <a href="/ticket/4704">Ticket #4704</a>: noconflict.diff
  
  <hr>

  <div class="attachment-info">
    <h6>File noconflict.diff, 6.1 KB (added by obrie, July 29, 2009 10:58PM UTC)</h6>
    
      <p>Non-conflicting ui.datepicker (fixed when using multiple instances)</p>
    
  </div>

  
    <div class="attachment-preview">
      
      <pre class="language-diff" tabindex="0"><code class="language-diff">Index: ui/ui.datepicker.js
===================================================================
<span class="token coord">--- ui/ui.datepicker.js	(revision 2958)</span>
<span class="token coord">+++ ui/ui.datepicker.js	(working copy)</span>
<span class="token coord">@@ -16,6 +16,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">$.extend($.ui, { datepicker: { version: "@VERSION" } });
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">var PROP_NAME = 'datepicker';
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">var expando = +new Date();
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">/* Date picker manager.
</span><span class="token prefix unchanged"> </span><span class="token line">   Use the singleton instance of this class, $.datepicker, to interact with the date picker.
</span></span><span class="token coord">@@ -1345,7 +1346,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),
</span><span class="token prefix unchanged"> </span><span class="token line">			this._getFormatConfig(inst)));
</span><span class="token prefix unchanged"> </span><span class="token line">		var prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">			'&lt;a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#' + inst.id + '\', -' + stepMonths + ', \'M\');"' +
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			'&lt;a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_' + expando + '.datepicker._adjustDate(\'#' + inst.id + '\', -' + stepMonths + ', \'M\');"' +
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			' title="' + prevText + '">&lt;span class="ui-icon ui-icon-circle-triangle-' + ( isRTL ? 'e' : 'w') + '">' + prevText + '&lt;/span>&lt;/a>' :
</span><span class="token prefix unchanged"> </span><span class="token line">			(hideIfNoPrevNext ? '' : '&lt;a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+ prevText +'">&lt;span class="ui-icon ui-icon-circle-triangle-' + ( isRTL ? 'e' : 'w') + '">' + prevText + '&lt;/span>&lt;/a>'));
</span><span class="token prefix unchanged"> </span><span class="token line">		var nextText = this._get(inst, 'nextText');
</span></span><span class="token coord">@@ -1353,16 +1354,16 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),
</span><span class="token prefix unchanged"> </span><span class="token line">			this._getFormatConfig(inst)));
</span><span class="token prefix unchanged"> </span><span class="token line">		var next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">			'&lt;a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#' + inst.id + '\', +' + stepMonths + ', \'M\');"' +
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			'&lt;a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_' + expando + '.datepicker._adjustDate(\'#' + inst.id + '\', +' + stepMonths + ', \'M\');"' +
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			' title="' + nextText + '">&lt;span class="ui-icon ui-icon-circle-triangle-' + ( isRTL ? 'w' : 'e') + '">' + nextText + '&lt;/span>&lt;/a>' :
</span><span class="token prefix unchanged"> </span><span class="token line">			(hideIfNoPrevNext ? '' : '&lt;a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+ nextText + '">&lt;span class="ui-icon ui-icon-circle-triangle-' + ( isRTL ? 'w' : 'e') + '">' + nextText + '&lt;/span>&lt;/a>'));
</span><span class="token prefix unchanged"> </span><span class="token line">		var currentText = this._get(inst, 'currentText');
</span><span class="token prefix unchanged"> </span><span class="token line">		var gotoDate = (this._get(inst, 'gotoCurrent') &amp;&amp; inst.currentDay ? currentDate : today);
</span><span class="token prefix unchanged"> </span><span class="token line">		currentText = (!navigationAsDateFormat ? currentText :
</span><span class="token prefix unchanged"> </span><span class="token line">			this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		var controls = (!inst.inline ? '&lt;button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery.datepicker._hideDatepicker();">' + this._get(inst, 'closeText') + '&lt;/button>' : '');
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		var controls = (!inst.inline ? '&lt;button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_' + expando + '.datepicker._hideDatepicker();">' + this._get(inst, 'closeText') + '&lt;/button>' : '');
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		var buttonPanel = (showButtonPanel) ? '&lt;div class="ui-datepicker-buttonpane ui-widget-content">' + (isRTL ? controls : '') +
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">			(this._isInRange(inst, gotoDate) ? '&lt;button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery.datepicker._gotoToday(\'#' + inst.id + '\');"' +
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			(this._isInRange(inst, gotoDate) ? '&lt;button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_' + expando + '.datepicker._gotoToday(\'#' + inst.id + '\');"' +
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			'>' + currentText + '&lt;/button>' : '') + (isRTL ? '' : controls) + '&lt;/div>' : '';
</span><span class="token prefix unchanged"> </span><span class="token line">		var firstDay = parseInt(this._get(inst, 'firstDay'),10);
</span><span class="token prefix unchanged"> </span><span class="token line">		firstDay = (isNaN(firstDay) ? 0 : firstDay);
</span></span><span class="token coord">@@ -1433,7 +1434,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">							(printDate.getTime() == currentDate.getTime() ? ' ' + this._currentClass : '') + // highlight selected day
</span><span class="token prefix unchanged"> </span><span class="token line">							(printDate.getTime() == today.getTime() ? ' ui-datepicker-today' : '')) + '"' + // highlight today (if different)
</span><span class="token prefix unchanged"> </span><span class="token line">							((!otherMonth || showOtherMonths) &amp;&amp; daySettings[2] ? ' title="' + daySettings[2] + '"' : '') + // cell title
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">							(unselectable ? '' : ' onclick="DP_jQuery.datepicker._selectDay(\'#' +
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">							(unselectable ? '' : ' onclick="DP_jQuery_' + expando + '.datepicker._selectDay(\'#' +
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">							inst.id + '\',' + printDate.getMonth() + ',' + printDate.getFullYear() + ', this);return false;"') + '>' + // actions
</span><span class="token prefix unchanged"> </span><span class="token line">							(otherMonth &amp;&amp; !showOtherMonths ? '&amp;#xa0;' : // display for other months
</span><span class="token prefix unchanged"> </span><span class="token line">							(unselectable ? '&lt;span class="ui-state-default">' + printDate.getDate() + '&lt;/span>' : '&lt;a class="ui-state-default' +
</span></span><span class="token coord">@@ -1478,8 +1479,8 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			var inMinYear = (minDate &amp;&amp; minDate.getFullYear() == drawYear);
</span><span class="token prefix unchanged"> </span><span class="token line">			var inMaxYear = (maxDate &amp;&amp; maxDate.getFullYear() == drawYear);
</span><span class="token prefix unchanged"> </span><span class="token line">			monthHtml += '&lt;select class="ui-datepicker-month" ' +
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">				'onchange="DP_jQuery.datepicker._selectMonthYear(\'#' + inst.id + '\', this, \'M\');" ' +
</span><span class="token prefix deleted">-</span><span class="token line">				'onclick="DP_jQuery.datepicker._clickMonthYear(\'#' + inst.id + '\');"' +
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">				'onchange="DP_jQuery_' + expando + '.datepicker._selectMonthYear(\'#' + inst.id + '\', this, \'M\');" ' +
</span><span class="token prefix inserted">+</span><span class="token line">				'onclick="DP_jQuery_' + expando + '.datepicker._clickMonthYear(\'#' + inst.id + '\');"' +
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			 	'>';
</span><span class="token prefix unchanged"> </span><span class="token line">			for (var month = 0; month &lt; 12; month++) {
</span><span class="token prefix unchanged"> </span><span class="token line">				if ((!inMinYear || month >= minDate.getMonth()) &amp;&amp;
</span></span><span class="token coord">@@ -1513,8 +1514,8 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			year = (minDate ? Math.max(year, minDate.getFullYear()) : year);
</span><span class="token prefix unchanged"> </span><span class="token line">			endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);
</span><span class="token prefix unchanged"> </span><span class="token line">			html += '&lt;select class="ui-datepicker-year" ' +
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">				'onchange="DP_jQuery.datepicker._selectMonthYear(\'#' + inst.id + '\', this, \'Y\');" ' +
</span><span class="token prefix deleted">-</span><span class="token line">				'onclick="DP_jQuery.datepicker._clickMonthYear(\'#' + inst.id + '\');"' +
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">				'onchange="DP_jQuery_' + expando + '.datepicker._selectMonthYear(\'#' + inst.id + '\', this, \'Y\');" ' +
</span><span class="token prefix inserted">+</span><span class="token line">				'onclick="DP_jQuery_' + expando + '.datepicker._clickMonthYear(\'#' + inst.id + '\');"' +
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">				'>';
</span><span class="token prefix unchanged"> </span><span class="token line">			for (; year &lt;= endYear; year++) {
</span><span class="token prefix unchanged"> </span><span class="token line">				html += '&lt;option value="' + year + '"' +
</span></span><span class="token coord">@@ -1674,6 +1675,6 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">// Workaround for #4055
</span><span class="token prefix unchanged"> </span><span class="token line">// Add another global to avoid noConflict issues with inline event handlers
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">window.DP_jQuery = $;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">window['DP_jQuery_' + expando] = $;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">})(jQuery);</span></span></code></pre>
    </div>
  

  <div class="attachment-download flex-column flex-center">
    <h3>Download in other formats:</h3>
    <a class="attachment-download-link" download="" href="/raw-attachment/ticket/4704/noconflict.diff">Original Format</a>
  </div>
</h1></div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
